{"version":3,"sources":["Components/assets/state.png","Components/assets/channel.png","Components/assets/device.png","Components/assets/empty.png","Components/Loader.js","i18n.js","Connection.js","Dialogs/Error.js","Theme.js","GenericApp.js","Components/Utils.js","Tabs/Logo.js","Dialogs/Message.js","Tabs/Options.js","Components/cp-react-tree-table/src/component/Column.js","Components/cp-react-tree-table/src/component/ColumnWrapper.js","Components/cp-react-tree-table/src/component/VirtualListRow.js","Components/cp-react-tree-table/src/model/row.js","Components/cp-react-tree-table/src/util/index.js","Components/cp-react-tree-table/src/model/bt_node.js","Components/cp-react-tree-table/src/model/bt_leaf.js","Components/cp-react-tree-table/src/model/bt_root.js","Components/cp-react-tree-table/src/component/VirtualList.js","Components/cp-react-tree-table/src/component/TreeDataTable.js","Components/cp-react-tree-table/src/util/search.js","Components/cp-react-tree-table/src/index.js","Components/SelectID.js","Dialogs/SelectID.js","Tabs/Extended.js","Tabs/Services.js","Tabs/Enums.js","Tabs/AlexaSmartNames.js","Tabs/AlisaSmartNames.js","App.js","serviceWorker.js","createTheme.js","index.js","assets/copy-content.svg"],"names":["module","exports","Loader","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","size","react_default","a","createElement","className","theme","style","width","height","left","borderWidth","top","bottom","React","Component","withStyles","I18n","lang","word","arg1","arg2","arg3","translations","w","console","log","concat","undefined","replace","en","require","ru","de","window","sysLang","PROGRESS","CONNECTING","CONNECTED","OBJECTS_LOADED","READY","Connection","autoSubscribes","autoSubscribeLog","socket","io","connect","location","protocol","host","query","states","objects","scripts","list","hosts","groups","instances","firstConnect","waitForRestart","systemLang","connected","statesSubscribes","objectsSubscribes","onProgress","onError","err","error","on","emit","acl","data","systemConfig","common","language","navigator","userLanguage","onLanguage","getObjects","onReady","subscribe","reload","subscribed","message","onLog","onLogHandler","operation","type","id","obj","setTimeout","objectChange","state","stateChange","cb","cbs","indexOf","push","reg","RegExp","getState","pos","splice","length","Promise","resolve","_this2","changed","_rev","JSON","stringify","match","oldObj","_id","keys","forEach","test","onBlocklyChanges","blockly","onObjectChange","task","hasOwnProperty","disableProgressUdpate","_this3","res","STATES_LOADED","_this4","reject","val","_this5","setState","refresh","_this6","slice","startsWith","parseInt","split","pop","isEnable","_this7","_this8","_this9","_this10","oldId","newId","newCommon","_this11","_obj","engine","enabled","source","debug","verbose","name","engineType","adapter","_this12","startkey","endkey","doc","rows","map","item","value","originalGroup","confirmed","deleted","_this13","l","substring","deleteId","g","_this14","onConfirmDelete","result","_deleteGroup","newName","_list","_this15","nId","renameGroup","instance","command","handler","_enum","_this16","_res","i","PropTypes","func","DialogError","handleOk","onClose","Dialog","open","maxWidth","fullWidth","aria-labelledby","aria-describedby","DialogTitle","classes","titleBackground","root","titleColor","title","t","DialogContent","DialogContentText","text","DialogActions","Button","onClick","color","autoFocus","Theme","background","button","borderRadius","GenericApp","search","tmp","pathname","adapterName","instanceId","selectedTab","localStorage","selectedTabNum","native","errorText","loaded","themeType","toast","isIFrame","self","e","savedNative","progress","setLanguage","getObject","then","tab","index","isClose","_oldObj","b","setObject","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","ContentProps","action","IconButton","key","aria-label","close","index_esm","Dialogs_Error","newNative","getIsChanged","buttonStyle","Toolbar","position","right","Fab","variant","disabled","onSave","assign","marginLeft","flexGrow","attr","parse","parent","$iframeDialog","postMessage","days","months","Utils","filter","toUpperCase","toLowerCase","join","settings","options","isDesc","desc","lastIndexOf","CapitalWords","trim","forEnumId","custom","user","subOrder","order","subURLs","URLs","dest","Array","from","_result$splice","removed","slicedToArray","defaultEnabling","useCustom","icon","s","useCommon","alt","src","parts","defaultValue","r","toString","rgb","seconds","parseFloat","isNaN","hours","Math","floor","minutes","secs","angle","num","format","dateFormat","now","m","year","find","y","day","Date","abs","getTime","date","getDay","getDate","getMonth","href","target","p","noCommon","smartName","newSmartName","byON","smartType","getLanguage","nnn","_smartName","role","empty","nl","pl","it","fr","pt","es","el","document","body","appendChild","select","execCommand","removeChild","stopPropagation","preventDefault","namespace","INSTANCES","Logo","evt","f","files","FileReader","onload","contents","json","onLoad","readAsText","alert","news","titleLang","generateFile","input","setAttribute","addEventListener","handleFileSelect","click","logo","readme","buttons","focus","upload","fa_index_esm","download","filename","encodeURIComponent","display","marginRight","marginTop","float","padding","DialogMessage","Options","inAction","forceUserCreate","showHint","isInstanceAlive","TextField","label","onChange","margin","Card","card","CardActionArea","CardMedia","media","image","CardContent","renderTextWithA","CardActions","textAlign","ack","catch","Message","FormControlLabel","paddingTop","controlElement","control","Checkbox","checked","Tabs_Logo","column","columnSettings","renderInput","renderCheckbox","resetCerts","onForceUserCreate","fontWeight","columnLogo","renderCard","renderHint","renderToast","minHeight","minWidth","verticalAlign","Column","ColumnWrapper","_this$props","rowData","toggle","rowMetadata","renderCell","classNameColumn","_width","cWidth","baseClass","objectSpread","STYLE_COLUMN","boxSizing","overflow","VirtualListRow","overscanHeight","topOffset","row","hasVisibleChildren","onToggle","columns","classNameRow","selected","classNameSelected","metadata","getMetadata","STYLE_ROW","getHeight","data-rindex","onRowClick","onDoubleClick","data-depth","depth","Children","toArray","ColumnWrapper_ColumnWrapper","Row","hasChildren","arguments","isVisible","_height","_cacheHeight","_hasChildren","_updateHeight","hide","show","diff","n","processData","rowHeightDefault","processLevel","children","needle","haystack","noop","BTNode","_size","ch","getSize","at","child","sz","rm","min","oldHeight","removeInner","BTLeaf","collapse","insertInner","remaining","leaf","maybeSpill","me","sibling","myIndex","copy","op","used","mapRange","apply","BTRoot","insert","get","prototype","Error","node","cur","chunk","rHeight","getRow","rowObj","VirtualList","_handleScroll","onScroll","container","scrollTop","_setHeight","offsetHeight","removeEventListener","lastVisibleRowIndex","classNamePartlyVisible","classNameMover","classNameInner","_this$state","startYMax","max","startY","startIndex","getIndexAtY","endY","endIndex","contentTopOffset","getYAtIndex","visibleRowsData","visibleRows","relativeIndex","visible","VirtualListRow_VirtualListRow","STYLE_LIST","ref","elem","STYLE_WRAPPER","STYLE_CONTENT","posY","parentNode","WebkitOverflowScrolling","TreeDataTable","_handleOnToggle","delta","_toggleRow","hasChange","toggleOpen","currentDepth","rowIndex","getRowIndex","rowHeight","VirtualList_VirtualList","virtualList","expandAncestors","dataNode","mapAll","findNodeData","ancestors","currentRowIndex","previousDepth","currentRow","currentRoot","scrollTo","to","_from","_to","_isOpRangeValid","hasChanged","_walkOne","expandOrCollapse","_showRowsInRange","_hideRowsInRange","maxTo","warn","binarySearch","d","applyFilter","filters","context","filteredOut","room","members","expert","fID","fName","getName","_item","formatDate","dateObj","getFullYear","v","getHours","getMinutes","getSeconds","getMilliseconds","formatValue","texts","valFull","ex","getStates","isCommon","valText","ts","lc","unit","quality","q","quality2text","getSelectIdIcon","prefix","_id_","IconDefaultDevice","IconDefaultChannel","IconDefaultState","IconDefault","SelectID","selectedFound","copyContentImg","CopyContentImg","treeTableRef","createRef","mainRef","connection","_buildTree","ids","sort","currentPathArr","currentPath","currentPathLen","info","funcEnums","roomEnums","roles","croot","_loop","statesOnly","repeat","u","move","curPath","_loop2","k","_croot","buildTree","onSelect","isDouble","getObjectName","toggleChildren","current","getElementsByClassName","__installed","cellCopy","div","img","secondary","A200","onCopy","dataset","cellCopyPressed","installCopyButtons","findNode","_parts","_path","_level","found","scrollIntoView","isState","paddingLeft","data-index","cellWrapper","toggleButtonWrapper","cellWrapperElement","findRoomsForObject","withParentInfo","rooms","origin","findFunctionsForObject","funcs","filterTimer","clearTimeout","forceUpdate","FormControl","headerCellInput","marginBottom","Input","underline","placeholder","onFilter","autoComplete","values","Select","inputProps","displayEmpty","MenuItem","selectNone","selectIcon","getFilterSelect","expandAll","collapseAll","toolbar","toolbarButtons","onExpandAll","onCollapseAll","visibleButtons","onExpandVisible","onCollapseVisible","WIDTHS","mainDiv","getToolbar","header","headerCell","getFilterInput","getFilterSelectRole","getFilterSelectRoom","getFilterSelectFunction","tableDiv","cp_react_tree_table_src","partlyVisible","treeTable","treeTableRow","isDoubleClick","grow","renderIndexColumn","bind","cellDivId","renderColumnName","cellDiv","renderColumnRole","renderColumnRoom","renderColumnFunc","renderColumnValue","CircularProgress","borderTop","borderBottom","boxShadow","fontSize","alignItems","lineHeight","opacity","paddingRight","cursor","selectSpan","border","A700","DialogSelectID","onOk","headerID","disableBackdropClick","disableEscapeKeyDown","paper","dialog","content","Components_SelectID","ok","handleCancel","cancel","fontStyle","ExtendedOptions","showSelectId","FormHelperText","Dialogs_SelectID","renderSelect","getSelectIdDialog","Services","running","text2commandList","addValue","onKeyChangedBound","onKeyChanged","assertThisInitialized","getAdapterInstances","subscribeState","unsubscribeState","showError","chips","chipsDiv","onKeyUp","keyCode","onChipsAdd","Chip","onDelete","onChipsDelete","chip","reissueUrlKey","fullSize","login","readOnly","copyToClipboard","renderChips","text2command","Enums","editId","editedSmartName","loading","onEnumUpdateBound","onEnumUpdate","getEnums","subscribeObject","unsubscribeObject","removeChanged","updateObjInState","sendTo","getSmartNameFromObj","disableSmartName","removeSmartName","addChanged","informInstance","getObjectNameFromObj","enumLine","enumLineName","enumLineSubName","enumLineId","Switch","enumLineEnabled","onToggleEnum","enumLineEdit","onEdit","renderEnum","newObj","updateSmartName","helperText","changeSmartName","columnHeader","columnDiv","renderEnums","renderMessage","renderEditDialog","palette","primary","light","contrastText","actionsMapping","turnOn","IconOn","turnOff","setTargetTemperature","IconTemperature","incrementTargetTemperature","IconUp","decrementTargetTemperature","IconDown","setPercentage","IconPercentage","incrementPercentage","decrementPercentage","setColor","IconColor","setColorTemperature","IconBulb","incrementColorTemperature","decrementColorTemperature","getTargetTemperature","IconThermometer","getTemperatureReading","setLockState","IconLock","getLockState","SMARTTYPES","AlexaSmartNames","translated","editObjectName","showConfirmation","devices","browse","expanded","lastChanged","timerChanged","browseTimer","browseTimerCount","waitForUpdateID","onReadyUpdateBound","onReadyUpdate","onResultUpdateBound","onResultUpdate","isIndicate","lastBrowse","devTimer","device","dev","additionalApplianceDetails","friendlyNames","friendlyName","actions","Icon","actionIcon","lineNum","items","devSubLineByOn","devSubLineByOnSelect","onParamsChange","devSubLineTypeTitle","group","channels","names","types","byONs","smarttypes","smartTypes","c","chan","devSubLine","devLineActions","channelLineActions","renderActions","devSubLineName","devSubSubLineName","renderSelectType","renderSelectByOn","devSubLineDelete","onAskDelete","nameModified","devModified","devCount","devLine","devLineNumber","devLineExpand","onExpand","Badge","badgeContent","devLineNameBlock","devLineName","devLineDescription","friendlyDescription","devLineProgress","devLineEdit","devLineDelete","renderChannels","editedId","onKeyDown","renderDevice","_this17","renderDevices","renderConfirmDialog","devLineEnabled","devSubLineEdit","OnOff","Brightness","RGB","AlisaDevices","iobID","main","getId","devSubSubLine","setId","devSubLineSetId","attributes","description","App","amazonAlexa","yandexAlisa","AppBar","Tabs","getSelectedTab","selectTab","Tab","data-name","tabContentIFrame","tabContent","Tabs_Options","onLoadConfig","updateNativeValue","Tabs_Enums","Tabs_AlexaSmartNames","AlisaSmartNames","Extended","Tabs_Services","onShowError","renderError","renderSaveCloseButtons","Components_Loader","Boolean","hostname","createTheme","createMuiTheme","dark","build","ReactDOM","render","MuiThemeProvider","src_App","onThemeChange","_theme","getElementById","serviceWorker","ready","registration","unregister","__webpack_require__"],"mappings":"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","file":"static/js/main.4774d483.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABiCAYAAABEZ20wAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAT3SURBVHhe7V0tUxxBEKVSkREIZCQiMhKZH4BKRSAQCAQmLgKBQ/AD8gMQSEREJAKBRCAQkYiIiIiIiIiISz+qu2pqs9zN3rzh5nafmDo+dofufvO6Z7p7l43ZbLah0YYNBERDi1FgCIw23EJr7lnMEDPEjD5WihlihpghZjTEAoEhMOSScrfQCuANsUVgCAy5LgXwhlggMKYMxov3H1/Z2LdxYePexi8bszUckBvyX9o4sLGZu0Macl21AG4C79r4voaGz1ksP02vD0MMnXMtHQxnw+cEhCv7+tDGNn6XI1Rr17hOb1wP6BOAnTNZQgXDhf7mwoLaB60ZliGPu6pwuQ8sQNhgBCNuTMDXDMVbnQP62YCeYMk5Q04aGB4jIBhWzKiBCMM7IMGQ3VJAKGC4e4pgPUrX9JSh3WVhEUL/opjIAgPbVwh0Vbo61vF+0/va9d8vkZ8FBs4RAOOwRJh1vdf0PnH9L0p0YIGBAxHA2C4RZl3vTeLlfYkOLDAiiBX5zBJFVnmvgbEV2/kSOVhgPB6CSgRZ93sdjCIbCAxS8lBgkAzJYKXAEBj/V+kYq4KxOlc5B8MGihkkdgkMkiEZjBIYAmP1McMTk3v2iTTMnSfpIlmH71EeRb7s2Q6hk2OGKbxp48zGn1B+wSeuw/VVatape5sUGKYsmJA2NNza90jQ7dh4rJ/g07/Hz6PwEzUWes16cmCYUV/aOE0YgHT1u5yg68BEehugnObct8w1k2BGAsRf+/p4SUMd2724vxogowfDXRMMCEMWuRncnwBSNFffghg1GAi6SYxYihFdo9l8R240xB5qUB87GNgFgRXXy7imOTXrrz7vGXne4jJCk+kQMxbaQmP7mhWscw1r8751MDA/7RwyWmYkseI218hDrgPb3Hh7Q+6bd+2YwYgGhxOWsTpngk9uvKIGgkmcM8xQSGnAB+9UAgMHRcx/x5p/zMyIhrgqnYlmOJzUH3NZAmNBtpWxyhYZmf03GPO1upv64cqJGYtWVc9hqniP3QmG0RSnmNEAGKhHAODau6nLobrOOUwWL8hW3VQ0Ut+wjNVhXjx9VNSoPJWtbXoCp7oqYxseB0PiUSfw3JVuxlJuKtdYbIr2bAqUtW0FDMiR5KhUz8gFhnHgmbNLiZIrADnKlanDXNQxVOlbxngdQ3Zr4F+QBs+Z14N11C+qlVydxePc2vYZ2l1W2h2CNDiyr33dIfg5tq/BBtxHL7Wy42aT54w5Lkt9U4tcQs2Y8QRLcA5RR+ETxin2l4sAb/33jAW5Vm6qZUAEhrrQV9+F3iJDxAwxQ8yotYlRACexS26KZEhGDGoJjN8uDK1dkmGg55rDdG/q3SHxXkK9VaeArayYEQ0EU3/fVFGDAwsMvHgXKZGpv4mt6JWALDCQTcWLdwFIkUDP5edZfwf6ut7Qv+gBHAoYXlzBY1rxZGmVTkCWAVnzmL7o2Y0aS3G9hAaGAxKt/FN7r21RrIjFwQYD7uohYcgoXZa7pmAE+oK3GGyjguHsACDncQiyT5RH8ZA8XlRPEZqh+JA5/BwB+aFH+lw5dpE0nehghJJufP2XgAHnjmpgOEv0/zNaAWOIK9C1s42qzJCBh/2jL4ExwI3UXlwCQ2AMo2/tFdnK/GKGmCFm9LFRzBAzxAwxoyEWCAyBIZeUu3VWAG+ILQJDYMh1KYA3xAKB0TgY/wCrKvMDWcWHNQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABiCAYAAABEZ20wAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAR7SURBVHhe7Z2hUhxBEIap6AhEZAQCkQeIiIjgAVApJAKBTVUkAkFVHiEPgEAikQhEREQkIhIREYFAREZc+j96iq27pdid+Xe2b/cXUyHczl7PfP13z8zODluLxWJLJUYfCEQgZxQMwYgRFqKFZylDypAy2lQpZUgZUoaUEUgFgiEYCkldh9BK4IHUIhiCodClBB5IBYIxZxivPn1+beXQyoWVWysPVhYbWGA37L+0cmRlu+sIqc91gyVwM3jfyu8N7PguznJv7Tro09FdrqXDcDV8a0C4tp+Prezisy5GRbvG2/TO24H2JGDnTJVQYbjRv9xYSPsoWscy7PFQlULuHQsIG0ZSxHcz8C2j4VHvgfZZQTuhknOGnTQYniNgGDxm0iBSxzuQpJD9UiAUGB6eUrKeZGh6rqM9ZMEJ0f6inMiCgeErDLou9Y5NrG/tvvH2H5bYz4KBeQRgHJcYk1PXvvPMv/sspz6jjn3/qdtwUXI/FgxMiABjt8SYnLpBYGBOhfbf5rQh1WHBSEmsKGbmNKQRsykjmkwb3jiMh5z6bBjLSVCJIbl1I8CA7Q6jqA9YyhAMn5XnOhXqTQFGGskVJc+STpQyfDncwsOeh4ib0g4tqa8w9RirBaPpRQyvyPVKwVh5YjYyjA/+/T9ygTLqMfpgCgl8xzvijtGpufcQjMecIRiBcoZgBIKRliLuc0MMo57C1NNcY7QVgARSMARjfWsmwytKQsXY36/lkMZcx2CkJfxBNpd1cRSGQ2z8PMO9EttlkDd2unTcENfMFkZq+Ev/DtHpz91TMF7YtysYFXZ6r3qh/f+n/+49K5n2BTl7ZTTG+GmrzJ5gEB459vHEFmUIBnP2mQNDCbwlJzDipWBMYEOC5wi8J4F5xmj7fBkOOZVJn2CMlTNWQ5p5pWAEgvHVw8Rpn9zDvFZh6mkJPcJO9OJnKlPJGYIRKEwJRhQYzNifey/ljAqLkl3hCIZgxHsG3tV7h7xOypAypIw2hUkZUkYsZZhHfrRyZQXHDqHg5+UTv5pl9sqwDvhi5V/LQyb8ruo61axhuCLQ6cuOt4JTblBOGoCqKWTuMBCOsDi3pgCHg8+uaoWqucNAfkCHrx2n5ArBZ9VeExAMwWgdTf11z6h2doiPmuD9Jy1P/pA3qoUp+65QZ4ekcwmrnaqD4asn6tETuNkR6lQdnPda/bypRqJePmVbKdXOn2rYcVkyYKBMjMwYHLw7yklsrpBRJ31mQ9rRWLRViAVjGyMXB1JkUIlnjVG34Yhof9HLOhQYvpHswGHgLaI5nt5ZfAI0DYYDSWcVzu1c26JckRTNhoFwlV7pgkImGbI8NKX3CP9gaMsIkVQYrg4ASTv8kNSR3LB2hOEfxWhGw/vcw+cRsB/tSMkabcMoktYmOozGjhH9lYCey/iDwXCV6O9n9AAyKIw+oUDXkt7PUEdynipKGT3CyNBOJxiCwZH10J5a+/5ShpQhZbSpTsqQMqQMKSOQCgRDMBSSug6RlcADqUUwBEOhSwk8kAoEIziM/5ZTLyXvAlkpAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABiCAYAAABEZ20wAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAUXSURBVHhe7V2rUlxBEE1FRyCQEQhEPiAiIoIPQKWQCAQ2VZEIBFX5hHwAAolEIhAREZGISEREBAIRGbHpQ/VUpnYvl57pvtne3SOmCnZnhp4+fU7P497hxWw2e8GSwwcEIlEwEgyCkUMWsskzmUFmkBlDrCQzyAwyg8xIxAKCQTAoSdYpNBN4IrYQDIJB6WICT8QCgrHJYLz88PGVlEMpF1JupTxIma1ggd2w/1LKkZQt6wyppd5kCVwM3pfycwUdbwmWexnXQYujLXXDwVA2fKlAuJafj6Xs4juLUdnq6Jje6DgwngLYeSRLQsFQo3+osaD2UTbHRtijUlUk9y4KkGgwCiO+ioGvIwaetQ+MTwrGCZacR9gZBobmCBiGiFlrIIrjFZDCkH0vICFgqDyVZL2W0vSUo1WyEIQYvysnRoGB6SsMuvZGxyq2l3Hf6PgPPfZHgYF1BMA4bjVG2pxp27PWtqjvbV9JTrcdYsOpjuGiZwylTRQYWBABjN1WY7zO9LYPAgNrKoz/tnX8df0oMEoSa9ZMrzMrzXbNaDx2SNttBeMhAxiPi6AeQzxOUJnC9oR7ehlgR7cPomXKbIg6zrLlYAI3AzM0KMw+eCpoo2TKbMgEYJSZnCt5bjQzxhJnAcwie1J3T+vfWOpXf9fETqv8tticjhkEY/G0c2kylQWMQDvMUp2OGZbcYZEd6eed9vXNUn9epgiG8bTP4lwBYkfBuLPUJxgjZ88BsxgXGIEMXT2Zmo9egvEvkf/3BD4BGGUr4r5Fpiawg8yIWv0GMJRgEIy5hOxZfXojkmDkA6Ns4Xc/XOYNCk9ALm3XNjpxKjPwuAw0e6c3iROMzmNTy9rAusE3tgJvAXZjmUEwxlfR3dO6HnmYj0L5/bt+9rY3offYUTNn45lRSUx5VGaPYOjGX4vGerR6gBkE46kd0BZQeuSBOSNhzngOlKmDgjljICgElHMFpvs53x6GEgyCMf6qsGda541InT2RGctK4ANbKp81IE5b8sSczHQ/+Nw7nZ63deUPl9QRLkdG9OFRh3XbKCQYiWSKYESA0avx2dqthUxlc2qvPQQj0V0gBINgLC4AI6KiVx6ytIvwwdLXGVmc6bWDYFCm4mRKoum9lCspuDIIBT8/ntZZi7cPb/vI6b150GPO6aGotPkk5c/AmQQ+M+0xefvwtl+LLXSNRjj90fFScEMNykkF0ChDvH142w9sVnY/lLHUvSmVIxi/wAAFB99dPcNGSFp3HxE2rAszkB/gyIWrkJQh+G70EX/NMd19eNuvEzMIxsAkJSqB/9ZIN90dUknEyUCEIW+0yFRXHxE2VDOpVHeHlHsJTbfqiCPwIr03gbv6iLChAiPVrTq477XpvqkqUQ/dVGC6e8rbh7d9BUa5b+rSuj4aqhclU+Vmm6ab2DQ6vYs+MKS7jyAbyhON3Y8KAZwoMLaq2YnLIE9kLaOtjLsEIiYl3S/rhIGhB/oHKlV4i2gTb+903wAdwoxKO8tdhZt2r60rV4SuwCswIFfllS4wZC0lS6WpvEf4S37fjpDIUGaoXAGQ8oQfZkpIbphtYPoXYnTEwFv6gN1qP8ZRkjXGhllk2JjCwZibe/O/BDQcB0wGhrKE/z8jCxgtUsC6QesMOtJ+Mjnmq0lliiC1gUQwGjR96uAiGASjjb5TR2SW/skMMoPMmOw8IwvNV90OyhRlijJFmUrEAoJBMChJ1okFE3githAMgkHpGpKuv887tA5HhhPjAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABiCAYAAABEZ20wAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAPhJREFUeF7tyKEBADAQhLDff+nrAngqEDG5bfkEZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZgy7B/6DRu7DB74QAAAAAElFTkSuQmCC\"","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from '@material-ui/core/styles';\nimport './loader.css'\n\nconst styles = theme => ({\n\n});\n\nclass Loader extends React.Component {\n    constructor(props) {\n        super(props);\n        this.size = this.props.size || 234;\n    }\n\n    render() {\n        return (\n            <div className={'logo-back logo-background-' + this.props.theme}>\n                <div className=\"logo-div\" style={{width: this.size, height: this.size}}>\n                    <div className={'logo-top logo-background-' + this.props.theme} style={{left: '37%'}}/>\n                    <div className={'logo-top logo-background-' + this.props.theme} style={{left: '57%'}}/>\n                    <div\n                        className={'logo-border logo-background-' + this.props.theme + ' logo-animate-wait'}\n                        style={{borderWidth: this.size * 0.132}}\n                    />\n                    <div className={'logo-i logo-animate-color-inside-' + this.props.theme}/>\n                    <div className={'logo-i-top logo-animate-color-inside-' + this.props.theme} style={{top: '18%'}}/>\n                    <div className={'logo-i-top logo-animate-color-inside-' + this.props.theme} style={{bottom: '18%'}}/>\n                </div>\n                <div className={'logo-animate-grow logo-animate-grow-' + this.props.theme}\n                     style={{width: this.size + 11, height: this.size + 11}}\n                />\n            </div>\n        );\n    }\n}\n\nLoader.propTypes = {\n    size: PropTypes.number,\n    theme: PropTypes.string\n};\n\nexport default withStyles(styles)(Loader);\n\n","/**\n * Copyright 2018 bluefox <dogafox@gmail.com>\n *\n * Licensed under the Creative Commons Attribution-NonCommercial License, Version 4.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * https://creativecommons.org/licenses/by-nc/4.0/legalcode.txt\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n\nclass I18n {\n    static translations = {\n        'en': require('./i18n/en'),\n        'ru': require('./i18n/ru'),\n        'de': require('./i18n/de'),\n    };\n\n    static lang = window.sysLang || 'en';\n\n    static setLanguage(lang) {\n        if (lang) {\n            I18n.lang = lang;\n        }\n    }\n    static getLanguage() {\n        return I18n.lang;\n    }\n    static t(word, arg1, arg2, arg3) {\n        if (I18n.translations[I18n.lang]) {\n            const w = I18n.translations[I18n.lang][word];\n            if (w) {\n                word = w;\n            } else {\n                console.log(`Translate: ${word}`);\n            }\n        }\n        if (arg1 !== undefined) {\n            word = word.replace('%s', arg1);\n            if (arg2 !== undefined) {\n                word = word.replace('%s', arg2);\n                if (arg3 !== undefined) {\n                    word = word.replace('%s', arg3);\n\n                }\n            }\n        }\n        return word;\n    }\n}\n\n/*I18n.translations = {\n    'en': require('./i18n/en'),\n    'ru': require('./i18n/ru'),\n    'de': require('./i18n/de'),\n};\nI18n.fallbacks = true;\nI18n.t = function () {};*/\n\nexport default I18n;","import PropTypes from 'prop-types';\n\nexport const PROGRESS = {\n    CONNECTING: 0,\n    CONNECTED: 1,\n    OBJECTS_LOADED: 2,\n    READY: 3\n};\n\nclass Connection {\n    constructor(props) {\n        props = props || {};\n        this.props = props;\n        this.autoSubscribes = this.props.autoSubscribes || [];\n        this.autoSubscribeLog = this.props.autoSubscribeLog;\n        this.socket = window.io.connect(\n            window.location.protocol + '//' + window.location.host.replace('3000', 8081), // todo: do replace only if not in iFrame\n            {query: 'ws=true'});\n        this.states = {};\n        this.objects = null;\n        this.scripts = {\n            list: [],\n            hosts: [],\n            groups: [],\n            instances: []\n        };\n        this.firstConnect = true;\n        this.waitForRestart = false;\n        this.systemLang = 'en';\n        this.connected = false;\n        this.statesSubscribes = {}; // subscribe for states\n        this.objectsSubscribes = {}; // subscribe for objects\n        this.onProgress = this.props.onProgress || function () {};\n        this.onError = this.props.onError || function (err) {console.error(err);};\n\n        this.socket.on('connect', () => {\n            this.connected = true;\n            if (this.firstConnect) {\n                this.onProgress(PROGRESS.CONNECTED);\n                this.firstConnect = false;\n                this.socket.emit('getUserPermissions', (err, acl) => {\n                    this.acl = acl;\n                    // Read system configuration\n                    this.socket.emit('getObject', 'system.config', (err, data) => {\n                        this.systemConfig = data;\n                        if (!err && this.systemConfig && this.systemConfig.common) {\n                            this.systemLang = this.systemConfig.common.language;\n                        } else {\n                            this.systemLang = window.navigator.userLanguage || window.navigator.language;\n\n                            if (this.systemLang !== 'en' && this.systemLang !== 'de' && this.systemLang !== 'ru') {\n                                this.systemConfig.common.language = 'en';\n                                this.systemLang = 'en';\n                            }\n                        }\n                        this.props.onLanguage && this.props.onLanguage(this.systemLang);\n\n                        this.getObjects(() => {\n                            this.onProgress(PROGRESS.READY);\n                            this.props.onReady && this.props.onReady(this.objects, this.scripts);\n                        });\n                    });\n                });\n            } else {\n                this.onProgress(PROGRESS.READY);\n            }\n\n            this.subscribe(true);\n\n            if (this.waitForRestart) {\n                window.location.reload();\n            }\n        });\n        this.socket.on('disconnect', () => {\n            this.connected = false;\n            this.subscribed = false;\n            this.onProgress(PROGRESS.CONNECTING)\n        });\n        this.socket.on('reconnect', () => {\n            this.onProgress(PROGRESS.READY);\n            if (this.waitForRestart) {\n                window.location.reload();\n            }\n        });\n        this.socket.on('reauthenticate', () => window.location.reload());\n        this.socket.on('log', message => {\n            this.props.onLog && this.props.onLog(message);\n            this.onLogHandler && this.onLogHandler(message);\n        });\n\n        this.socket.on('permissionError', err =>\n            this.onError({message: 'no permission', operation: err.operation, type: err.type, id: (err.id || '')}));\n\n        this.socket.on('objectChange', (id, obj) => setTimeout(() => this.objectChange(id, obj), 0));\n        this.socket.on('stateChange', (id, state) => setTimeout(() => this.stateChange(id, state), 0))\n    }\n\n    subscribeState(id, cb) {\n        if (!this.statesSubscribes[id]) {\n            let reg = id.replace(/\\./g, '\\\\.').replace(/\\*/g, '.*');\n            if (reg.indexOf('*') === -1) {\n                reg += '$';\n            }\n            this.statesSubscribes[id] = {reg: new RegExp(reg), cbs: []};\n            this.statesSubscribes[id].cbs.push(cb);\n            if (this.connected) {\n                this.socket.emit('subscribe', id);\n            }\n        } else {\n            this.statesSubscribes[id].cbs.indexOf(cb) === -1 && this.statesSubscribes[id].cbs.push(cb);\n        }\n        this.getState(id, cb);\n    }\n\n    unsubscribeState(id, cb) {\n        if (this.statesSubscribes[id]) {\n            if (cb) {\n                const pos = this.statesSubscribes[id].cbs.indexOf(cb);\n                pos !== -1 && this.statesSubscribes[id].cbs.splice(pos, 1);\n            } else {\n                this.statesSubscribes[id].cbs = null;\n            }\n\n            if (this.connected && (!this.statesSubscribes[id].cbs || !this.statesSubscribes[id].cbs.length)) {\n                delete this.statesSubscribes[id];\n                this.socket.emit('unsubscribe', id);\n            }\n        }\n    }\n\n    subscribeObject(id, cb) {\n        if (!this.objectsSubscribes[id]) {\n            let reg = id.replace(/\\./g, '\\\\.').replace(/\\*/g, '.*');\n            if (reg.indexOf('*') === -1) {\n                reg += '$';\n            }\n            this.objectsSubscribes[id] = {reg: new RegExp(reg), cbs: []};\n            this.objectsSubscribes[id].cbs.push(cb);\n            if (this.connected) {\n                this.socket.emit('subscribeObjects', id);\n            }\n        } else {\n            this.objectsSubscribes[id].cbs.indexOf(cb) === -1 && this.objectsSubscribes[id].cbs.push(cb);\n        }\n        return Promise.resolve();\n    }\n\n    unsubscribeObject(id, cb) {\n        if (this.objectsSubscribes[id]) {\n            if (cb) {\n                const pos = this.objectsSubscribes[id].cbs.indexOf(cb);\n                pos !== -1 && this.objectsSubscribes[id].cbs.splice(pos, 1);\n            } else {\n                this.objectsSubscribes[id].cbs = null;\n            }\n\n            if (this.connected && (!this.objectsSubscribes[id].cbs || !this.objectsSubscribes[id].cbs.length)) {\n                delete this.objectsSubscribes[id];\n                this.socket.emit('unsubscribeObjects', id);\n            }\n        }\n        return Promise.resolve();\n    }\n\n    objectChange(id, obj) {\n        // update main.objects cache\n        if (!this.objects) return;\n\n        let changed = false;\n        if (obj) {\n            if (obj._rev && this.objects[id]) {\n                this.objects[id]._rev = obj._rev;\n            }\n\n            if (!this.objects[id] || JSON.stringify(this.objects[id]) !== JSON.stringify(obj)) {\n                this.objects[id] = obj;\n                changed = true;\n                let pos;\n                if (obj.type === 'instance') {\n                    pos = this.scripts.instances.indexOf(id);\n                    pos === -1 && this.scripts.instances.push(id);\n                } else\n                if (obj.type === 'script') {\n                    pos = this.scripts.list.indexOf(id);\n                    pos === -1 && this.scripts.list.push(id);\n                } else\n                if (id.match(/^script\\.js\\./) && obj.type === 'channel') {\n                    pos = this.scripts.groups.indexOf(id);\n                    pos === -1 && this.scripts.groups.push(id);\n                }\n            }\n        } else if (this.objects[id]) {\n            const oldObj = {_id: id, type: this.objects[id].type};\n            delete this.objects[id];\n            let pos;\n            if (oldObj.type === 'instance') {\n                pos = this.scripts.instances.indexOf(id);\n                if (pos !== -1) this.scripts.instances.splice(pos, 1);\n            } else\n            if (oldObj.type === 'script') {\n                pos = this.scripts.list.indexOf(id);\n                if (pos !== -1) this.scripts.list.splice(pos, 1);\n            } else\n            if (id.match(/^script\\.js\\./) && oldObj.type === 'channel') {\n                pos = this.scripts.groups.indexOf(id);\n                if (pos !== -1) this.scripts.groups.splice(pos, 1);\n            }\n            changed = true;\n        }\n\n        Object.keys(this.objectsSubscribes).forEach(_id => {\n            if (_id === id || this.objectsSubscribes[_id].reg.test(id)) {\n                this.objectsSubscribes[_id].cbs.forEach(cb => cb(id, obj));\n            }\n        });\n\n        if (this.props.onBlocklyChanges && id.match(/^system\\.adapter\\.[-\\w\\d]+\\$/)) {\n            if (obj[id].common && obj[id].common.blockly) {\n                this.props.onBlocklyChanges(id);\n            }\n        }\n        if (changed && this.props.onObjectChange) {\n            this.props.onObjectChange(this.objects, this.scripts);\n        }\n    }\n\n    stateChange(id, state) {\n        id = id ? id.replace(/[\\s'\"]/g, '_') : '';\n        for (const task in this.statesSubscribes) {\n            if (this.statesSubscribes.hasOwnProperty(task) && this.statesSubscribes[task].reg.test(id)) {\n                this.statesSubscribes[task].cbs.forEach(cb => cb(id, state));\n            }\n        }\n    }\n\n    getStates(cb, disableProgressUdpate) {\n        this.socket.emit('getStates', (err, res) => {\n            this.states = res;\n            !disableProgressUdpate && this.onProgress(PROGRESS.STATES_LOADED);\n            cb && setTimeout(() => cb(this.states), 0);\n        });\n    }\n\n    getState(id, cb) {\n        if (!cb) {\n            return new Promise((resolve, reject) =>\n                this.getState(id, (err, state) => err ? reject(err) : resolve(state)));\n        } else {\n            this.socket.emit('getState', id, cb);\n        }\n    }\n\n    setState(id, val, cb) {\n        if (!cb) {\n            return new Promise((resolve, reject) =>\n                this.setState(id, val, err => err ? reject(err) : resolve()));\n        } else {\n            this.socket.emit('setState', id, val, cb);\n        }\n    }\n\n    getObjects(refresh, cb, disableProgressUdpate) {\n        if (typeof refresh === 'function') {\n            disableProgressUdpate = cb;\n            cb = refresh;\n            refresh = false;\n        }\n\n        if (!refresh && this.objects) {\n            return setTimeout(() => cb && cb(this.objects), 0);\n        }\n\n        this.socket.emit('getAllObjects', (err, res) => {\n            setTimeout(() => {\n                let obj;\n                this.objects = res;\n                for (const id in this.objects) {\n                    if (!this.objects.hasOwnProperty(id) || id.slice(0, 7) === '_design') continue;\n\n                    obj = res[id];\n                    if (obj.type === 'instance') {\n                        id.startsWith('system.adapter.javascript.') && this.scripts.instances.push(parseInt(id.split('.').pop()));\n                    }\n                    if (obj.type === 'script')   this.scripts.list.push(id);\n                    if (obj.type === 'channel' && id.match(/^script\\.js\\./)) this.scripts.groups.push(id);\n                    if (obj.type === 'host')     this.scripts.hosts.push(id);\n                }\n                disableProgressUdpate && this.onProgress(PROGRESS.OBJECTS_LOADED);\n\n                cb && cb(this.objects);\n            }, 0);\n        });\n    }\n\n    subscribe(isEnable) {\n        if (isEnable && !this.subscribed) {\n            this.subscribed = true;\n            this.autoSubscribes.forEach(id => this.socket.emit('subscribeObjects', id));\n            Object.keys(this.objectsSubscribes).forEach(id => this.socket.emit('subscribeObjects', id));\n            this.autoSubscribeLog && this.socket.emit('requireLog', true);\n\n            Object.keys(this.statesSubscribes).forEach(id => this.socket.emit('subscribe', id));\n        } else if (!isEnable && this.subscribed) {\n            this.subscribed = false;\n            this.autoSubscribes.forEach(id => this.socket.emit('unsubscribeObjects', id));\n            Object.keys(this.objectsSubscribes).forEach(id => this.socket.emit('unsubscribeObjects', id));\n            this.autoSubscribeLog && this.socket.emit('requireLog', false);\n\n            Object.keys(this.statesSubscribes).forEach(id => this.socket.emit('unsubscribe', id));\n        }\n    }\n\n    delObject(id) {\n        return new Promise((resolve, reject) => {\n            this.socket.emit('delObject', id, err => {\n                err ? reject(err) : resolve();\n            });\n        });\n    }\n\n    setObject(id, obj) {\n        return new Promise((resolve, reject) => {\n            this.socket.emit('setObject', id, obj, err => {\n                err ? reject(err) : resolve();\n            });\n        });\n    }\n\n    getObject(id) {\n        return new Promise((resolve, reject) => {\n            this.socket.emit('getObject', id, (err, obj) => {\n                err ? reject(err) : resolve(obj);\n            });\n        });\n    }\n\n    updateScript(oldId, newId, newCommon) {\n        return new Promise((resolve, reject) => {\n            this.socket.emit('getObject', oldId, (err, _obj) => {\n                setTimeout(() => {\n                    const obj = {common: {}};\n\n                    if (newCommon.engine  !== undefined) obj.common.engine  = newCommon.engine;\n                    if (newCommon.enabled !== undefined) obj.common.enabled = newCommon.enabled;\n                    if (newCommon.source  !== undefined) obj.common.source  = newCommon.source;\n                    if (newCommon.debug   !== undefined) obj.common.debug   = newCommon.debug;\n                    if (newCommon.verbose !== undefined) obj.common.verbose = newCommon.verbose;\n\n                    if (oldId === newId && _obj && _obj.common && newCommon.name === _obj.common.name) {\n                        if (!newCommon.engineType || newCommon.engineType !== _obj.common.engineType) {\n                            if (newCommon.engineType !== undefined) obj.common.engineType  = newCommon.engineType || 'Javascript/js';\n\n                            this.socket.emit('extendObject', oldId, obj, err => err ? reject(err) : resolve());\n                        } else {\n                            this.socket.emit('extendObject', oldId, obj, err => err ? reject(err) : resolve());\n                        }\n                    } else {\n                        // let prefix;\n\n                        // let parts = _obj.common.engineType.split('/');\n\n                        // prefix = 'script.' + (parts[1] || parts[0]) + '.';\n\n                        if (_obj && _obj.common) {\n                            _obj.common.engineType = newCommon.engineType || _obj.common.engineType || 'Javascript/js';\n                            this.socket.emit('delObject', oldId, err => {\n                                if (err) {\n                                    reject(err);\n                                } else {\n                                    if (obj.common.engine  !== undefined) _obj.common.engine  = obj.common.engine;\n                                    if (obj.common.enabled !== undefined) _obj.common.enabled = obj.common.enabled;\n                                    if (obj.common.source  !== undefined) _obj.common.source  = obj.common.source;\n                                    if (obj.common.name    !== undefined) _obj.common.name    = obj.common.name;\n                                    if (obj.common.debug   !== undefined) _obj.common.debug   = obj.common.debug;\n                                    if (obj.common.verbose !== undefined) _obj.common.verbose = obj.common.verbose;\n\n                                    delete _obj._rev;\n\n                                    // Name must always exist\n                                    _obj.common.name = newCommon.name;\n\n                                    _obj._id = newId; // prefix + newCommon.name.replace(/[\\s\"']/g, '_');\n\n                                    this.socket.emit('setObject', newId, _obj, err => err ? reject(err) : resolve());\n                                }\n                            });\n                            return;\n                        } else {\n                            _obj = obj;\n                        }\n\n                        // Name must always exist\n                        _obj.common.name = newCommon.name;\n\n                        _obj._id = newId; // prefix + newCommon.name.replace(/[\\s\"']/g, '_');\n\n                        this.socket.emit('setObject', newId, _obj, err => err ? reject(err) : resolve());\n                    }\n                }, 0);\n            });\n        });\n    }\n\n    getAdapterInstances(adapter) {\n        return new Promise((resolve, reject) => {\n            this.socket.emit('getObjectView', 'system', 'instance', {startkey: 'system.adapter.' + adapter, endkey: 'system.adapter.' + (adapter ? adapter + '.' : '') + '\\u9999'}, (err, doc) => {\n                if (err) {\n                    reject(err);\n                } else {\n                    resolve(doc.rows.map(item => item.value));\n                }\n            });\n        });\n    }\n\n    _deleteGroup(id, originalGroup, confirmed, deleted) {\n        if (confirmed.indexOf(id) === -1) {\n            confirmed.push(id);\n        }\n\n        return new Promise((resolve, reject) => {\n            // find all elements\n            for (let l = 0; l < this.scripts.list.length; l++) {\n                if (this.scripts.list[l].substring(0, id.length + 1) === id + '.' &&\n                    (!deleted || deleted.indexOf(this.scripts.list[l]) === -1)) {\n                    return this.deleteId(this.scripts.list[l], id, confirmed, deleted);\n                }\n            }\n\n            for (let g = 0; g < this.scripts.groups.length; g++) {\n                if (this.scripts.groups[g].substring(0, id.length + 1) === id + '.') {\n                    return this.deleteId(this.scripts.groups[g], id, confirmed, deleted);\n                }\n            }\n\n            this.socket.emit('delObject', id, err => {\n                if (err) {\n                    reject(err);\n                } else if (originalGroup !== id) {\n                    return this.deleteId(originalGroup, null, confirmed, deleted);\n                } else {\n                    // finish\n                    resolve();\n                }\n            });\n        });\n    }\n\n    deleteId(id, originalGroup, confirmed, deleted) {\n        originalGroup = originalGroup || id;\n        confirmed     = confirmed     || [];\n        deleted       = deleted       || [];\n\n        return new Promise((resolve, reject) => {\n            if (this.objects[id] && this.objects[id].type === 'script') {\n                if (this.props.onConfirmDelete) {\n                    this.props.onConfirmDelete(false, this.objects[id].common.name, result => {\n                        if (result) {\n                            this.socket.emit('delObject', id, err => {\n                                if (err) {\n                                    reject(err);\n                                } else {\n                                    deleted.push(id);\n                                    return this.deleteId(originalGroup, null, confirmed, deleted);\n                                }\n                            });\n                        } else {\n                            // Do nothing\n                            reject('canceled');\n                        }\n                    });\n                } else {\n                    this.socket.emit('delObject', id, err => {\n                        if (err) {\n                            reject(err);\n                        } else {\n                            deleted.push(id);\n                            return this.deleteId(originalGroup, null, confirmed, deleted);\n                        }\n                    });\n                }\n            } else {\n                let name = id;\n                if (confirmed.indexOf(id) === -1) {\n                    if (this.objects[id] && this.objects[id].common && this.objects[id].common.name) {\n                        name = this.objects[id].common.name;\n                    }\n\n                    if (this.props.onConfirmDelete) {\n                        this.props.onConfirmDelete(true, name, result => {\n                            if (result) {\n                                return this._deleteGroup(id, originalGroup, confirmed, deleted);\n                            } else {\n                                reject('canceled');\n                            }\n                        });\n                    } else {\n                        return this._deleteGroup(id, originalGroup, confirmed, deleted);\n                    }\n                } else {\n                    return this._deleteGroup(id, originalGroup, confirmed, deleted);\n                }\n            }\n        });\n    }\n\n    renameGroup(id, newId, newName, _list) {\n        return new Promise((resolve, reject) => {\n            if (!_list) {\n                _list = [];\n\n                // collect all elements to rename\n                // find all elements\n                for (let l = 0; l < this.scripts.list.length; l++) {\n                    if (this.scripts.list[l].substring(0, id.length + 1) === id + '.') {\n                        _list.push(this.scripts.list[l]);\n                    }\n                }\n                for (let g = 0; g < this.scripts.groups.length; g++) {\n                    if (this.scripts.groups[g].substring(0, id.length + 1) === id + '.') {\n                        _list.push(this.scripts.list[g]);\n                    }\n                }\n\n                this.socket.emit('getObject', id, (err, obj) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        obj = obj || {common: {}};\n                        obj.common.name = newName;\n                        obj._id = newId;\n\n                        this.socket.emit('delObject', id, err => {\n                            if (err) {\n                                reject(err);\n                            } else {\n                                this.socket.emit('setObject', newId, obj, err => {\n                                    if (err) {\n                                        reject(err);\n                                    } else {\n                                        return this.renameGroup(id, newId, newName, _list);\n                                    }\n                                });\n                            }\n                        });\n                    }\n                });\n            } else {\n                if (_list.length) {\n                    let nId = _list.pop();\n\n                    this.socket.emit('getObject', nId, (err, obj) => {\n                        if (err) {\n                            reject(err);\n                        } else {\n                            this.socket.emit('delObject', nId, err => {\n                                if (err) {\n                                    reject(err);\n                                } else {\n                                    nId = newId + nId.substring(id.length);\n                                    this.socket.emit('setObject', nId, obj, err => {\n                                        if (err) {\n                                            reject(err);\n                                        } else {\n                                            return this.renameGroup(id, newId, newName, _list);\n                                        }\n                                    });\n                                }\n                            });\n                        }\n                    });\n                } else {\n                    resolve();\n                }\n            }\n        });\n    }\n\n    getScripts() {\n        return this.scripts;\n    }\n\n    sendTo(instance, command, data, cb) {\n        this.socket.emit('sendTo', instance, command, data, cb);\n    }\n\n    extendObject(id, obj, cb) {\n        this.socket.emit('extendObject', id, obj, cb);\n    }\n\n    registerLogHandler(handler) {\n        this.onLogHandler = handler;\n    }\n\n    unregisterLogHandler(handler) {\n        this.onLogHandler = null;\n    }\n\n    getEnums(_enum) {\n        return new Promise((resolve, reject) => {\n            this.socket.emit('getObjectView', 'system', 'enum', {startkey: 'enum.' + (_enum || ''), endkey: 'enum.' + (_enum ? (_enum + '.') : '') + '\\u9999'}, (err, res) => {\n                if (!err && res) {\n                    const _res   = {};\n                    for (let i = 0; i < res.rows.length; i++) {\n                        if (_enum && res.rows[i].id === 'enum.' + _enum) continue;\n                        _res[res.rows[i].id] = res.rows[i].value;\n                    }\n                    resolve(_res);\n                } else {\n                    reject(err);\n                }\n            });\n        });\n    }\n\n}\n\nConnection.Connection = {\n    onLog: PropTypes.func,\n    onReady: PropTypes.func,\n    onProgress: PropTypes.func,\n};\n\nexport default Connection;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport I18n from '../i18n';\n\nconst styles = theme => ({\n});\n\nclass DialogError extends React.Component {\n    handleOk = () => {\n        this.props.onClose && this.props.onClose();\n    };\n\n    render() {\n        return (\n            <Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"alert-dialog-title\"\n                aria-describedby=\"alert-dialog-description\"\n            >\n                <DialogTitle className={this.props.classes.titleBackground}\n                             classes={{root: this.props.classes.titleColor}}\n                             id=\"alert-dialog-title\">{this.props.title || I18n.t('Error')}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText id=\"alert-dialog-description\">\n                        {this.props.text || I18n.t('Unknown error!')}\n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.handleOk()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nDialogError.propTypes = {\n    onClose: PropTypes.func,\n    title: PropTypes.string,\n    text: PropTypes.string,\n    icon: PropTypes.object\n};\n\nexport default withStyles(styles)(DialogError);\n","const primaryColor = '#64b5f6';\n\nexport default {\n    primaryColor,\n    type: 'light',\n    saveToolbar: {\n        background: primaryColor,\n        button: {\n            borderRadius: 3,\n            height: 32\n        }\n    }\n}","import React, {Component} from 'react';\nimport Connection from './Connection';\nimport {PROGRESS} from './Connection';\nimport I18n from './i18n';\nimport DialogError from './Dialogs/Error';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Fab from '@material-ui/core/Fab';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport {MdSave as IconSave} from 'react-icons/md'\nimport {MdClose as IconClose} from 'react-icons/md'\n\nimport Theme from './Theme';\n\nclass GenericApp extends Component {\n    constructor(props) {\n        super(props);\n\n        // extract instance from URL\n        this.instance = parseInt(window.location.search.slice(1), 10) || 0;\n        // extract adapter name from URL\n        const tmp = window.location.pathname.split('/');\n        this.adapterName = tmp[tmp.length - 2] || 'iot';\n        this.instanceId  = 'system.adapter.' + this.adapterName + '.' + this.instance;\n\n        this.state = {\n            selectedTab: window.localStorage[this.adapterName + '-adapter'] || '',\n            selectedTabNum: -1,\n            native: {},\n            errorText: '',\n            changed: false,\n            connected: false,\n            loaded: false,\n            themeType: 'light',\n            toast: ''\n        };\n\n        try {\n            this.isIFrame = window.self !== window.top;\n        } catch (e) {\n            this.isIFrame = true;\n        }\n\n        this.savedNative = {}; // to detect if the config changed\n\n        this.socket = new Connection({\n            onProgress: progress => {\n                if (progress === PROGRESS.CONNECTING) {\n                    this.setState({connected: false});\n                } else if (progress === PROGRESS.READY) {\n                    this.setState({connected: true});\n                } else {\n                    this.setState({connected: true});\n                }\n            },\n            onReady: (objects, scripts) => {\n                I18n.setLanguage(this.socket.systemLang);\n                this.socket.getObject(this.instanceId)\n                    .then(obj => {\n                        this.common = obj.common;\n                        this.setState({native: obj.native, loaded: true});\n                    });\n            },\n            onError: err => {\n                console.error(err);\n            }\n        });\n    }\n\n    selectTab(tab, index) {\n        window.localStorage[this.adapterName + '-adapter'] = tab;\n        this.setState({selectedTab: tab, selectedTabNum: index})\n    }\n\n    onSave(isClose) {\n        let oldObj;\n        this.socket.getObject(this.instanceId)\n            .then(_oldObj => {\n                oldObj = _oldObj || {};\n\n                for (const a in this.state.native) {\n                    if (this.state.native.hasOwnProperty(a)) {\n                        oldObj.native[a] = this.state.native[a];\n                    }\n                }\n\n                if (this.state.common) {\n                    for (const b in this.state.common) {\n                        if (this.state.common.hasOwnProperty(b)) {\n                            oldObj.common[b] = this.state.common[b];\n                        }\n                    }\n                }\n\n                return this.socket.setObject(this.instanceId, oldObj);\n            })\n            .then(() => {\n                this.savedNative = oldObj.native;\n                this.setState({changed: false});\n                isClose && GenericApp.onClose();\n            });\n    }\n\n    renderToast() {\n        if (!this.state.toast) return null;\n        return (\n            <Snackbar\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'left',\n                }}\n                open={true}\n                autoHideDuration={6000}\n                onClose={() => this.setState({toast: ''})}\n                ContentProps={{\n                    'aria-describedby': 'message-id',\n                }}\n                message={<span id=\"message-id\">{this.state.toast}</span>}\n                action={[\n                    <IconButton\n                        key=\"close\"\n                        aria-label=\"Close\"\n                        color=\"inherit\"\n                        className={this.props.classes.close}\n                        onClick={() => this.setState({toast: ''})}\n                    >\n                        <IconClose />\n                    </IconButton>,\n                ]}\n            />);\n    }\n\n    static onClose() {\n        if (typeof window.parent !== 'undefined' && window.parent) {\n            try {\n                if (window.parent.$iframeDialog && typeof window.parent.$iframeDialog.close === 'function') {\n                    window.parent.$iframeDialog.close();\n                } else {\n                    window.parent.postMessage('close', '*');\n                }\n            } catch (e) {\n                window.parent.postMessage('close', '*');\n            }\n        }\n    }\n\n    renderError() {\n        if (!this.state.errorText) return null;\n        return (<DialogError text={this.state.text} onClose={() => this.setState({errorText: ''})}/>);\n    }\n\n    getIsChanged(native) {\n        native = native || this.state.native;\n        return JSON.stringify(native) !== JSON.stringify(this.savedNative);\n    }\n\n    onLoadConfig(newNative) {\n        if (JSON.stringify(newNative) !== JSON.stringify(this.state.native)) {\n            this.setState({native: newNative, changed: this.getIsChanged(newNative)})\n        }\n    }\n\n    renderSaveCloseButtons() {\n        const buttonStyle = {\n            borderRadius: Theme.saveToolbar.button.borderRadius || 3,\n            height: Theme.saveToolbar.button.height || 32,\n        };\n\n        return (\n            <Toolbar position=\"absolute\" style={{bottom: this.isIFrame ? 38 : 0, left: 0, right: 0, position: 'absolute', background: Theme.saveToolbar.background}}>\n                <Fab variant=\"extended\" aria-label=\"Save\" disabled={!this.state.changed} onClick={() => this.onSave(false)} style={buttonStyle}>\n                    <IconSave />{I18n.t('Save')}\n                </Fab>\n                <Fab variant=\"extended\" aria-label=\"Save and close\" disabled={!this.state.changed} onClick={() => this.onSave(true)} style={Object.assign({}, buttonStyle, {marginLeft: 10})}>\n                    <IconSave />{I18n.t('Save and close')}\n                </Fab>\n                <div style={{flexGrow: 1}}/>\n                <Fab variant=\"extended\" aria-label=\"Close\" onClick={() => GenericApp.onClose()} style={buttonStyle}>\n                    <IconClose />{I18n.t('Close')}\n                </Fab>\n            </Toolbar>)\n    }\n\n    updateNativeValue(attr, value) {\n        const native = JSON.parse(JSON.stringify(this.state.native));\n        if (native[attr] !== value) {\n            native[attr] = value;\n            const changed = this.getIsChanged(native);\n            this.setState({native, changed});\n        }\n    }\n\n    showError(text) {\n        this.setState({errorText: text});\n    }\n\n    showToast(toast) {\n        this.setState({toast});\n    }\n\n    render() {\n        return null;\n    }\n}\n\nexport default GenericApp;\n","/**\n * Copyright 2018 bluefox <dogafox@gmail.com>\n *\n * Licensed under the Creative Commons Attribution-NonCommercial License, Version 4.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * https://creativecommons.org/licenses/by-nc/4.0/legalcode.txt\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n\nimport React from 'react';\nimport I18n from '../i18n';\n\nconst NAMESPACE = 'material';\nconst days = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];\nconst months = ['Jan', 'Feb', 'Mar', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\nclass Utils {\n    static namespace = NAMESPACE;\n    static INSTANCES = 'instances';\n    static dateFormat = ['DD', 'MM'];\n\n    static CapitalWords(name) {\n        return (name || '').split(/[\\s_]/)\n            .filter(item => item)\n            .map(word => word ? word[0].toUpperCase() + word.substring(1).toLowerCase() : '')\n            .join(' ');\n    }\n\n    static getObjectName(objects, id, settings, options, isDesc) {\n        let item = objects[id];\n        let text = id;\n        const attr = isDesc ? 'desc' : 'name';\n\n        options = options || {};\n        if (!options.language) {\n            options.language = (objects['system.config'] && objects['system.config'].common && objects['system.config'].common.language) || window.sysLang || 'en';\n        }\n        if (settings && settings.name) {\n            text = settings.name;\n            if (typeof text === 'object') {\n                text = text[options.language] || text.en;\n            }\n        } else\n        if (item && item.common && item.common[attr]) {\n            text = item.common[attr];\n            if (attr !== 'desc' && !text && item.common.desc) {\n                text = item.common.desc;\n            }\n            if (typeof text === 'object') {\n                text = text[options.language] || text.en;\n            }\n            text = text.replace(/[_.]/g, ' ');\n\n            if (text === text.toUpperCase()) {\n                text = text[0] + text.substring(1).toLowerCase();\n            }\n        } else {\n            let pos = id.lastIndexOf('.');\n            text = id.substring(pos + 1).replace(/[_.]/g, ' ');\n            text = Utils.CapitalWords(text);\n        }\n        return text.trim();\n    }\n\n    static getObjectNameFromObj(obj, settings, options, isDesc) {\n        let item = obj;\n        let text = obj._id;\n        const attr = isDesc ? 'desc' : 'name';\n\n        options = options || {};\n\n        if (settings && settings.name) {\n            text = settings.name;\n            if (typeof text === 'object') {\n                text = text[options.language] || text.en;\n            }\n        } else\n        if (item && item.common && item.common[attr]) {\n            text = item.common[attr];\n            if (attr !== 'desc' && !text && item.common.desc) {\n                text = item.common.desc;\n            }\n            if (typeof text === 'object') {\n                text = text[options.language] || text.en;\n            }\n            text = text.replace(/[_.]/g, ' ');\n\n            if (text === text.toUpperCase()) {\n                text = text[0] + text.substring(1).toLowerCase();\n            }\n        }\n        return text.trim();\n    }\n\n    static getSettingsOrder(obj, forEnumId, options) {\n        if (obj && obj.hasOwnProperty('common')) {\n            obj = obj.common;\n        }\n        let settings;\n        if (obj && obj.custom) {\n            settings = (obj.custom || {})[NAMESPACE];\n            const user = options.user || 'admin';\n            if (settings && settings[user]) {\n                if (forEnumId) {\n                    if (settings[user].subOrder && settings[user].subOrder[forEnumId]) {\n                        return JSON.parse(JSON.stringify(settings[user].subOrder[forEnumId]));\n                    }\n                } else {\n                    if (settings[user].order) {\n                        return JSON.parse(JSON.stringify(settings[user].order));\n                    }\n                }\n            }\n        }\n        return null;\n    }\n\n    static getSettingsCustomURLs(obj, forEnumId, options) {\n        if (obj && obj.hasOwnProperty('common')) {\n            obj = obj.common;\n        }\n        let settings;\n        if (obj && obj.custom) {\n            settings = (obj.custom || {})[NAMESPACE];\n            const user = options.user || 'admin';\n            if (settings && settings[user]) {\n                if (forEnumId) {\n                    if (settings[user].subURLs && settings[user].subURLs[forEnumId]) {\n                        return JSON.parse(JSON.stringify(settings[user].subURLs[forEnumId]));\n                    }\n                } else {\n                    if (settings[user].URLs) {\n                        return JSON.parse(JSON.stringify(settings[user].URLs));\n                    }\n                }\n            }\n        }\n        return null;\n    }\n\n    static reorder(list, source, dest) {\n        const result = Array.from(list);\n        const [removed] = result.splice(source, 1);\n        result.splice(dest, 0, removed);\n        return result;\n    };\n\n    static getSettings(obj, options, defaultEnabling) {\n        let settings;\n        const id = (obj && obj._id) || (options && options.id);\n        if (obj && obj.hasOwnProperty('common')) {\n            obj = obj.common;\n        }\n        if (obj && obj.custom) {\n            settings = obj.custom || {};\n            settings = settings[NAMESPACE] && settings[NAMESPACE][options.user || 'admin'] ? JSON.parse(JSON.stringify(settings[NAMESPACE][options.user || 'admin'])) : {enabled: true};\n        } else {\n            settings = {enabled: defaultEnabling === undefined ? true : defaultEnabling, useCustom: false};\n        }\n\n        if (!settings.hasOwnProperty('enabled')) {\n            settings.enabled = defaultEnabling === undefined ? true : defaultEnabling;\n        }\n\n        if (false && settings.useCommon) {\n            if (obj.color) settings.color = obj.color;\n            if (obj.icon)  settings.icon  = obj.icon;\n            if (obj.name)  settings.name  = obj.name;\n        } else {\n            if (options) {\n                if (!settings.name  && options.name)  settings.name  = options.name;\n                if (!settings.icon  && options.icon)  settings.icon  = options.icon;\n                if (!settings.color && options.color) settings.color = options.color;\n            }\n\n            if (obj) {\n                if (!settings.color && obj.color) settings.color = obj.color;\n                if (!settings.icon  && obj.icon)  settings.icon  = obj.icon;\n                if (!settings.name  && obj.name)  settings.name  = obj.name;\n            }\n        }\n\n        if (typeof settings.name === 'object') {\n            settings.name = settings.name[options.language] || settings.name.en;\n\n            settings.name = (settings.name || '').replace(/_/g, ' ');\n\n            if (settings.name === settings.name.toUpperCase()) {\n                settings.name = settings.name[0] + settings.name.substring(1).toLowerCase();\n            }\n        }\n        if (!settings.name && id) {\n            let pos = id.lastIndexOf('.');\n            settings.name = id.substring(pos + 1).replace(/[_.]/g, ' ');\n            settings.name = (settings.name || '').replace(/_/g, ' ');\n            settings.name = Utils.CapitalWords(settings.name);\n        }\n\n        return settings;\n    }\n\n    static setSettings(obj, settings, options) {\n        if (obj) {\n            obj.common = obj.common || {};\n            obj.common.custom = obj.common.custom || {};\n            obj.common.custom[NAMESPACE] = obj.common.custom[NAMESPACE] || {};\n            obj.common.custom[NAMESPACE][options.user || 'admin'] = settings;\n            const s = obj.common.custom[NAMESPACE][options.user || 'admin'];\n            if (s.useCommon) {\n                if (s.color !== undefined) {\n                    obj.common.color = s.color;\n                    delete s.color;\n                }\n                if (s.icon !== undefined) {\n                    obj.common.icon = s.icon;\n                    delete s.icon;\n                }\n                if (s.name !== undefined) {\n                    if (typeof obj.common.name !== 'object') {\n                        obj.common.name = {};\n                        obj.common.name[options.language] = s.name;\n                    } else{\n                        obj.common.name[options.language] = s.name;\n                    }\n                    delete s.name;\n                }\n            }\n\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    static getIcon(settings, style) {\n        if (settings && settings.icon) {\n            if (settings.icon.startsWith('data:image')) {\n                return (<img alt={settings.name} src={settings.icon} style={style || {}}/>);\n            } else { // may be later some changes for second type\n                return (<img alt={settings.name} src={settings.icon} style={style || {}}/>);\n            }\n        }\n        return null;\n    }\n\n    static getObjectIcon(id, obj) {\n        if (obj && obj.common && obj.common.icon) {\n            let icon = obj.common.icon;\n            if (icon.startsWith('data:image')) {\n                return icon;\n            } else {\n                const parts = id.split('.');\n                if (parts[0] === 'system') {\n                    icon = 'adapter/' + parts[2] + icon;\n                } else {\n                    icon = 'adapter/' + parts[0] + icon;\n                }\n\n                if (window.location.pathname.match(/material\\/[.\\d]+/)) {\n                    icon = '../../' + icon;\n                } else\n                if (window.location.pathname.match(/material\\//)) {\n                    icon = '../' + icon;\n                }\n                return icon;\n            }\n        } else {\n            return null;\n        }\n\n    }\n\n    static splitCamelCase(text) {\n        if (false && text !== text.toUpperCase()) {\n            const words = text.split(/\\s+/);\n            for (let i = 0; i < words.length; i++) {\n                let word = words[i];\n                if (word.toLowerCase() !== word && word.toUpperCase() !== word) {\n                    let z = 0;\n                    const ww = [];\n                    let start = 0;\n                    while (z < word.length) {\n                        if (word[z].match(/[A-ZÜÄÖА-Я]/)) {\n                            ww.push(word.substring(start, z));\n                            start = z;\n                        }\n                        z++;\n                    }\n                    if (start !== z) {\n                        ww.push(word.substring(start, z));\n                    }\n                    for (let k = 0; k < ww.length; k++) {\n                        words.splice(i + k, 0, ww[k]);\n                    }\n                    i += ww.length;\n                }\n            }\n\n            return words.map(w => {\n                w = w.trim();\n                if (w) {\n                    return w[0].toUpperCase() + w.substring(1).toLowerCase();\n                }\n                return '';\n            }).join(' ');\n        } else {\n            return Utils.CapitalWords(text);\n        }\n    }\n\n    // https://stackoverflow.com/questions/35969656/how-can-i-generate-the-opposite-color-according-to-current-color\n    static isUseBright(color, defaultValue) {\n        if (color === null || color === undefined || color === '') {\n            return defaultValue === undefined ? true : defaultValue;\n        }\n        color = color.toString();\n        if (color.indexOf('#') === 0) {\n            color = color.slice(1);\n        }\n        let r;\n        let g;\n        let b;\n\n        const rgb = color.match(/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?/i);\n        if (rgb && rgb.length === 4) {\n            r = parseInt(rgb[1], 10);\n            g = parseInt(rgb[2], 10);\n            b = parseInt(rgb[3], 10);\n        } else {\n            // convert 3-digit hex to 6-digits.\n            if (color.length === 3) {\n                color = color[0] + color[0] + color[1] + color[1] + color[2] + color[2];\n            }\n            if (color.length !== 6) {\n                return false;\n            }\n\n            r = parseInt(color.slice(0, 2), 16);\n            g = parseInt(color.slice(2, 4), 16);\n            b = parseInt(color.slice(4, 6), 16);\n        }\n\n\n        // http://stackoverflow.com/a/3943023/112731\n        return (r * 0.299 + g * 0.587 + b * 0.114) <= 186;\n    };\n\n    static getTimeString(seconds) {\n        seconds = parseFloat(seconds);\n        if (isNaN(seconds)) {\n            return '--:--';\n        }\n        const hours = Math.floor(seconds / 3600);\n        let minutes = Math.floor((seconds % 3600) / 60);\n        let secs = seconds % 60;\n        if (hours) {\n            if (minutes < 10) minutes = '0' + minutes;\n            if (secs < 10) secs = '0' + secs;\n            return hours + ':' + minutes + ':' + secs;\n        } else {\n            if (secs < 10) secs = '0' + secs;\n            return minutes + ':' + secs;\n        }\n    }\n\n    static getWindDirection(angle) {\n        if (angle >= 0 && angle < 11.25) {\n            return 'N'\n        } else if (angle >= 11.25 && angle < 33.75) {\n            return 'NNE'\n        } else if (angle >= 33.75 && angle < 56.25) {\n            return 'NE'\n        } else if (angle >= 56.25 && angle < 78.75) {\n            return 'ENE'\n        } else if (angle >= 78.75 && angle < 101.25) {\n            return 'E'\n        } else if (angle >= 101.25 && angle < 123.75) {\n            return 'ESE'\n        } else if (angle >= 123.75 && angle < 146.25) {\n            return 'SE'\n        } else if (angle >= 146.25 && angle < 168.75) {\n            return 'SSE'\n        } else if (angle >= 168.75 && angle < 191.25) {\n            return 'S'\n        } else if (angle >= 191.25 && angle < 213.75) {\n            return 'SSW'\n        } else if (angle >= 213.75 && angle < 236.25) {\n            return 'SW'\n        } else if (angle >= 236.25 && angle < 258.75) {\n            return 'WSW'\n        } else if (angle >= 258.75 && angle < 281.25) {\n            return 'W'\n        } else if (angle >= 281.25 && angle < 303.75) {\n            return 'WNW'\n        } else if (angle >= 303.75 && angle < 326.25) {\n            return 'NW'\n        } else if (angle >= 326.25 && angle < 348.75) {\n            return 'NNW'\n        } else if (angle >= 348.75) {\n            return 'N'\n        }\n    }\n\n    static padding(num) {\n        if (typeof num === 'string') {\n            if (num.length < 2) {\n                return '0' + num;\n            } else {\n                return num;\n            }\n        } else if (num < 10) {\n            return '0' + num;\n        } else {\n            return num;\n        }\n    }\n\n    static setDataFormat(format) {\n        if (format) {\n            Utils.dateFormat = format.toUpperCase().split(/[.-/]/);\n            Utils.dateFormat.splice(Utils.dateFormat.indexOf('YYYY'), 1);\n        }\n    }\n\n    static date2string(now) {\n        if (typeof now === 'string') {\n            now = now.trim();\n            if (!now) return '';\n            // only letters\n            if (now.match(/^[\\w\\s]+$/)) {\n                // Day of week\n                return now;\n            }\n            let m = now.match(/(\\d{1,4})[-./](\\d{1,2})[-./](\\d{1,4})/);\n            if (m) {\n                let a = [parseInt(m[1], 10), parseInt(m[2], 10), parseInt(m[3], 10)];\n                let year = a.find(y => y > 31);\n                a.splice(a.indexOf(year), 1);\n                let day = a.find(m => m > 12);\n                if (day) {\n                    a.splice(a.indexOf(day), 1);\n                    now = new Date(year, a[0] - 1, day);\n                } else {\n                    // MM DD\n                    if (Utils.dateFormat[0][0] === 'M' && Utils.dateFormat[1][0] === 'D') {\n                        now = new Date(year, a[0] - 1, a[1]);\n                        if (Math.abs(now.getTime - Date.now()) > 3600000 * 24 * 10) {\n                            now = new Date(year, a[1] - 1, a[0]);\n                        }\n                    } else\n                    // DD MM\n                    if (Utils.dateFormat[0][0] === 'D' && Utils.dateFormat[1][0] === 'M') {\n                        now = new Date(year, a[1] - 1, a[0]);\n                        if (Math.abs(now.getTime - Date.now()) > 3600000 * 24 * 10) {\n                            now = new Date(year, a[0] - 1, a[1]);\n                        }\n                    } else {\n                        now = new Date(now);\n                    }\n                }\n            } else {\n                now = new Date(now);\n            }\n        } else {\n            now = new Date(now);\n        }\n\n        let date = I18n.t('dow_' + days[now.getDay()]).replace('dow_', '');\n        date += '. ' + now.getDate() + ' ' + I18n.t('month_' + months[now.getMonth()]).replace('month_', '');\n        return date;\n    }\n\n    static renderTextWithA(text) {\n        const m = text.match(/<a .*<\\/a>/);\n        if (m) {\n            let href = m[0].match(/href=\"([^\"]+)\"/) || m[0].match(/href='([^']+)'/);\n            let target = m[0].match(/target=\"([^\"]+)\"/) || m[0].match(/target='([^']+)'/);\n            const title = m[0].match(/>([^<]*)</);\n            const p = text.split(m[0]);\n            return [\n                p[0] ? (<span key=\"a1\">{p[0]}</span>) : null,\n                (<a  key=\"a2\" href={href ? href[1] : ''} target={target ? target[1] : '_blank'}>{title ? title[1] : ''}</a>),\n                p[1] ? (<span key=\"a3\">{p[1]}</span>) : null\n            ];\n        } else {\n            return text;\n        }\n    }\n\n    static getSmartName(states, id, instanceId, noCommon) {\n        if (!id) {\n            if (!noCommon) {\n                if (!states.common) {\n                    return states.smartName;\n                } else {\n                    if (states && !states.common) {\n                        return states.smartName;\n                    } else {\n                        return states.common.smartName;\n                    }\n                }\n            } else {\n                if (states && !states.common) {\n                    return states.smartName;\n                } else {\n                    return (states &&\n                        states.common &&\n                        states.common.custom &&\n                        states.common.custom[instanceId]) ?\n                        states.common.custom[instanceId].smartName : undefined;\n                }\n            }\n        } else\n        if (!noCommon) {\n            return states[id].common.smartName;\n        } else {\n            return (states[id] &&\n                states[id].common &&\n                states[id].common.custom &&\n                states[id].common.custom[instanceId]) ?\n                states[id].common.custom[instanceId].smartName || null : null;\n        }\n    }\n\n    static getSmartNameFromObj(obj, instanceId, noCommon) {\n        if (!noCommon) {\n            if (!obj.common) {\n                return obj.smartName;\n            } else {\n                if (obj && !obj.common) {\n                    return obj.smartName;\n                } else {\n                    return obj.common.smartName;\n                }\n            }\n        } else {\n            if (obj && !obj.common) {\n                return obj.smartName;\n            } else {\n                return (obj &&\n                    obj.common &&\n                    obj.common.custom &&\n                    obj.common.custom[instanceId]) ?\n                    obj.common.custom[instanceId].smartName : undefined;\n            }\n        }\n    }\n\n    static enableSmartName(obj, instanceId, noCommon) {\n        if (noCommon) {\n            obj.common.custom = obj.common.custom || {};\n            obj.common.custom[instanceId] = obj.common.custom[instanceId] || {};\n            obj.common.custom[instanceId].smartName = {};\n        } else {\n            obj.common.smartName = {};\n        }\n    }\n\n    static removeSmartName(obj, instanceId, noCommon) {\n        if (noCommon) {\n            if (obj.common && obj.common.custom && obj.common.custom[instanceId]) {\n                delete obj.common.custom[instanceId];\n            }\n        } else {\n            obj.common.smartName = null;\n        }\n    }\n\n    static updateSmartName(obj, newSmartName, byON, smartType, instanceId, noCommon) {\n        const language = I18n.getLanguage();\n\n        // convert Old format\n        if (typeof obj.common.smartName === 'string') {\n            const nnn = obj.common.smartName;\n            obj.common.smartName = {};\n            obj.common.smartName[language] = nnn;\n        }\n\n        // convert old settings\n        if (obj.native && obj.native.byON) {\n            delete obj.native.byON;\n            let _smartName = obj.common.smartName;\n\n            if (!_smartName || typeof _smartName !== 'object') {\n                _smartName = {en: _smartName};\n                _smartName[language] = _smartName.en;\n            }\n            obj.common.smartName = _smartName;\n        }\n        if (smartType !== undefined) {\n            if (noCommon) {\n                obj.common.custom = obj.common.custom || {};\n                obj.common.custom[instanceId] = obj.common.custom[instanceId] || {};\n                obj.common.custom[instanceId].smartName = obj.common.custom[instanceId].smartName || {};\n                obj.common.custom[instanceId].smartName.smartType = smartType;\n            } else {\n                obj.common.smartName = obj.common.smartName || {};\n                obj.common.smartName.smartType = smartType;\n            }\n        }\n        if (byON !== undefined) {\n            if (noCommon) {\n                obj.common.custom = obj.common.custom || {};\n                obj.common.custom[instanceId] = obj.common.custom[instanceId] || {};\n                obj.common.custom[instanceId].smartName = obj.common.custom[instanceId].smartName || {};\n                obj.common.custom[instanceId].smartName.byON = byON;\n            } else {\n                obj.common.smartName = obj.common.smartName || {};\n                obj.common.smartName.byON = byON;\n            }\n        }\n        if (newSmartName !== undefined) {\n            let smartName;\n            if (noCommon) {\n                obj.common.custom = obj.common.custom || {};\n                obj.common.custom[instanceId] = obj.common.custom[instanceId] || {};\n                obj.common.custom[instanceId].smartName = obj.common.custom[instanceId].smartName || {};\n                smartName = obj.common.custom[instanceId].smartName;\n            } else {\n                obj.common.smartName = obj.common.smartName || {};\n                smartName = obj.common.smartName;\n            }\n            smartName[language] = newSmartName;\n\n            // If smart name deleted\n            if (smartName && (!smartName[language] ||\n                (smartName[language] === obj.common.name &&\n                    (!obj.common.role || obj.common.role.indexOf('button') >= 0)))) {\n                delete smartName[language];\n                let empty = true;\n                // Check if structure has any definitions\n                for (const key in smartName) {\n                    if (smartName.hasOwnProperty(key)) {\n                        empty = false;\n                        break;\n                    }\n                }\n                // If empty => delete smartName completely\n                if (empty) {\n                    if (noCommon) {\n                        if (obj.common.custom[instanceId].smartName.byON === undefined) {\n                            delete obj.common.custom[instanceId];\n                        } else {\n                            delete obj.common.custom[instanceId].en;\n                            delete obj.common.custom[instanceId].de;\n                            delete obj.common.custom[instanceId].ru;\n                            delete obj.common.custom[instanceId].nl;\n                            delete obj.common.custom[instanceId].pl;\n                            delete obj.common.custom[instanceId].it;\n                            delete obj.common.custom[instanceId].fr;\n                            delete obj.common.custom[instanceId].pt;\n                            delete obj.common.custom[instanceId].es;\n                        }\n                    } else {\n                        if (obj.common.smartName.byON !== undefined) {\n                            delete obj.common.smartName.en;\n                            delete obj.common.smartName.de;\n                            delete obj.common.smartName.ru;\n                            delete obj.common.smartName.nl;\n                            delete obj.common.smartName.pl;\n                            delete obj.common.smartName.it;\n                            delete obj.common.smartName.fr;\n                            delete obj.common.smartName.pt;\n                            delete obj.common.smartName.es;\n                        } else {\n                            obj.common.smartName = null;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    static disableSmartName(obj, instanceId, noCommon) {\n        if (noCommon) {\n            obj.common.custom = obj.common.custom || {};\n            obj.common.custom[instanceId] = obj.common.custom[instanceId] || {};\n            obj.common.custom[instanceId].smartName = false;\n        } else {\n            obj.common.smartName = false;\n        }\n    }\n\n    static copyToClipboard(text, e) {\n        const el = window.document.createElement('textarea');\n        el.value = text;\n        window.document.body.appendChild(el);\n        el.select();\n        window.document.execCommand('copy');\n        window.document.body.removeChild(el);\n        console.log(text);\n        e && e.stopPropagation();\n        e && e.preventDefault();\n    }\n}\n\nexport default Utils;","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport Fab from '@material-ui/core/Fab';\nimport PropTypes from 'prop-types';\n\nimport I18n from '../i18n';\n\nimport {MdHelpOutline as IconHelp} from 'react-icons/md';\nimport {FaFileDownload as IconDownload} from 'react-icons/fa';\nimport {FaFileUpload as IconUpload} from 'react-icons/fa';\n\nconst styles = theme => ({\n    buttons: {\n        marginRight: 5,\n        marginTop: 5,\n        float: 'right'\n    },\n    logo: {\n        padding: 8,\n        width: 64\n    }\n});\n\nclass Logo extends Component {\n\n    static generateFile(filename, obj) {\n        const el = window.document.createElement('a');\n        el.setAttribute('href', 'data:application/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(obj, null, 2)));\n        el.setAttribute('download', filename);\n\n        el.style.display = 'none';\n        window.document.body.appendChild(el);\n\n        el.click();\n\n        window.document.body.removeChild(el);\n    }\n\n    handleFileSelect(evt) {\n        const f = evt.target.files[0];\n        if (f) {\n            const r = new window.FileReader();\n            r.onload = e => {\n                const contents = e.target.result;\n                try {\n                    const json = JSON.parse(contents);\n                    if (json.native && json.common) {\n                        if (json.common.name !== this.props.common.name) {\n                            this.props.onError(I18n.t('otherConfig', json.common.name));\n                        } else {\n                            this.props.onLoad(json.native);\n                        }\n                    } else {\n                        this.props.onError(I18n.t('invalidConfig'));\n                    }\n                } catch (e) {\n                    this.props.onError(e.toString());\n                }\n            };\n            r.readAsText(f);\n        } else {\n            alert('Failed to open JSON File');\n        }\n    }\n\n    download() {\n        const result = {\n            _id: 'system.adapter.' + this.props.common.name + '.' + this.props.instance,\n            common: JSON.parse(JSON.stringify(this.props.common)),\n            native: this.props.native\n        };\n        // remove unimportant information\n        if (result.common.news) {\n            delete result.common.news;\n        }\n        if (result.common.titleLang) {\n            delete result.common.titleLang;\n        }\n        if (result.common.desc) {\n            delete result.common.desc;\n        }\n\n        //window.open('data:application/iobroker; content-disposition=attachment; filename=' + result._id + '.json,' + JSON.stringify(result, null, 2));\n        Logo.generateFile(result._id + '.json', result);\n    }\n\n    upload() {\n        const input = window.document.createElement('input');\n        input.setAttribute('type', 'file');\n        input.setAttribute('id', 'files');\n        input.setAttribute('opacity', 0);\n        input.addEventListener('change', e => this.handleFileSelect(e, () => {}), false);\n        (input.click)();\n    }\n\n    render() {\n        return (<div>\n            {this.props.common.icon && (<img src={this.props.common.icon} className={this.props.classes.logo} alt=\"logo\"/>)}\n            {this.props.common.readme &&\n                (<Fab size=\"small\" color=\"primary\" aria-label=\"Help\" className={this.props.classes.buttons} onClick={() => {\n                    const win = window.open(this.props.common.readme, '_blank');\n                    win.focus();\n                }}><IconHelp /></Fab>)}\n            <Fab size=\"small\" color=\"primary\" aria-label=\"Load config\" className={this.props.classes.buttons} title={I18n.t('Load configuration from file')} onClick={() => this.upload()}><IconUpload /></Fab>\n            <Fab size=\"small\" color=\"primary\" aria-label=\"Save config\" className={this.props.classes.buttons} title={I18n.t('Save configuration to file')} onClick={() => this.download()}><IconDownload /></Fab>\n        </div>);\n    }\n}\n\nLogo.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n};\n\nexport default withStyles(styles)(Logo);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport I18n from '../i18n';\n\nclass DialogMessage extends React.Component {\n\n    handleOk = () => {\n        this.props.onClose && this.props.onClose();\n    };\n\n    render() {\n        return (\n            <Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"message-dialog-title\"\n                aria-describedby=\"message-dialog-description\"\n            >\n                <DialogTitle id=\"message-dialog-title\">{this.props.title || I18n.t('Message')}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText id=\"message-dialog-description\">\n                        {this.props.text}\n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.handleOk()} color=\"primary\" autoFocus>{I18n.t('Close')}</Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nDialogMessage.propTypes = {\n    onClose: PropTypes.func,\n    title: PropTypes.string,\n    text: PropTypes.string,\n    icon: PropTypes.object\n};\n\nexport default DialogMessage;\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Utils from '../Components/Utils'\n\nimport {MdRefresh as IconReload} from 'react-icons/md';\nimport {MdClose as IconClose} from 'react-icons/md';\n\nimport I18n from '../i18n';\nimport Logo from './Logo';\nimport Message from '../Dialogs/Message';\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        minHeight: '100%'\n    },\n    input: {\n        minWidth: 300\n    },\n    button: {\n        marginRight: 20,\n    },\n    card: {\n        maxWidth: 345,\n        textAlign: 'center'\n    },\n    media: {\n        height: 180,\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20\n    },\n    columnLogo: {\n        width: 350,\n        marginRight: 0\n    },\n    columnSettings: {\n        width: 'calc(100% - 370px)',\n    }\n});\n\nclass Options extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            inAction: false,\n            forceUserCreate: false,\n            showHint: false,\n            toast: '',\n            isInstanceAlive: false,\n        };\n\n        this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`).then(obj =>\n            this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state =>\n                this.setState({isInstanceAlive: obj && obj.common && obj.common.enabled && state && state.val})));\n\n    }\n\n    renderInput(title, attr, type) {\n        return (<TextField\n            label={I18n.t(title)}\n            className={this.props.classes.input}\n            value={this.props.native[attr]}\n            type={type || 'text'}\n            onChange={e => this.props.onChange(attr, e.target.value)}\n            margin=\"normal\"\n        />);\n    }\n\n    renderCard() {\n        return (<Card className={this.props.classes.card}>\n            <CardActionArea>\n                <CardMedia\n                    className={this.props.classes.media}\n                    image=\"alexalogo.png\"\n                    title=\"Alexa logo\"\n                />\n                <CardContent>{Utils.renderTextWithA(I18n.t('amazon link'))}</CardContent>\n            </CardActionArea>\n            <CardActions style={{textAlign: 'center'}} >\n                <Button size=\"small\" color=\"primary\" style={{textAlign: 'center'}} onClick={() => {\n                    const win = window.open('http://alexa.amazon.de/spa/index.html#skills/dp/B07L66BFF9/reviews', '_blank');\n                    win.focus();\n                }}>{I18n.t('Review')}</Button>\n            </CardActions>\n        </Card>);\n    }\n\n    resetCerts() {\n        this.setState({inAction: true});\n        this.props.socket.setState('iot.' + this.props.instance + '.certs.private', {val: '', ack: true})\n            .then(() => this.props.socket.setState('iot.' + this.props.instance + '.certs.id', {val: '', ack: true}))\n            .then(() => this.props.socket.setState('iot.' + this.props.instance + '.certs.public', {val: '', ack: true}))\n            .then(() => this.props.socket.setState('iot.' + this.props.instance + '.certs.certificate', {val: '', ack: true}))\n            .then(() => {\n                if (this.state.forceUserCreate) {\n                    return this.props.socket.setState('iot.' + this.props.instance + '.certs.forceUserCreate', {val: true, ack: true});\n                } else {\n                    return Promise.resolve();\n                }\n            })\n            // read actual instance object\n            .then(() => this.props.socket.getObject('system.adapter.iot.' + this.props.instance))\n            .then(obj => {\n                if (!obj || !obj.common || !obj.common.enabled) {\n                    // adapter is disabled, do not restart it\n                    return Promise.resolve();\n                } else {\n                    // restart adapter\n                    return this.props.socket.setObject('system.adapter.iot.' + this.props.instance, obj);\n                }\n            })\n            .then(() => this.setState({toast: I18n.t('Certificates will be updated after start')}))\n            .catch(err => this.props.onError(err))\n            .then(() => this.setState({inAction: false}));\n    }\n\n    onForceUserCreate() {\n        this.setState({forceUserCreate: !this.state.forceUserCreate, showHint: !this.state.forceUserCreate});\n    }\n\n    renderToast() {\n        if (!this.state.toast) return null;\n        return (\n            <Snackbar\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'left',\n                }}\n                open={true}\n                autoHideDuration={6000}\n                onClose={() => this.setState({toast: ''})}\n                ContentProps={{\n                    'aria-describedby': 'message-id',\n                }}\n                message={<span id=\"message-id\">{this.state.toast}</span>}\n                action={[\n                    <IconButton\n                        key=\"close\"\n                        aria-label=\"Close\"\n                        color=\"inherit\"\n                        className={this.props.classes.close}\n                        onClick={() => this.setState({toast: ''})}\n                    >\n                        <IconClose />\n                    </IconButton>,\n                ]}\n            />);\n    }\n\n    renderHint() {\n        if (this.state.showHint) {\n            return (<Message text={I18n.t('Click now Get new connection certificates to request new temporary password')} onClose={() => this.setState({showHint: false})}/>);\n        } else {\n            return null;\n        }\n    }\n\n    renderCheckbox(title, attr, style) {\n        return (<FormControlLabel key={attr} style={Object.assign({paddingTop: 5}, style)} className={this.props.classes.controlElement}\n                                  control={\n                                      <Checkbox\n                                          checked={this.props.native[attr]}\n                                          onChange={() => this.props.onChange(attr, !this.props.native[attr])}\n                                          color=\"primary\"\n                                      />\n                                  }\n                                  label={I18n.t(title)}\n        />);\n    }\n\n    render() {\n        return (\n            <form className={this.props.classes.tab}>\n                <Logo\n                    instance={this.props.instance}\n                    common={this.props.common}\n                    native={this.props.native}\n                    onError={text => this.setState({errorText: text})}\n                    onLoad={this.props.onLoad}\n                />\n                <div className={this.props.classes.column + ' ' + this.props.classes.columnSettings}>\n                    {this.renderInput('ioBroker.pro Login', 'login')}<br/>\n                    {this.renderInput('ioBroker.pro Password', 'pass', 'password')}<br/>\n                    {this.renderCheckbox('Amazon Alexa', 'amazonAlexa', {marginTop: 10})}<br/>\n                    {this.renderCheckbox('Google Home', 'googleHome', {marginTop: 10})}<br/>\n                    {this.renderCheckbox('Yandex Алиса', 'yandexAlisa', {marginTop: 10})}<br/>\n                    <br/>\n                    <Button variant=\"outlined\"\n                            className={this.props.classes.button}\n                            disabled={this.state.inAction || !this.state.isInstanceAlive}\n                            title={!this.state.isInstanceAlive ? I18n.t('Instance must be enabled') : ''}\n                            onClick={() => this.resetCerts()}>\n                        <IconReload/>{I18n.t('Get new connection certificates')}\n                    </Button>\n                    <FormControlLabel\n                        control={\n                            <Checkbox\n                                checked={this.state.forceUserCreate}\n                                onChange={() => this.onForceUserCreate()}\n                                color=\"primary\"\n                            />\n                        }\n                        label={I18n.t('Request email with password one more time')}\n                    />\n                    <p style={{fontWeight: 'bold'}}>{Utils.renderTextWithA(I18n.t('help_tip'))}</p>\n                </div>\n                <div className={this.props.classes.column + ' ' + this.props.classes.columnLogo}>{this.renderCard()}</div>\n                {this.renderHint()}\n                {this.renderToast()}\n            </form>\n        );\n    }\n}\n\nOptions.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    adapterName: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Options);\n","// @flow\nimport { Component } from 'react';\nimport type { Node } from 'react';\n\nimport type { RowMetadata } from '../model/row';\n\n\ntype Props = {\n  grow?: number,\n  basis?: string, // <length> | auto\n  width?: string, // <length> | auto\n\n  renderCell: (rowData: any, rowMetadata: RowMetadata, toggleChildren: () => void) => Node,\n  className?: string,\n};\n\ntype State = { };\n\nexport default class Column extends Component<Props, State> {\n\n  render() { return null; }\n}\n","// @flow\nimport React, { Component } from 'react';\nimport type { Node } from 'react';\n\nimport type { RowMetadata } from '../model/row';\n\n\ntype Props = {\n  //grow?: number,\n  //basis?: string, // <length> | auto\n  width: string,  // <length> | auto\n\n  rowData: any,\n  rowMetadata: RowMetadata,\n  toggle: () => void,\n  renderCell: (rowData: any, rowMetadata: RowMetadata, toggleChildren: () => void) => Node,\n  className?: string,\n  classNameColumn?: string,\n};\n\ntype State = {\n  width: string\n  //_grow: number,\n  //_basis: string,\n};\n\nexport default class ColumnWrapper extends Component<Props, State> {\n  state = {\n    //_grow: 1,\n    //_basis: 'auto',\n      width: 'auto'\n  };\n\n  render() {\n    const { width, rowData, toggle, rowMetadata, renderCell, className, classNameColumn} = this.props;\n    const { _width } = this.state;\n\n    //const flexGrow = (grow != null) ? grow : _grow;\n    //const flexBasis = (basis != null) ? basis : _basis;\n    const cWidth = (width != null) ? width : _width;\n\n    const baseClass = (className ? `cp_tree-table_column ${className || ''}`: 'cp_tree-table_column') + ' ' + (classNameColumn || '');\n    return (\n      <div className={baseClass}\n        style={{ ...STYLE_COLUMN, width: cWidth/*flexGrow: flexGrow, flexBasis: flexBasis */}}>\n        { renderCell(rowData, rowMetadata, toggle) }\n      </div>\n    );\n  }\n}\n\nconst STYLE_COLUMN = {\n  boxSizing: 'border-box',\n  position: 'relative',\n  overflow: 'hidden',\n};\n","// @flow\nimport React, { Component, Children } from 'react';\nimport type { ChildrenArray, Element } from 'react';\n\nimport Column from './Column';\nimport ColumnWrapper from './ColumnWrapper';\n\n\ntype Props = {\n  row: any,\n  columns: ChildrenArray<Element<typeof Column>>,\n\n  hasVisibleChildren: boolean, // Metadata\n  classNamePartlyVisible?: string,\n  classNameColumn?: string,\n  classNameSelected?: string,\n  classNameRow?: string,\n  index: number,\n  selected?: string,\n  onToggle: () => void,\n  onRowClick: (data: object) => void,\n};\n\ntype State = {\n  overscanHeight: number,\n  height: number,\n  topOffset: number,\n};\n\nexport default class VirtualListRow extends Component<Props, State> {\n\n  state = {\n    overscanHeight: 100,\n    height: 0,\n    topOffset: 0,\n  };\n\n  render() {\n    const { row, hasVisibleChildren, index, onToggle, columns, classNameRow, classNameColumn, selected, classNameSelected } = this.props;\n\n    const metadata = { ...row.getMetadata(), hasVisibleChildren: hasVisibleChildren };\n\n    const style = {...STYLE_ROW, height: row.getHeight() + 'px'};\n\n    return (\n      <div className={'cp_tree-table_row ' + (classNameRow || '') + (selected === row.data.id ? ' ' + classNameSelected : '')}\n        style={style}\n        data-rindex={index}\n        onClick={() => this.props.onRowClick && this.props.onRowClick(row.data, metadata, onToggle)}\n        onDoubleClick={() => this.props.onRowClick && this.props.onRowClick(row.data, metadata, onToggle, true)}\n        data-depth={row.depth} >\n      \n        {Children.toArray(columns).map((column, index) => {\n          return (\n            <ColumnWrapper key={index}\n              {...column.props}\n              classNameColumn={classNameColumn}\n              rowData={row.data}\n              toggle={onToggle}\n              rowMetadata={metadata}/>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nconst STYLE_ROW = {\n  // display: 'flex',\n\n  boxSizing: 'border-box',\n  position: 'relative',\n  overflow: 'hidden',\n  width: '100%',\n};\n","// @flow\nimport BTLeaf from './bt_leaf';\n\n\nexport type TreeDataRow = {\n  data: any,\n  height?: number,\n  children?: Array<TreeDataRow>,\n};\n\nexport type RowMetadata = {\n  depth: number;\n  hasChildren: boolean;\n  hasVisibleChildren: boolean;\n};\n\nexport type PartialRowMetadata = {\n  depth: number;\n  hasChildren: boolean;\n};\n\nexport default class Row {\n  parent: ?BTLeaf = null;\n  depth: number;      // tree depth\n  data: any;          // row data\n\n  _hasChildren: boolean;\n\n  _height: number = 26;    // height in px (26px - fallback value)\n  _cacheHeight: number = 26;\n\n  constructor(data: any, hasChildren: boolean, depth: number = 0, isVisible: boolean, height: ?number) {\n    this.data = data;\n    this.depth = depth;\n    this._hasChildren = hasChildren;\n\n    if (height != null) {\n      this._height = height;\n      this._cacheHeight = height;\n    }\n\n    if (!isVisible) {\n      this._height = 0;\n    }\n  }\n\n  setHeight(value: number) {\n    this._updateHeight(value);\n    if (value > 0) {\n      this._cacheHeight = value;\n    }\n  }\n\n  getHeight(): number {\n    return this._height;\n  }\n\n  isVisible(): boolean {\n    return this._height > 0;\n  }\n\n  getMetadata(): PartialRowMetadata {\n    return {\n      depth: this.depth,\n      hasChildren: this._hasChildren,\n    };\n  }\n\n  toggle(): void {\n    if (this._height > 0) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n\n  hide(): void {\n    this._cacheHeight = this._height;\n    this._updateHeight(0);\n  }\n\n  show(): void {\n    this._updateHeight(this._cacheHeight);\n  }\n\n  _updateHeight(value: number) {\n    let diff = value - this._height;\n    if (diff) {\n      for (let n = this; n; n = n.parent) {\n        n._height += diff;\n      }\n    }\n  }\n}\n","// @flow\nimport Row from '../model/row';\nimport type { TreeDataRow  } from '../model/row';\n\nexport * from './search';\n\n\nexport const processData = (data: Array<TreeDataRow>, rowHeightDefault: ?number = null): Array<Row> => {\n  return processLevel(data, rowHeightDefault, 0, true);\n}\n\nconst processLevel = (data: Array<TreeDataRow>, rowHeightDefault: ?number, depth: number = 0, isVisible: boolean = false): Array<Row> => {\n  let result: Array<Row> = [];\n  for (var i = 0; i < data.length; i++) {\n    const hasChildren: boolean = (data[i].children != null && data[i].children.length > 0);\n\n    result.push(new Row(data[i].data, hasChildren, depth, isVisible, data[i].height || rowHeightDefault));\n\n    if (data[i].children && data[i].children.length > 0) {\n      processLevel(data[i].children, rowHeightDefault, depth + 1).forEach((row) => {\n        result.push(row);\n      });\n    }\n  }\n  return result;\n}\n\nexport const indexOf = (needle: any, haystack: Array<any>): number => {\n  for (var i = 0; i < haystack.length; i++) {\n    if (haystack[i] === needle) {\n      return i;\n    }\n  }\n  return -1;\n}\n\nexport const noop = () => undefined;\n","// @flow\nimport BTLeaf from './bt_leaf';\nimport Row from './row';\nimport { indexOf } from '../util';\n\n\nexport default class BTNode {\n  parent: ?BTNode = null;\n  children: Array<BTNode | BTLeaf> = [];\n\n  _size: number = 0;\n  _height: number = 0;\n\n\n  constructor(children: Array<BTNode | BTLeaf>) {\n    this.children = children;\n\n    let size = 0, height = 0;\n    for (let i = 0; i < children.length; ++i) {\n      let ch = children[i];\n      size += ch.getSize();\n      height += ch.getHeight();\n      ch.parent = this;\n    }\n\n    this._size = size;\n    this._height = height;\n  }\n\n  getSize(): number {\n    return this._size;\n  }\n\n  getHeight(): number {\n    return this._height;\n  }\n\n  // https://github.com/codemirror/CodeMirror/blob/e03ef21df390753eb35ff8426dd99b1be4d29d74/src/model/chunk.js#L79\n  removeInner(at: number, n: number) {\n    this._size -= n;\n    for (let i = 0; i < this.children.length; i++) {\n      let child = this.children[i], sz = child.getSize();\n      if (at < sz) {\n        let rm = Math.min(n, sz - at), oldHeight = child.getHeight();\n        child.removeInner(at, rm);\n        this._height -= oldHeight - child.getHeight();\n        if (sz === rm) {\n          this.children.splice(i--, 1);\n          child.parent = null;\n        }\n        n -= rm;\n        if (n === 0) {\n          break;\n        }\n        at = 0;\n      } else {\n        at -= sz;\n      }\n    }\n    // If the result is smaller than 25 rows, ensure that it is a\n    // single leaf node.\n    if (this.getSize() - n < 25 &&\n       (this.children.length > 1 || !(this.children[0] instanceof BTLeaf))) {\n      let rows = [];\n      this.collapse(rows);\n      this.children = [new BTLeaf(rows)];\n      this.children[0].parent = this;\n    }\n  }\n\n  collapse(rows: Array<Row>) {\n    for (let i = 0; i < this.children.length; i++) {\n      this.children[i].collapse(rows);\n    }\n  }\n\n  // https://github.com/codemirror/CodeMirror/blob/e03ef21df390753eb35ff8426dd99b1be4d29d74/src/model/chunk.js#L107\n  insertInner(at: number, rows: Array<Row>, height: number) {\n    this._size += rows.length;\n    this._height += height;\n\n    for (let i = 0; i < this.children.length; i++) {\n      let child = this.children[i], sz = child.getSize();\n      if (at <= sz) {\n        child.insertInner(at, rows, height);\n        if (child instanceof BTLeaf && child.getSize() > 50) {\n          // To avoid memory thrashing when child.rows is huge (e.g. first view of a large file), it's never spliced.\n          // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n          let remaining = child.getSize() % 25 + 25;\n          for (let pos = remaining; pos < child.getSize();) {\n            let leaf = new BTLeaf(child.rows.slice(pos, pos += 25));\n            child._height -= leaf.getHeight();\n            this.children.splice(++i, 0, leaf);\n            leaf.parent = this;\n          }\n          child.rows = child.rows.slice(0, remaining);\n          this.maybeSpill();\n        }\n        break;\n      }\n      at -= sz;\n    }\n  }\n\n  // When a node has grown, check whether it should be split.\n  maybeSpill() {\n    if (this.children.length <= 10) {\n      return;\n    }\n    let me: BTNode = this;\n    do {\n      let spilled = me.children.splice(me.children.length - 5, 5);\n      let sibling = new BTNode(spilled);\n      if (!me.parent) { // Become the parent node\n        let copy = new BTNode(me.children);\n        copy.parent = me;\n        me.children = [copy, sibling];\n        me = copy;\n     } else {\n        me._size -= sibling.getSize();\n        me._height -= sibling.getHeight();\n\n        let parent: ?BTNode = me.parent;\n        if (parent && parent.children) {\n          let myIndex = indexOf(me, parent.children);\n          parent.children.splice(myIndex + 1, 0, sibling);\n        }\n      }\n      sibling.parent = me.parent;\n    } while (me.children.length > 10)\n    if (me.parent) {\n      me.parent.maybeSpill();\n    }\n  }\n\n  mapRange(at: number, n: number, op: (data: Row) => ?boolean): ?boolean {\n    for (let i = 0; i < this.children.length; i++) {\n      let child = this.children[i], sz = child.getSize();\n      if (at < sz) {\n        let used = Math.min(n, sz - at);\n        if (child.mapRange(at, used, op)) {\n          return true;\n        }\n        n -= used;\n        if (n === 0) {\n          break;\n        }\n        at = 0;\n      } else {\n        at -= sz;\n      }\n    }\n  }\n\n  mapAll(op: (data: Row) => ?boolean): ?boolean {\n    return this.mapRange(0, this._size, op);\n  }\n}\n","// @flow\nimport BTNode from './bt_node';\nimport Row from './row';\n\n\nexport default class BTLeaf {\n  parent: ?BTNode = null;\n  rows: Array<Row> = [];\n\n  _height: number = 0;\n\n  constructor(rows: Array<Row> = []) {\n    this.rows = rows;\n\n    let height = 0;\n    for (let i = 0; i < rows.length; ++i) {\n      rows[i].parent = this;\n      height += rows[i].getHeight();\n    }\n    this._height = height;\n  }\n\n  getSize(): number {\n    return this.rows.length;\n  }\n\n  getHeight(): number {\n    return this._height;\n  }\n\n  // Remove n rows at offset 'at'.\n  removeInner(at: number, n: number) {\n    for (let i = at, e = at + n; i < e; ++i) {\n      let row = this.rows[i];\n      this._height -= row.getHeight();\n\n      row.parent = null;\n    }\n    this.rows.splice(at, n);\n  }\n\n  collapse(rows: Array<Row>) {\n    rows.push.apply(rows, this.rows)\n  }\n\n  // Insert the given array of rows at offset 'at', count them as\n  // having the given height.\n  insertInner(at: number, rows: Array<Row>, height: number) {\n    this._height += height\n    this.rows = this.rows.slice(0, at).concat(rows).concat(this.rows.slice(at))\n    for (let i = 0; i < rows.length; ++i) {\n      rows[i].parent = this;\n    }\n  }\n\n  mapRange(at: number, n: number, op: (data: Row) => ?boolean): ?boolean {\n    for (let e = at + n; at < e; ++at) {\n      if (op(this.rows[at])) {\n        return true;\n      }\n    }\n  }\n}\n","// @flow\nimport BTLeaf from './bt_leaf';\nimport BTNode from './bt_node';\nimport Row from './row';\nimport { indexOf } from '../util';\n\n\nexport default class BTRoot extends BTNode {\n  constructor(data: Array<Row> = []) {\n    super([new BTLeaf([])]);\n\n    this.insert(0, data);\n  }\n\n  insert(at: number, rows: Array<Row>) {\n    let height = 0\n    for (let i = 0; i < rows.length; ++i) {\n      height += rows[i].getHeight();\n    }\n    super.insertInner(at, rows, height);\n  }\n\n  remove(at: number, n: number) {\n    super.removeInner(at, n);\n  }\n\n  getRow(index: number): Row {\n    if (index < 0 || index >= this.getSize()) {\n      throw new Error('Invalid index! No row at index: ' + index);\n    }\n    let node = this;\n    while (node instanceof BTNode) {\n      for (let i = 0;; i++) {\n        let child = node.children[i], sz = child.getSize();\n        if (index < sz) {\n          node = child;\n          break;\n        }\n        index -= sz;\n      }\n    }\n    return node.rows[index];\n  }\n\n  getRowIndex(row: Row): number {\n    if (row.parent == null) {\n      throw new Error('Invalid row object! No parent node: (row.parent == null)');\n    }\n    let cur = row.parent, index = indexOf(row, cur.rows);\n    for (let chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (let i = 0;; i++) {\n        if (chunk.children[i] === cur) {\n          break;\n        }\n        index += chunk.children[i].getSize();\n      }\n    }\n    return index;\n  }\n\n  getIndexAtY(y: number): number {\n    if (y < 0 || y > this.getHeight()) {\n      throw new Error('Invalid y position! No row at y: ' + y);\n    }\n\n    let n = 0, height = y;\n    let node = this;\n    do {\n      let ch = 0;\n      for (let i = 0; i < node.children.length; i++) {\n        let child = node.children[i];\n        ch = child.getHeight();\n        if (height < ch) {\n          node = child;\n          break;\n        }\n        height -= ch;\n        n += child.getSize();\n      }\n      if (height >= ch) {\n        return n;\n      }\n    } while (!node.rows);\n\n    let i = 0;\n    if (node instanceof BTLeaf) {\n      for (; i < node.getSize(); i++) {\n        let row = node.rows[i], rHeight = row.getHeight();\n        if (height < rHeight) {\n          break;\n        }\n        height -= rHeight;\n      }\n    }\n    return n + i;\n  }\n  \n  getYAtIndex(index: number): number {\n    let row = this.getRow(index);\n    if (row.parent == null) {\n      throw new Error('Invalid row object! No parent node: (row.parent == null)');\n    }\n\n    let height = 0, chunk = row.parent;\n    for (let i = 0; i < chunk.rows.length; i++) {\n      let rowObj = chunk.rows[i];\n      if (rowObj === row) {\n        break;\n      } else {\n        height += rowObj.getHeight();\n      }\n    }\n    for (let p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (let i = 0; i < p.children.length; i++) {\n        let cur = p.children[i];\n        if (cur === chunk) {\n          break\n        } else {\n          height += cur.getHeight();\n        }\n      }\n    }\n    return height;\n  }\n}\n","// @flow\nimport React, { Component } from 'react';\nimport type { ChildrenArray, Element } from 'react';\n\nimport Column from './Column';\nimport VirtualListRow from './VirtualListRow';\n\nimport BTRoot from '../model/bt_root';\nimport Row from '../model/row';\n\n\ntype Props = {\n  root: BTRoot,\n  columns: ChildrenArray<Element<typeof Column>>,\n\n  height: number,\n  onToggle: (row: Row) => void,\n  onRowClick: (data: object) => void,\n  onScroll: (scrollTop: number) => void,\n  className?: string,\n  classNamePartlyVisible?: string,\n  classNameColumn?: string,\n  classNameMover?: string,\n  classNameRow?: string,\n  classNameInner?: string,\n  selected?: string,\n  classNameSelected?: string,\n};\n\ntype State = {\n  overscanHeight: number,\n  height: number,\n  topOffset: number,\n};\n\ntype RowData = {\n  row: Row,\n  hasVisibleChildren: boolean,\n};\n\nexport default class VirtualList extends Component<Props, State> {\n\n  state = {\n    overscanHeight: 100,\n    height: 0,\n    topOffset: 0,\n  };\n\n  container: ?HTMLElement;\n\n  componentDidUpdate() {\n    this._setHeight();\n  }\n\n  componentDidMount() {\n    this._setHeight();\n    window.addEventListener(\"resize\", this._setHeight);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this._setHeight);\n  }\n\n  render() {\n    const { root, columns, onToggle, className, classNameColumn, onRowClick, classNamePartlyVisible, classNameMover, classNameRow, selected, classNameSelected, classNameInner} = this.props;\n    const { overscanHeight, height, topOffset } = this.state;\n\n    const startYMax = Math.max(0, root.getHeight() - height - (overscanHeight * 2));\n    const startY = Math.min(startYMax, Math.max(0, topOffset - overscanHeight));\n    let startIndex = root.getIndexAtY(startY);\n\n    const endY = Math.min(root.getHeight(), topOffset + height + overscanHeight);\n    let endIndex = root.getIndexAtY(endY);\n\n    const contentTopOffset =  root.getYAtIndex(startIndex);\n\n    let visibleRowsData: Array<RowData> = [], lastVisibleRowIndex;\n    root.mapRange(startIndex, endIndex - startIndex, (row: Row) => {\n      if (row.isVisible()) {\n        if (lastVisibleRowIndex != null && !visibleRowsData[lastVisibleRowIndex].hasVisibleChildren) {\n          const data = visibleRowsData[lastVisibleRowIndex];\n          \n          if (data != null && data.row.depth === row.depth - 1 && !data.hasVisibleChildren) {\n            visibleRowsData[lastVisibleRowIndex].hasVisibleChildren = true;\n          }\n        }\n\n        lastVisibleRowIndex = visibleRowsData.length;\n        visibleRowsData.push({\n          row: row,\n          hasVisibleChildren: false,\n        });\n      }\n    });\n\n    let visibleRows = [];\n    let relativeIndex = 0;\n    visibleRowsData.forEach((data: RowData) => {\n        (data.row.data.visible === undefined || data.row.data.visible || data.row.data.hasVisibleChildren) && visibleRows.push(\n        <VirtualListRow\n          row={data.row}\n          columns={columns}\n          selected={selected}\n          onRowClick={onRowClick}\n          classNameSelected={classNameSelected}\n          classNameColumn={classNameColumn}\n          classNameRow={classNameRow + (!data.row.data.visible && classNamePartlyVisible && data.row.data.hasVisibleChildren ? ' ' + classNamePartlyVisible : '')}\n          hasVisibleChildren={data.hasVisibleChildren}\n          index={relativeIndex}\n          key={relativeIndex++}\n          onToggle={() => onToggle(data.row)}/>\n      );\n    });\n\n    return (\n      <div className={className}\n        style={{ ...STYLE_LIST, height: this.props.height + 'px', }}\n        ref={elem => {this.container = elem}}\n        onScroll={this._handleScroll}>\n\n        <div style={{ ...STYLE_WRAPPER, height: (root.getHeight()) + 'px', }} className={classNameInner || ''}>\n          <div style={{ ...STYLE_CONTENT, top: (contentTopOffset) + 'px' }}\n            className={'cp_tree-table_mover ' + (classNameMover || '')}>\n            {visibleRows}\n          </div>\n        </div>\n\n      </div>\n    );\n  }\n\n  scrollTop(posY: number = 0) {\n    if (this.container) {\n      this.container.parentNode.scrollTop = posY;\n    }\n  }\n\n  // virtual scroll\n  _handleScroll = () => {\n    const { onScroll } = this.props;\n\n    if (this.container) {\n      const { scrollTop } = this.container;\n\n      onScroll(scrollTop);\n\n      this.setState({\n        topOffset: scrollTop\n      });\n    }\n  };\n\n  // virtual scroll\n  _setHeight = () => {\n    const { height } = this.state;\n    \n    if (this.container) {\n      const { offsetHeight } = this.container;\n\n      if (height !== offsetHeight) {\n        this.setState({\n          height: offsetHeight\n        });\n      }\n    }\n  };\n}\n\nconst STYLE_LIST = {\n  overflow: 'auto',\n  WebkitOverflowScrolling: 'touch',\n};\n\nconst STYLE_WRAPPER = {\n  position: 'relative',\n  overflow: 'hidden',\n  width: '100%',\n  minHeight: '100%',\n};\n\nconst STYLE_CONTENT = {\n  position: 'absolute',\n  overflow: 'visible',\n  height: '100%',\n  width: '100%',\n  top: '0',\n  left: '0',\n};\n","// @flow\nimport React, { Component } from 'react';\nimport type { ChildrenArray, Element } from 'react';\n\nimport Column from './Column';\nimport VirtualList from './VirtualList';\n\nimport BTRoot from '../model/bt_root';\nimport Row from '../model/row';\nimport type { TreeDataRow  } from '../model/row';\n\nimport { processData, noop, findNodeData } from '../util';\n\n\ntype TreeChange = {\n  root: BTRoot,\n  hasChange: boolean,\n};\n\ntype Props = {\n  data: Array<TreeDataRow>,\n  children: ChildrenArray<Element<typeof Column>>,\n  classNameColumn?: string,\n  classNamePartlyVisible?: string,\n  classNameMover?: string,\n  classNameInner?: string,\n  classNameRow?: string,\n  selected?: string,\n  classNameSelected?: string,\n  selected?: string,\n  height?: number,\n  rowHeight?: number,\n  onScroll?: (scrollTop: number) => void,\n  onRowClick?: (data: object) => void,\n  className?: string,\n};\n\ntype State = {\n  root: BTRoot,\n};\n\nexport default class TreeDataTable extends Component<Props, State> {\n  static Column = Column;\n\n  virtualList: ?VirtualList;\n\n  constructor(props: Props) {\n    super(props);\n    const { rowHeight } = props;\n    this.depth = 0;\n    this.state = {\n      root: new BTRoot(processData(this.props.data, rowHeight)),\n    };\n  }\n\n  render() {\n    const { height, children, onScroll, className, classNameRow, classNamePartlyVisible, classNameColumn, classNameMover, classNameInner, selected, classNameSelected } = this.props;\n    \n    const baseClass = className ? `cp_tree-table ${className}`: 'cp_tree-table';\n    return (\n      <VirtualList className={baseClass}\n                   classNameSelected={classNameSelected}\n                   selected={selected}\n                   classNameRow={classNameRow}\n                   classNamePartlyVisible={classNamePartlyVisible}\n                   classNameColumn={classNameColumn}\n                   classNameMover={classNameMover}\n                   onRowClick={this.props.onRowClick}\n                   classNameInner={classNameInner}\n        ref={elem => {this.virtualList = elem}}\n\n        columns={children}\n\n        height={height || 200}\n        root={this.state.root}\n        \n        onScroll={onScroll || noop}\n        onToggle={(row) => this._handleOnToggle(row)}/>\n    );\n  }\n\n  // Public API\n  scrollIntoView(node: TreeDataRow, expandAncestors: boolean = true) {\n    const { root } = this.state;\n\n    const row = node && findNodeData(root, node);\n    if (row) {\n      const rowIndex = root.getRowIndex(row);\n      if (expandAncestors && !row.isVisible()) {\n        let ancestors: Array<Row> = [];\n        for (let currentRowIndex = Math.max(rowIndex - 1, 0), previousDepth = row.depth; currentRowIndex >= 0; currentRowIndex--) {\n          const currentRow = root.getRow(currentRowIndex);\n          \n          if (currentRow.depth === previousDepth - 1) {  // Parent\n            ancestors.push(currentRow);\n            previousDepth = currentRow.depth;\n\n            if (currentRow.isVisible()) { // From here up, all the ancestors are visible\n              break;\n            }\n          }\n\n          if (currentRow.depth === 0) {\n            break;\n          }\n        }\n\n        // Batch changes\n        let currentRoot = root;\n        let hasChange: boolean = false;\n        for (let i = 0; i < ancestors.length; i++) {\n          const currentRow = ancestors[i];\n          const delta = this._toggleRow(currentRoot, currentRow);\n\n          if (!hasChange) {\n            hasChange = delta.hasChange;\n          }\n        }\n\n        if (hasChange) {\n          this.setState({ root: currentRoot }, () => {\n            const posY = root.getYAtIndex(rowIndex);\n            this.scrollTo(posY);\n          });\n        }\n      } else {\n        const posY = root.getYAtIndex(rowIndex);\n        this.scrollTo(posY);\n      }\n    }\n  }\n\n  // Public API\n  scrollTo(posY: number) {\n    if (this.virtualList) {\n      this.virtualList.scrollTop(posY);\n    }\n  }\n\n  // Makes rows in the given range that don't represent root nodes (row.depth == 0) visible\n  _showRowsInRange(from?: number, to?: number) {\n    const { root } = this.state;\n\n    let _from = (from != null) ? from : 0;\n    let _to = (to != null) ? to : root.getSize();\n\n    // Validation\n    if (!this._isOpRangeValid(_from, _to)) {\n      return;\n    }\n\n    // Expand op\n    let hasChange: boolean = false;\n    root.mapRange(_from, _to, (row: Row) => {\n      if (row.depth > 0 && !row.isVisible()) {\n        row.show();\n        hasChange = true;\n      }\n    });\n\n    if (hasChange) {\n      this.setState({ root: root });\n    }\n  }\n\n  _walkOne(root: BTRoot, depth: number) {\n    let hasChanged;\n    if (root.rows) {\n        for (let i = 0; i < root.rows.length; i++) {\n          if (root.rows[i].depth <= depth) {\n            if (!root.rows[i].isVisible()) {\n              hasChanged = true;\n              root.rows[i].show();\n            }\n          } else if (root.rows[i].isVisible()) {\n              hasChanged = true;\n              root.rows[i].hide();\n          }\n        }\n    } else if (root.children) {\n        for (let i = 0; i < root.children.length; i++) {\n            const changed = this._walkOne(root.children[i], depth);\n            if (changed) {\n                hasChanged = true;\n            }\n        }\n    }\n    return hasChanged;\n  }\n\n  // Public API\n  expandAll(expandOrCollapse?: boolean) { // _showRowsInRange alias with the default arguments\n    if (expandOrCollapse === undefined) {\n        this._showRowsInRange();\n    } else {\n      if (expandOrCollapse === true || expandOrCollapse === false) {\n          this.depth = expandOrCollapse ? this.depth + 1 : this.depth - 1;\n      } else {\n          this.depth = expandOrCollapse;\n      }\n      if (this.depth < 0) {\n          this.depth = 0;\n      }\n        if (this._walkOne(this.state.root, this.depth)) {\n            this.setState({root: this.state.root});\n        }\n    }\n  }\n\n  // Hides rows in the given range that don't represent root nodes (row.depth == 0)\n  _hideRowsInRange(from?: number, to?: number) {\n    const { root } = this.state;\n\n    let _from = (from != null) ? from : 0;\n    let _to = (to != null) ? to : root.getSize();\n\n    // Validation\n    if (!this._isOpRangeValid(_from, _to)) {\n      return;\n    }\n\n    // Expand op\n    let hasChange: boolean = false;\n    root.mapRange(_from, _to, (row: Row) => {\n      if (row.depth > 0 && row.isVisible()) {\n        row.hide();\n        hasChange = true;\n      }\n    });\n\n    if (hasChange) {\n      this.setState({ root: root });\n    }\n  }\n\n  // Public API\n  collapseAll() { // _hideRowsInRange alias with the default arguments\n    this._hideRowsInRange();\n  }\n\n  _isOpRangeValid(from: number, to: number): boolean {\n    const { root } = this.state;\n    const maxTo = root.getSize();\n    // Validation\n    if (from < 0) {\n      console.warn('Invalid range: from < 0');\n      return false;\n    }\n    if (from > maxTo) {\n      console.warn('Invalid range: from > max size');\n      return false;\n    }\n    if (to > maxTo) {\n      console.warn('Invalid range: to > max size');\n      return false;\n    }\n    if (from > to) {\n      console.warn('Invalid range: to > from');\n      return false;\n    }\n    return true;\n  }\n\n  _handleOnToggle = (row: Row) => {\n    const { root } = this.state;\n\n    const delta = this._toggleRow(root, row);\n    if (delta.hasChange) {\n      this.setState({ root: delta.root });\n    }\n  }\n\n  _toggleRow = (root: BTRoot, row: Row): TreeChange => {\n    const currentDepth = row.depth;\n    let rowIndex = Math.min(root.getRowIndex(row) + 1, root.getSize());\n\n    let hasChange: boolean = false;\n    let toggleOpen: ?boolean;\n    root.mapRange(rowIndex, root.getSize() - rowIndex, (row: Row) => {\n      if (toggleOpen == null) {\n        toggleOpen = !row.isVisible();\n      }\n\n      if (row.depth >= currentDepth + 1) {\n        if (row.depth === currentDepth + 1) {\n          row.toggle();\n          hasChange = true;\n        } else if (!toggleOpen && row.isVisible()) { // Close all children\n          row.toggle();\n          hasChange = true;\n        }\n        \n        return false;\n      } else {\n        return true;\n      }\n    });\n\n    return {\n      root: root,\n      hasChange: hasChange,\n    };\n  }\n}\n","// @flow\nimport Row from '../model/row';\nimport BTRoot from '../model/bt_root';\nimport type { TreeDataRow  } from '../model/row';\n\n\nexport const findNodeData = (root: BTRoot, dataNode: TreeDataRow): ?Row => {\n  let result;\n\n  root.mapAll((row: Row) => {\n    if (dataNode.data === row.data) {\n      result = row;\n      return true;\n    }\n  });\n  return result;\n}\n","import TreeDataTable from './component/TreeDataTable';\nimport type { TreeDataRow } from './component/TreeDataTable';\nimport type { RowMetadata } from '../model/row';\n\nexport default TreeDataTable;\nexport type { TreeDataRow };\nexport type { RowMetadata };\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport TreeDataTable from './cp-react-tree-table/src';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Select from '@material-ui/core/Select';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport secondary from '@material-ui/core/colors/orange';\r\n\r\nimport {FaFolder as IconClosed} from 'react-icons/fa';\r\nimport {FaFolderOpen as IconOpen} from 'react-icons/fa';\r\nimport {FaFileAlt as IconState} from 'react-icons/fa';\r\nimport {FaFile as IconDocument} from 'react-icons/fa';\r\nimport {MdPerson as IconExpert} from 'react-icons/md';\r\n//import {MdContentCopy as IconCopy} from 'react-icons/md';\r\nimport IconDefaultState from './assets/state.png';\r\nimport IconDefaultChannel from './assets/channel.png';\r\nimport IconDefaultDevice from './assets/device.png';\r\nimport IconDefault from './assets/empty.png';\r\n\r\nimport I18n from '../i18n';\r\nimport Utils from './Utils';\r\n\r\nimport CopyContentImg from '../assets/copy-content.svg';\r\n\r\nconst styles = theme => ({\r\n    toolbar: {\r\n        minHeight: 38,//Theme.toolbar.height,\r\n//        boxShadow: '0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12)'\r\n    },\r\n    toolbarButtons: {\r\n        padding: 4,\r\n        marginLeft: 4\r\n    },\r\n    treeTable: {\r\n        background: '#ffffff',\r\n        borderTop: '1px solid #999',\r\n        borderBottom: '1px solid #999'\r\n    },\r\n    treeTableRow: {\r\n        boxShadow: 'inset 0 1px 0 #eeeeee',\r\n        display: 'block'\r\n    },\r\n    mainDiv: {\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'hidden'\r\n    },\r\n    tableDiv: {\r\n        width: '100%',\r\n        height: 'calc(100% - 34px - 38px)',\r\n        overflow: 'auto'\r\n    },\r\n    cellDiv: {\r\n        display: 'inline-block',\r\n        fontSize: 12,\r\n        height: 26,\r\n        verticalAlign: 'top'\r\n    },\r\n    cellDivId: {\r\n        display: 'inline-block',\r\n        height: 26,\r\n        verticalAlign: 'top'\r\n    },\r\n    cellWrapper: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        fontWeight: 300,\r\n        fontSize: 13,\r\n        height: '100%',\r\n        width: '100%',\r\n//        fontFamily: \"'SF Mono', 'Segoe UI Mono', 'Roboto Mono', Menlo, Courier, monospace\",\r\n        lineHeight: '1em'\r\n    },\r\n    selectNone: {\r\n        opacity: 0.5,\r\n    },\r\n    selectIcon: {\r\n        width: 16,\r\n        height: 16,\r\n        paddingRight: 5\r\n    },\r\n    cellWrapperElement: {\r\n        flexGrow: 1,\r\n        cursor: 'default'\r\n    },\r\n\r\n    toggleButtonWrapper: {\r\n        width: 16,\r\n        flexGrow: 0,\r\n        color: '#008fff',\r\n        cursor: 'pointer',\r\n        padding: 1,\r\n        borderRadius: 3\r\n    },\r\n    partlyVisible: {\r\n        opacity: 0.3\r\n    },\r\n    /*.toggle-button-wrapper > span:hover {\r\n        background: #d7d7d7;\r\n    }*/\r\n    \r\n    selectSpan: {\r\n//        fontFamily: \"'SF Mono', 'Segoe UI Mono', 'Roboto Mono', Menlo, Courier, monospace\",\r\n        background: '#efefef',\r\n        border: '1px solid #e5e5e5',\r\n        padding: 2,\r\n        borderRadius: 3\r\n    },\r\n    selected: {\r\n        background: '#008fff',\r\n        color: 'white'\r\n    },\r\n    icon: {\r\n        width: 20,\r\n        height: 20,\r\n        paddingTop: 2,\r\n        paddingRight: 2\r\n    },\r\n    header: {\r\n        width: '100%'\r\n    },\r\n    headerCell: {\r\n        display: 'inline-block'\r\n    },\r\n    headerCellInput: {\r\n        width: 'calc(100% - 5px)'\r\n    },\r\n    visibleButtons: {\r\n        color: '#2196f3',\r\n        opacity: 0.7\r\n    },\r\n    depth: {\r\n        position: 'absolute',\r\n        top: 8,\r\n        left: 10,\r\n        color: 'black',\r\n        fontSize: 14\r\n    },\r\n    cellCopy: {\r\n        position: 'absolute',\r\n        top: 3,\r\n        right: 10,\r\n        width: 16,\r\n        height: 16,\r\n        background: 'lightblue',\r\n        cursor: 'grab',\r\n        borderRadius: 2,\r\n        padding: 2,\r\n    },\r\n    cellCopyPressed: {\r\n        cursor: 'grabbing',\r\n        background: secondary.A700,\r\n    }\r\n});\r\n\r\n// d=data, t=target, s=start, e=end, m=middle\r\nfunction binarySearch(d, t, s, e) {\r\n    s = s || 0;\r\n    if (e === undefined) {\r\n        e = d.length - 1;\r\n        if (!e) {\r\n            return d[0] === t;\r\n        }\r\n    }\r\n    const m = Math.floor((s + e) / 2);\r\n    if (t === d[m]) return d[m];\r\n    if (e - 1 === s) return d[s] === t || d[e] === t;\r\n    if (t > d[m]) return binarySearch(d, t, m, e);\r\n    if (t < d[m]) return binarySearch(d, t, s, m);\r\n}\r\n\r\n/* function walkTree(tree, func) {\r\n    func(tree);\r\n    if (tree.children) {\r\n        tree.children.forEach(item => walkTree(item, func));\r\n    }\r\n}\r\n*/\r\n\r\nfunction applyFilter(item, filters, lang, objects, context) {\r\n    let filteredOut = false;\r\n    if (!context) {\r\n        context = {};\r\n        if (filters.id) {\r\n            context.id = filters.id.toLowerCase();\r\n        }\r\n        if (filters.name) {\r\n            context.name = filters.name.toLowerCase();\r\n        }\r\n        if (filters.role) {\r\n            context.role = filters.role.toLowerCase();\r\n        }\r\n        if (filters.room) {\r\n            context.room = (objects[filters.room] && objects[filters.room].common && objects[filters.room].common.members) || [];\r\n        }\r\n        if (filters.func) {\r\n            context.func = (objects[filters.func] && objects[filters.func].common && objects[filters.func].common.members) || [];\r\n        }\r\n    }\r\n\r\n    if (item.data.id) {\r\n        if (!filters.expert) {\r\n            filteredOut = item.data.id === 'system' || item.data.id.startsWith('system.') || (item.data.obj && item.data.obj.common && item.data.obj.common.expert);\r\n        }\r\n        if (!filteredOut && context.id) {\r\n            if (item.data.fID === undefined) {\r\n                item.data.fID = item.data.id.toLowerCase();\r\n            }\r\n            filteredOut = item.data.fID.indexOf(context.id) === -1;\r\n        }\r\n        if (!filteredOut && context.name) {\r\n            if (item.data.fName === undefined) {\r\n                item.data.fName = (item.data.obj && item.data.obj.common && getName(item.data.obj.common.name, lang)) || '';\r\n                item.data.fName = item.data.name.toLowerCase();\r\n            }\r\n            filteredOut = item.data.fName.indexOf(context.name) === -1;\r\n        }\r\n        if (!filteredOut && filters.role) {\r\n            filteredOut = !(item.data && item.data.obj && item.data.obj.common && item.data.obj.common.role && item.data.obj.common.role.startsWith(context.role));\r\n        }\r\n        if (!filteredOut && context.room) {\r\n            filteredOut = !context.room.find(id => id === item.data.id || item.data.id.startsWith(id + '.'));\r\n        }\r\n        if (!filteredOut && context.func) {\r\n            filteredOut = !context.func.find(id => id === item.data.id || item.data.id.startsWith(id + '.'));\r\n        }\r\n    }\r\n    item.data.visible = !filteredOut;\r\n    item.data.hasVisibleChildren = false;\r\n    if (item.children) {\r\n        item.children.forEach(_item => {\r\n            const visible = applyFilter(_item, filters, lang, objects, context);\r\n            if (visible) {\r\n                item.data.hasVisibleChildren = true;\r\n            }\r\n        });\r\n    }\r\n    return item.data.visible || item.data.hasVisibleChildren;\r\n}\r\n\r\nfunction buildTree(objects, options) {\r\n    options = options || {};\r\n\r\n    const ids = Object.keys(objects);\r\n    ids.sort((a, b) => {\r\n        if (a === b) return 0;\r\n        a = a.replace(/\\./g, '!!!');\r\n        b = b.replace(/\\./g, '!!!');\r\n        if (a > b) return 1;\r\n        return -1;\r\n    });\r\n\r\n    // find empty nodes and create names for it\r\n    let currentPathArr = [];\r\n    let currentPath = '';\r\n    let currentPathLen = 0;\r\n    let root = {data: {name: '', id: ''}, children: []};\r\n\r\n    let info = {\r\n        funcEnums: [],\r\n        roomEnums: [],\r\n        roles: [],\r\n        ids: [],\r\n        objects\r\n    };\r\n\r\n    let croot = root;\r\n    for (let i = 0; i < ids.length; i++) {\r\n        const id = ids[i];\r\n        const parts = id.split('.');\r\n\r\n        if (objects[id]) {\r\n            if (objects[id].common && objects[id].common.role) {\r\n                if (info.roles.indexOf(objects[id].common.role) === -1) {\r\n                    info.roles.push(objects[id].common.role);\r\n                }\r\n            } else if (id.startsWith('enum.rooms.')) {\r\n                info.roomEnums.push(id);\r\n            } else if (id.startsWith('enum.functions.')) {\r\n                info.funcEnums.push(id);\r\n            }\r\n        }\r\n\r\n        if (options.statesOnly && (!objects[id] || objects[id].type !== 'state')) {\r\n            continue;\r\n        }\r\n        info.ids.push(id);\r\n\r\n        let repeat;\r\n        // if next level\r\n        do {\r\n            repeat = false;\r\n            if (!currentPath || id.substring(0, currentPath.length + 1) === currentPath + '.') {\r\n                if (parts.length - currentPathLen > 1) {\r\n                    let curPath = currentPath;\r\n                    for (let k = currentPathLen; k < parts.length - 1; k++) {\r\n                        curPath += (curPath ? '.' : '') + parts[k];\r\n                        if (!binarySearch(info.ids, curPath)) {\r\n                            const _croot = {data: {name: parts[k], parent: croot, id: curPath, obj: objects[curPath]}};\r\n                            croot.children = croot.children || [];\r\n                            croot.children.push(_croot);\r\n                            croot = _croot;\r\n                            //ids.splice(i, 0, curPath);\r\n                            info.ids.push(curPath);\r\n                            //i++;\r\n                        } else {\r\n                            croot = croot.children.find(item => item.data.name === parts[k]);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                const _croot = {data: {name: parts[parts.length - 1], obj: objects[id], parent: croot, id}, children: []};\r\n                croot.children = croot.children || [];\r\n                croot.children.push(_croot);\r\n                croot = _croot;\r\n\r\n                currentPathLen = parts.length;\r\n                currentPathArr = parts;\r\n                currentPath    = id;\r\n            } else {\r\n                let u = 0;\r\n                while (currentPathArr[u] === parts[u]) u++;\r\n                if (u > 0) {\r\n                    let move = currentPathArr.length;\r\n                    currentPathArr = currentPathArr.splice(0, u);\r\n                    currentPathLen = u;\r\n                    currentPath = currentPathArr.join('.');\r\n                    while (move > u) {\r\n                        croot = croot.data.parent;\r\n                        move--;\r\n                    }\r\n                } else {\r\n                    croot = root;\r\n                    currentPathArr = [];\r\n                    currentPath = '';\r\n                    currentPathLen = 0;\r\n                }\r\n                repeat = true;\r\n            }\r\n        } while(repeat);\r\n    }\r\n\r\n    info.roomEnums.sort();\r\n    info.funcEnums.sort();\r\n    info.roles.sort();\r\n\r\n    return {info, root};\r\n}\r\n\r\nfunction findNode(root, id, _parts, _path, _level) {\r\n    if (root.data.id === id) {\r\n        return root;\r\n    }\r\n    if (!_parts) {\r\n        _parts = id.split('.');\r\n        _level = 0;\r\n        _path = _parts[_level];\r\n    }\r\n    if (!root.children && root.data.id !== id) {\r\n        return null;\r\n    } else {\r\n        let found;\r\n        for (let i = 0; i< root.children.length; i++) {\r\n            const _id = root.children[i].data.id;\r\n            if (_id === _path) {\r\n                found = root.children[i];\r\n                break;\r\n            } else\r\n            if (_id < _path) continue;\r\n            if (_id > _path) break;\r\n        }\r\n        if (found) {\r\n            return findNode(found, id, _parts, _path + '.' + _parts[_level + 1], _level + 1);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\nfunction getName(name, lang) {\r\n    if (name && typeof name === 'object') {\r\n        return name[lang] || name.en;\r\n    } else {\r\n        return name || '';\r\n    }\r\n}\r\n\r\nfunction findRoomsForObject(data, id, lang, withParentInfo, rooms) {\r\n    if (!id) {\r\n        return [];\r\n    }\r\n    rooms = rooms || [];\r\n    for (let i = 0; i < data.roomEnums.length; i++) {\r\n        const common = data.objects[data.roomEnums[i]] && data.objects[data.roomEnums[i]].common;\r\n        const name = getName(common.name, lang);\r\n\r\n        if (common.members && common.members.indexOf(id) !== -1 && rooms.indexOf(name) === -1) {\r\n            if (!withParentInfo) {\r\n                rooms.push(name);\r\n            } else {\r\n                rooms.push({name: name, origin: id});\r\n            }\r\n        }\r\n    }\r\n    const parts = id.split('.');\r\n    parts.pop();\r\n    id = parts.join('.');\r\n    if (data.objects[id]) {\r\n        findRoomsForObject(data, id, lang, withParentInfo, rooms);\r\n    }\r\n\r\n    return rooms;\r\n}\r\n\r\n/* function findRoomsForObjectAsIds(data, id, rooms) {\r\n    if (!id) {\r\n        return [];\r\n    }\r\n    rooms = rooms || [];\r\n    for (let i = 0; i < data.roomEnums.length; i++) {\r\n        const common = data.objects[data.roomEnums[i]] && data.objects[data.roomEnums[i]].common;\r\n        if (common && common.members && common.members.indexOf(id) !== -1 &&\r\n            rooms.indexOf(data.roomEnums[i]) === -1) {\r\n            rooms.push(data.roomEnums[i]);\r\n        }\r\n    }\r\n    return rooms;\r\n}\r\n*/\r\nfunction findFunctionsForObject(data, id, lang, withParentInfo, funcs) {\r\n    if (!id) {\r\n        return [];\r\n    }\r\n    funcs = funcs || [];\r\n    for (let i = 0; i < data.funcEnums.length; i++) {\r\n        const common = data.objects[data.funcEnums[i]] && data.objects[data.funcEnums[i]].common;\r\n        const name = getName(common.name, lang);\r\n        if (common && common.members && common.members.indexOf(id) !== -1 && funcs.indexOf(name) === -1) {\r\n            if (!withParentInfo) {\r\n                funcs.push(name);\r\n            } else {\r\n                funcs.push({name: name, origin: id});\r\n            }\r\n        }\r\n    }\r\n    const parts = id.split('.');\r\n    parts.pop();\r\n    id = parts.join('.');\r\n    if (data.objects[id]) {\r\n        findFunctionsForObject(data, id, lang, withParentInfo, funcs);\r\n    }\r\n\r\n    return funcs;\r\n}\r\n\r\n/*function findFunctionsForObjectAsIds(data, id, funcs) {\r\n    if (!id) {\r\n        return [];\r\n    }\r\n    funcs = funcs || [];\r\n    for (let i = 0; i < data.funcEnums.length; i++) {\r\n        const common = data.objects[data.funcEnums[i]] && data.objects[data.funcEnums[i]].common;\r\n        if (common && common.members && common.members.indexOf(id) !== -1 &&\r\n            funcs.indexOf(data.funcEnums[i]) === -1) {\r\n            funcs.push(data.funcEnums[i]);\r\n        }\r\n    }\r\n\r\n    return funcs;\r\n}\r\n*/\r\nfunction getStates(obj) {\r\n    let states;\r\n    if (obj &&\r\n        obj.common &&\r\n        obj.common.states) {\r\n        states = obj.common.states;\r\n    }\r\n    if (states) {\r\n        if (typeof states === 'string' && states[0] === '{') {\r\n            try {\r\n                states = JSON.parse(states);\r\n            } catch (ex) {\r\n                console.error('Cannot parse states: ' + states);\r\n                states = null;\r\n            }\r\n        } else\r\n        // if old format val1:text1;val2:text2\r\n        if (typeof states === 'string') {\r\n            const parts = states.split(';');\r\n            states = {};\r\n            for (let p = 0; p < parts.length; p++) {\r\n                const s = parts[p].split(':');\r\n                states[s[0]] = s[1];\r\n            }\r\n        }\r\n    }\r\n    return states;\r\n}\r\n\r\nfunction quality2text(q) {\r\n    if (!q) return 'ok';\r\n    const custom = q & 0xFFFF0000;\r\n    let text = '';\r\n    if (q & 0x40) text += 'device';\r\n    if (q & 0x80) text += 'sensor';\r\n    if (q & 0x01) text += ' bad';\r\n    if (q & 0x02) text += ' not connected';\r\n    if (q & 0x04) text += ' error';\r\n\r\n    return text + (custom ? '|0x' + (custom >> 16).toString(16).toUpperCase() : '') + ' [0x' + q.toString(16).toUpperCase() + ']';\r\n}\r\n\r\nfunction formatDate(dateObj) {\r\n    //return dateObj.getFullYear() + '-' +\r\n    //    ('0' + (dateObj.getMonth() + 1).toString(10)).slice(-2) + '-' +\r\n    //    ('0' + (dateObj.getDate()).toString(10)).slice(-2) + ' ' +\r\n    //    ('0' + (dateObj.getHours()).toString(10)).slice(-2) + ':' +\r\n    //    ('0' + (dateObj.getMinutes()).toString(10)).slice(-2) + ':' +\r\n    //    ('0' + (dateObj.getSeconds()).toString(10)).slice(-2);\r\n    // Following implementation is 5 times faster\r\n    if (!dateObj) return '';\r\n\r\n    var text = dateObj.getFullYear();\r\n    var v = dateObj.getMonth() + 1;\r\n    if (v < 10) {\r\n        text += '-0' + v;\r\n    } else {\r\n        text += '-' + v;\r\n    }\r\n\r\n    v = dateObj.getDate();\r\n    if (v < 10) {\r\n        text += '-0' + v;\r\n    } else {\r\n        text += '-' + v;\r\n    }\r\n\r\n    v = dateObj.getHours();\r\n    if (v < 10) {\r\n        text += ' 0' + v;\r\n    } else {\r\n        text += ' ' + v;\r\n    }\r\n    v = dateObj.getMinutes();\r\n    if (v < 10) {\r\n        text += ':0' + v;\r\n    } else {\r\n        text += ':' + v;\r\n    }\r\n\r\n    v = dateObj.getSeconds();\r\n    if (v < 10) {\r\n        text += ':0' + v;\r\n    } else {\r\n        text += ':' + v;\r\n    }\r\n\r\n    v = dateObj.getMilliseconds();\r\n    if (v < 10) {\r\n        text += '.00' + v;\r\n    } else if (v < 100) {\r\n        text += '.0' + v;\r\n    } else {\r\n        text += '.' + v;\r\n    }\r\n\r\n    return text;\r\n}\r\n\r\nfunction formatValue(id, state, obj, texts) {\r\n    const states = getStates(obj);\r\n    const isCommon = obj.common;\r\n\r\n    let valText = state.val;\r\n    if (isCommon && isCommon.role && isCommon.role.match(/^value\\.time|^date/)) {\r\n        valText = valText ? (new Date(valText)).toString() : valText;\r\n    }\r\n\r\n    if (states && states[valText] !== undefined) {\r\n        valText = states[valText] + '(' + valText + ')';\r\n    }\r\n\r\n    let valFull;\r\n    if (valText === undefined) {\r\n        valText = '&nbsp;';\r\n    } else {\r\n        // if less 2000.01.01 00:00:00\r\n        if (state.ts < 946681200000) state.ts *= 1000;\r\n        if (state.lc < 946681200000) state.lc *= 1000;\r\n\r\n        if (isCommon && isCommon.unit) {\r\n             valText += ' ' + isCommon.unit;\r\n        }\r\n        valFull =           texts.value   + ': ' + state.val;\r\n        valFull += '\\x0A' + texts.ack     + ': ' + state.ack;\r\n        valFull += '\\x0A' + texts.ts      + ': ' + (state.ts ? formatDate(new Date(state.ts)) : '');\r\n        valFull += '\\x0A' + texts.lc      + ': ' + (state.lc ? formatDate(new Date(state.lc)) : '');\r\n        valFull += '\\x0A' + texts.from    + ': ' + (state.from || '');\r\n        if (state.user) {\r\n            valFull += '\\x0A' + texts.user    + ': ' + (state.user || '');\r\n        }\r\n        valFull += '\\x0A' + texts.quality + ': ' + quality2text(state.q || 0);\r\n    }\r\n    if (valText === null || valText === '') {\r\n        valText = '&nbsp;';\r\n    }\r\n    if (typeof valText === 'string' && valText !== '&nbsp;') {\r\n        valText = valText.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');\r\n    }\r\n\r\n    return {\r\n        valText: valText,\r\n        valFull: valFull,\r\n        style: {color: state.ack ? (state.q ? 'orange' : '') : '#c00000'}\r\n    };\r\n}\r\n\r\nfunction getSelectIdIcon(objects, id, prefix) {\r\n    prefix = prefix || '.';//http://localhost:8081';\r\n    let icon = '';\r\n    let alt  = '';\r\n    const _id_ = 'system.adapter.' + id;\r\n    if (id && objects[_id_] && objects[_id_].common && objects[_id_].common.icon) {\r\n        // if not BASE64\r\n        if (!objects[_id_].common.icon.match(/^data:image\\//)) {\r\n            if (objects[_id_].common.icon.indexOf('.') !== -1) {\r\n                icon = prefix + '/adapter/' + objects[_id_].common.name + '/' + objects[_id_].common.icon;\r\n            } else {\r\n                return null; //'<i class=\"material-icons iob-list-icon\">' + objects[_id_].common.icon + '</i>';\r\n            }\r\n        } else {\r\n            icon = objects[_id_].common.icon;\r\n        }\r\n    } else {\r\n        const obj = objects[id];\r\n\r\n        if (obj && obj.common) {\r\n            if (obj.common.icon) {\r\n                if (!obj.common.icon.match(/^data:image\\//)) {\r\n                    if (obj.common.icon.indexOf('.') !== -1) {\r\n                        var instance;\r\n                        if (obj.type === 'instance') {\r\n                            icon = prefix + '/adapter/' + obj.common.name + '/' + obj.common.icon;\r\n                        } else if (id && id.match(/^system\\.adapter\\./)) {\r\n                            instance = id.split('.', 3);\r\n                            if (obj.common.icon[0] === '/') {\r\n                                instance[2] += obj.common.icon;\r\n                            } else {\r\n                                instance[2] += '/' + obj.common.icon;\r\n                            }\r\n                            icon = prefix + '/adapter/' + instance[2];\r\n                        } else {\r\n                            instance = id.split('.', 2);\r\n                            if (obj.common.icon[0] === '/') {\r\n                                instance[0] += obj.common.icon;\r\n                            } else {\r\n                                instance[0] += '/' + obj.common.icon;\r\n                            }\r\n                            icon = prefix + '/adapter/' + instance[0];\r\n                        }\r\n                    } else {\r\n                        return null; // '<i class=\"material-icons iob-list-icon\">' + obj.common.icon + '</i>';\r\n                    }\r\n                } else {\r\n                    // base 64 image\r\n                    icon = obj.common.icon;\r\n                }\r\n            } else if (obj.type === 'device') {\r\n                icon = IconDefaultDevice;\r\n                alt  = 'device';\r\n            } else if (obj.type === 'channel') {\r\n                icon = IconDefaultChannel;\r\n                alt  = 'channel';\r\n            } else if (obj.type === 'state') {\r\n                icon = IconDefaultState;\r\n                alt  = 'state';\r\n            }\r\n        }\r\n    }\r\n\r\n    if (icon) {\r\n        return {src: icon, alt};\r\n    } else {\r\n        return  {src: IconDefault, alt: ''};\r\n    }\r\n}\r\n\r\nclass SelectID extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loaded: false,\r\n            selected: (this.props.selected || '').replace(/[\"']/g, ''),\r\n            filter: {\r\n                id: '',\r\n                name: '',\r\n                room: '',\r\n                func:  '',\r\n                role: '',\r\n                expert: false\r\n            },\r\n            depth: 0\r\n        };\r\n        this.selectedFound = !this.state.selected;\r\n        this.copyContentImg = CopyContentImg;\r\n        this.treeTableRef = React.createRef();\r\n        this.mainRef = React.createRef();\r\n        this.root = null;\r\n        this.lang = I18n.getLanguage();\r\n\r\n        this.props.connection.getObjects(objects => {\r\n            this.props.connection.getStates(states => {\r\n                this.states = states;\r\n                this.objects = objects;\r\n                const {info, root} = buildTree(this.objects, this.props);\r\n                this.root = root;\r\n                this.info = info;\r\n                applyFilter(this.root, this.state.filter, this.lang, this.objects);\r\n                this.setState({loaded: true});\r\n\r\n                this.state.selected && this.onSelect(this.state.selected);\r\n            }, true);\r\n        }, true);\r\n\r\n        this.texts = {\r\n            value:   I18n.t('tooltip_value'),\r\n            ack:     I18n.t('tooltip_ack'),\r\n            ts:      I18n.t('tooltip_ts'),\r\n            lc:      I18n.t('tooltip_lc'),\r\n            from:    I18n.t('tooltip_from'),\r\n            user:    I18n.t('tooltip_user'),\r\n            quality: I18n.t('tooltip_quality')\r\n        };\r\n    }\r\n\r\n    onSelect(selected, isDouble) {\r\n        selected !== this.state.selected && this.setState({selected});\r\n        const name = selected ? Utils.getObjectName(this.objects, selected, null, {language: this.lang}) : '';\r\n        this.props.onSelect && this.props.onSelect(selected, name, isDouble);\r\n    }\r\n\r\n    onDoubleClick(data, metadata, toggleChildren) {\r\n        if (metadata.hasChildren) {\r\n            toggleChildren();\r\n        } else if (data.obj && data.obj.type === 'state') {\r\n            this.onSelect(data.obj._id, true);\r\n        }\r\n    }\r\n\r\n    onCopy(e, id) {\r\n        const el = window.document.createElement('textarea');\r\n        el.value = id;\r\n        window.document.body.appendChild(el);\r\n        el.select();\r\n        window.document.execCommand('copy');\r\n        window.document.body.removeChild(el);\r\n        console.log(id);\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    }\r\n\r\n    installCopyButtons() {\r\n        if (!this.mainRef.current) return;\r\n        const rows = this.mainRef.current.getElementsByClassName('add-copy-button');\r\n        for (let i = 0; i < rows.length; i++) {\r\n            if (!rows[i].__installed) {\r\n                rows[i].addEventListener('mouseenter', e => {\r\n                    const copy = e.target.getElementsByClassName(this.props.classes.cellCopy);\r\n                    if (!copy || !copy.length) {\r\n                        const div = document.createElement('div');\r\n                        const img = document.createElement('img');\r\n                        img.src = this.copyContentImg;\r\n                        img.width = 16;\r\n                        img.height = 16;\r\n                        img.color = secondary.A200;\r\n                        div.appendChild(img);\r\n                        div.className = this.props.classes.cellCopy;\r\n                        div.addEventListener('click', e => this.onCopy(e, e.target.parentNode.dataset.index), false);\r\n                        div.addEventListener('mousedown', e => {\r\n                            if (e.target.parentNode.className.indexOf(this.props.classes.cellCopyPressed) === -1) {\r\n                                e.target.parentNode.className += ' ' + this.props.classes.cellCopyPressed;\r\n                            }\r\n                        }, false);\r\n                        div.addEventListener('mouseup', e => {\r\n                            let className = e.target.parentNode.className.split(' ');\r\n                            let pos = className.indexOf(this.props.classes.cellCopyPressed);\r\n                            while (pos !== -1) {\r\n                                className.splice(pos);\r\n                                pos = className.indexOf(this.props.classes.cellCopyPressed);\r\n                            }\r\n                            e.target.parentNode.className = className.join(' ');\r\n                        }, false);\r\n                        e.target.appendChild(div);\r\n                    }\r\n                }, false);\r\n                rows[i].addEventListener('mouseleave', e => {\r\n                    const copy = e.target.getElementsByClassName(this.props.classes.cellCopy);\r\n                    if (copy && copy.length) {\r\n                        e.target.removeChild(copy[0]);\r\n                    }\r\n                }, false);\r\n                rows[i].__installed = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.installCopyButtons();\r\n        if (!this.selectedFound) {\r\n            if (this.props.selected && this.treeTableRef.current) {\r\n                const node = findNode(this.root, this.props.selected);\r\n                this.treeTableRef.current.scrollIntoView(node);\r\n                this.selectedFound = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    renderIndexColumn(data, metadata, toggleChildren) {\r\n        const selected = this.state.selected === data.id;\r\n        const isExist = !!this.objects[data.id];\r\n        const isState = isExist && this.objects[data.id].type === 'state';\r\n        // const isChannel = isExist && !isState && this.objects[data.id].type === 'channel';\r\n        // const isDevice = isExist && !isChannel && !isState && this.objects[data.id].type === 'device';\r\n\r\n        const padding = (metadata.depth * 25) + 'px';\r\n        const width = `calc(100% - ${padding})`;\r\n        return (\r\n            <div style={{paddingLeft: padding, width: width}}\r\n                 data-index={data.id}\r\n                 className={this.props.classes.cellWrapper + ' add-copy-button'}\r\n            >\r\n                <span className={(selected ? this.props.classes.selected : '') + ' ' + this.props.classes.toggleButtonWrapper}>\r\n                  {metadata.hasChildren\r\n                      ? (<span onClick={toggleChildren}>{metadata.hasVisibleChildren ? (<IconOpen/>) : (<IconClosed/>)}</span>)\r\n                      : (isState ? (<IconState/>) : (<IconDocument/>))\r\n                  }\r\n                </span>\r\n                <span className={this.props.classes.cellWrapperElement} style={{fontWeight: metadata.hasChildren ? 'bold' : 'normal'}}>{data.name}</span>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderColumnName(data, metadata, toggleChildren) {\r\n        const icon = getSelectIdIcon(this.objects, data.id, this.props.prefix);\r\n        return (<span className={this.props.classes.cellWrapper}>\r\n            <img src={icon.src} className={this.props.classes.icon} alt={icon.alt}/>\r\n            {data.obj && Utils.getObjectName(this.objects, data.obj._id, null, {language: this.lang})}\r\n            </span>);\r\n    }\r\n    renderColumnRole(data, metadata, toggleChildren) {\r\n        if (!data.obj) return null;\r\n        return (<span className={this.props.classes.cellWrapper}>{(data.obj.common && data.obj.common.role) || ''}</span>);\r\n    }\r\n    renderColumnRoom(data, metadata, toggleChildren) {\r\n        if (!data.obj) return null;\r\n        const list = findRoomsForObject(this.info, data.obj._id, this.lang) || [];\r\n        return (<span className={this.props.classes.cellWrapper}>{list.join(', ')}</span>);\r\n    }\r\n    renderColumnFunc(data, metadata, toggleChildren) {\r\n        if (!data.obj) return null;\r\n        const list = findFunctionsForObject(this.info, data.obj._id, this.lang) || [];\r\n        return (<span className={this.props.classes.cellWrapper}>{list.join(', ')}</span>);\r\n    }\r\n    renderColumnValue(data, metadata, toggleChildren) {\r\n        if (!data.obj || !data.obj._id || this.states || !this.states[data.obj._id]) return null;\r\n        const id = data.obj._id;\r\n        const state = this.states[id];\r\n        const info = formatValue(id, state, data.obj, this.texts);\r\n        return (<span className={this.props.classes.cellWrapper} style={info.style} title={info.valFull}>{info.valText}</span>);\r\n    }\r\n\r\n    onFilter(name, value) {\r\n        if (this.state.filter[name] !== value) {\r\n            const filter = JSON.parse(JSON.stringify(this.state.filter));\r\n            filter[name] = value;\r\n            this.filterTimer && clearTimeout(this.filterTimer);\r\n            this.filterTimer = setTimeout(() => {\r\n                applyFilter(this.root, filter, this.lang, this.objects);\r\n                this.forceUpdate();\r\n            }, 400);\r\n            this.setState({filter});\r\n        }\r\n    }\r\n\r\n    getFilterInput(name) {\r\n        return (<FormControl className={this.props.classes.headerCellInput} style={{marginTop: 0, marginBottom: 0}} margin=\"dense\">\r\n            <Input\r\n                classes={{underline: 'no-underline'}}\r\n                id={name}\r\n                placeholder={I18n.t('filter_' + name)}\r\n                value={this.state.filter[name]}\r\n                onChange={e => this.onFilter(name, e.target.value)}\r\n                autoComplete=\"off\"\r\n            />\r\n        </FormControl>);\r\n    }\r\n    getFilterSelect(name, values) {\r\n        //<!--InputLabel htmlFor=\"demo-controlled-open-select\">Age</InputLabel-->\r\n        return (\r\n            <Select className={this.props.classes.headerCellInput + ' no-underline'}\r\n                value={this.state.filter[name]}\r\n                onChange={e => this.onFilter(name, e.target.value)}\r\n                inputProps={{name, id: name,}}\r\n                displayEmpty={true}\r\n            >\r\n                <MenuItem key=\"empty\" value=\"\"><span className={this.props.classes.selectNone}>{I18n.t('filter_' + name)}</span></MenuItem>\r\n                {values.map(item => {\r\n                    let id;\r\n                    let name;\r\n                    let icon;\r\n                    if (typeof item === 'object') {\r\n                        id = item.value;\r\n                        name = item.name;\r\n                        icon = getSelectIdIcon(this.objects, id, this.props.prefix);\r\n                    } else {\r\n                        id = item;\r\n                        name = item;\r\n                    }\r\n\r\n                    return (\r\n                        <MenuItem key={id} value={id}>\r\n                            {icon && (<img className={this.props.classes.selectIcon} src={icon.src} alt={name}/>)}\r\n                            {name}\r\n                        </MenuItem>)\r\n                })}\r\n            </Select>);\r\n    }\r\n    getFilterSelectRole() {\r\n        return this.getFilterSelect('role', this.info.roles);\r\n    }\r\n    getFilterSelectRoom() {\r\n        const rooms = this.info.roomEnums.map(id => {\r\n            return {name: getName((this.objects[id] && this.objects[id].common && this.objects[id].common.name) || id.split('.').pop()), value: id};\r\n        });\r\n\r\n        return this.getFilterSelect('room', rooms);\r\n\r\n    }\r\n    getFilterSelectFunction() {\r\n        const func = this.info.funcEnums.map(id => {\r\n            return {name: getName((this.objects[id] && this.objects[id].common && this.objects[id].common.name) || id.split('.').pop()), value: id};\r\n        });\r\n        return this.getFilterSelect('func', func);\r\n\r\n    }\r\n    onExpandAll() {\r\n        this.treeTableRef.current.expandAll();\r\n    }\r\n    onCollapseAll() {\r\n        this.treeTableRef.current.collapseAll();\r\n    }\r\n    onExpandVisible() {\r\n        if (this.state.depth < 9) {\r\n            const depth = this.state.depth + 1;\r\n            this.setState({depth: depth}, () => {\r\n                this.treeTableRef.current.expandAll(depth);\r\n            });\r\n        }\r\n    }\r\n    onCollapseVisible() {\r\n        if (this.state.depth > 0) {\r\n            const depth = this.state.depth - 1;\r\n            this.setState({depth: depth}, () => {\r\n                this.treeTableRef.current.expandAll(depth);\r\n            });\r\n        }\r\n    }\r\n\r\n    getToolbar() {\r\n        return (\r\n            <Toolbar variant=\"dense\" className={this.props.classes.toolbar} key=\"toolbar\">\r\n                <IconButton key=\"expert\" variant=\"contained\" className={this.props.classes.toolbarButtons} color={this.state.filter.expert ? 'secondary' : 'primary'} onClick={() => this.onFilter('expert', !this.state.filter.expert)}><IconExpert /></IconButton>\r\n                <IconButton key=\"expandAll\" variant=\"contained\" className={this.props.classes.toolbarButtons} onClick={() => this.onExpandAll()}><IconOpen /></IconButton>\r\n                <IconButton key=\"collapseAll\" variant=\"contained\" className={this.props.classes.toolbarButtons} onClick={() => this.onCollapseAll()}><IconClosed /></IconButton>\r\n                <IconButton key=\"expandVisible\" variant=\"contained\" className={this.props.classes.toolbarButtons + ' ' + this.props.classes.visibleButtons} onClick={() => this.onExpandVisible()}><IconOpen />{this.state.depth ? (<div className={this.props.classes.depth}>{this.state.depth}</div>) : null}</IconButton>\r\n                <IconButton key=\"collapseVisible\" variant=\"contained\" className={this.props.classes.toolbarButtons + ' ' + this.props.classes.visibleButtons} onClick={() => this.onCollapseVisible()}><IconClosed />{this.state.depth ? (<div className={this.props.classes.depth}>{this.state.depth}</div>) : null}</IconButton>\r\n            </Toolbar>);\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.loaded) {\r\n            return (<CircularProgress/>);\r\n        } else {\r\n            const classes = this.props.classes;\r\n            const idWidth = 300;\r\n            const WIDTHS = [120, 180, 180, 120];\r\n            const width = `calc(100% - ${idWidth + WIDTHS[0] + WIDTHS[1] + WIDTHS[2] + WIDTHS[3]}px)`;\r\n            return (<div className={classes.mainDiv} ref={this.mainRef}>\r\n                {this.getToolbar()}\r\n                <div key=\"header\" className={classes.header}>\r\n                    <div className={classes.headerCell} style={{width: idWidth}}>{this.getFilterInput('id')}</div>\r\n                    <div className={classes.headerCell} style={{width: width}}>{this.getFilterInput('name')}</div>\r\n                    <div className={classes.headerCell} style={{width: WIDTHS[0]}}>{this.getFilterSelectRole()}</div>\r\n                    <div className={classes.headerCell} style={{width: WIDTHS[1]}}>{this.getFilterSelectRoom()}</div>\r\n                    <div className={classes.headerCell} style={{width: WIDTHS[2]}}>{this.getFilterSelectFunction()}</div>\r\n                    <div className={classes.headerCell} style={{width: WIDTHS[3]}}>{I18n.t('Value')}</div>\r\n                </div>\r\n                <div className={classes.tableDiv}>\r\n                <TreeDataTable\r\n                    ref={this.treeTableRef}\r\n                    key=\"table\"\r\n                    data={this.root.children}\r\n                    height={'100%'}\r\n                    selected={this.state.selected}\r\n                    classNameSelected={classes.selected}\r\n                    classNamePartlyVisible={classes.partlyVisible}\r\n                    className={classes.treeTable}\r\n                    classNameRow={classes.treeTableRow}\r\n                    onRowClick={(data, metadata, toggleChildren, isDoubleClick) => isDoubleClick ?\r\n                        this.onDoubleClick(data, metadata, toggleChildren) :\r\n                        this.onSelect(data.id)}\r\n                >\r\n                    <TreeDataTable.Column grow={0} renderCell={this.renderIndexColumn.bind(this)} className={classes.cellDivId} width={idWidth} />\r\n                    <TreeDataTable.Column grow={1} renderCell={this.renderColumnName.bind(this)}  className={classes.cellDiv} width={width}/>\r\n                    <TreeDataTable.Column grow={1} renderCell={this.renderColumnRole.bind(this)}  className={classes.cellDiv} width={WIDTHS[0]}/>\r\n                    <TreeDataTable.Column grow={1} renderCell={this.renderColumnRoom.bind(this)}  className={classes.cellDiv} width={WIDTHS[1]}/>\r\n                    <TreeDataTable.Column grow={1} renderCell={this.renderColumnFunc.bind(this)}  className={classes.cellDiv} width={WIDTHS[2]}/>\r\n                    <TreeDataTable.Column grow={1} renderCell={this.renderColumnValue.bind(this)} className={classes.cellDiv} width={WIDTHS[3]}/>\r\n                </TreeDataTable></div>\r\n            </div>);\r\n        }\r\n    }\r\n}\r\n\r\nSelectID.propTypes = {\r\n    classes: PropTypes.object,\r\n    statesOnly: PropTypes.bool,\r\n    selected: PropTypes.string,\r\n    onSelect: PropTypes.func,\r\n    connection: PropTypes.object,\r\n    prefix: PropTypes.string\r\n};\r\n\r\nexport default withStyles(styles)(SelectID);\r\n\r\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Dialog from '@material-ui/core/Dialog';\n\nimport I18n from '../i18n';\nimport SelectID from '../Components/SelectID';\nimport {withStyles} from '@material-ui/core/styles/index';\n\nconst styles = theme => ({\n    headerID: {\n        fontWeight: 'bold',\n        fontStyle: 'italic'\n    },\n    dialog: {\n        height: '95%'\n    },\n    content: {\n        height: '100%',\n        overflow: 'hidden'\n    }\n});\n\nclass DialogSelectID extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state =  {\n            selected: this.props.selected || '',\n            name:     ''\n        };\n    }\n\n    handleCancel() {\n        this.props.onClose();\n    };\n\n    handleOk() {\n        this.props.onOk(this.state.selected, this.state.name);\n        this.props.onClose();\n    };\n\n    render() {\n        let title;\n        if (this.state.name || this.state.selected) {\n            title = [(<span key=\"selected\">{I18n.t('Selected')} </span>), (<span key=\"id\" className={this.props.classes.headerID}>{\n                (this.state.name || this.state.selected) + (this.state.name ? ' [' + this.state.selected + ']' : '')\n            }</span>)];\n        } else {\n            title = this.props.title || I18n.t('Please select object ID...');\n        }\n\n        return (\n            <Dialog\n                disableBackdropClick\n                maxWidth={false}\n                disableEscapeKeyDown\n                classes={{paper: this.props.classes.dialog}}\n                fullWidth={true}\n                open={true}\n                aria-labelledby=\"selectid-dialog-title\"\n            >\n                <DialogTitle id=\"selectid-dialog-title\">{title}</DialogTitle>\n                <DialogContent className={this.props.classes.content}>\n                    <SelectID\n                        prefix={this.props.prefix}\n                        statesOnly={this.props.statesOnly}\n                        style={{width: '100%', height: '100%'}}\n                        connection={this.props.connection}\n                        selected={this.state.selected}\n                        name={this.state.name}\n                        onSelect={(selected, name, isDouble) => {\n                            selected !== this.state.selected && this.setState({selected, name});\n                            isDouble && this.handleOk();\n                        }}\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.handleOk()} disabled={!this.state.selected} color=\"primary\">{this.props.ok || I18n.t('Ok')}</Button>\n                    <Button onClick={() => this.handleCancel()} color=\"primary\">{this.props.cancel || I18n.t('Cancel')}</Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nDialogSelectID.propTypes = {\n    classes: PropTypes.object,\n    onClose: PropTypes.func,\n    onOk: PropTypes.func.isRequired,\n    title: PropTypes.string,\n    selected: PropTypes.string,\n    statesOnly: PropTypes.bool,\n    connection: PropTypes.object.isRequired,\n    cancel: PropTypes.string,\n    prefix: PropTypes.string,\n    ok: PropTypes.string\n\n};\n\nexport default withStyles(styles)(DialogSelectID);\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Input from '@material-ui/core/Input';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Fab from '@material-ui/core/Fab';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\n\nimport {MdAdd as IconAdd} from 'react-icons/md';\n\nimport I18n from '../i18n';\nimport DialogSelectID from '../Dialogs/SelectID';\nimport Utils from '../Components/Utils'\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        minHeight: '100%'\n    },\n    input: {\n        marginTop: 0,\n        minWidth: 400\n    },\n    button: {\n        marginRight: 20,\n    },\n    card: {\n        maxWidth: 345,\n        textAlign: 'center'\n    },\n    media: {\n        height: 180,\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20\n    },\n    columnLogo: {\n        width: 350,\n        marginRight: 0\n    },\n    columnSettings: {\n        width: 'calc(100% - 370px)',\n    },\n    controlElement: {\n        //background: '#d2d2d2',\n        marginBottom: 5\n    }\n});\n\nclass ExtendedOptions extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            showSelectId: false,\n        };\n\n    }\n    \n    renderInput(title, attr, type) {\n        return (<TextField\n            label={I18n.t(title)}\n            className={this.props.classes.input + ' ' + this.props.classes.controlElement}\n            value={this.props.native[attr]}\n            type={type || 'text'}\n            onChange={e => this.props.onChange(attr, e.target.value)}\n            margin=\"normal\"\n        />);\n    }\n\n    renderSelect(title, attr, options, style) {\n        return (<FormControl className={this.props.classes.input + ' ' + this.props.classes.controlElement} style={Object.assign({paddingTop: 5}, style)}>\n            <Select\n                value={this.props.native[attr] || '_'}\n                onChange={e => this.props.onChange(attr, e.target.value === '_' ? '' : e.target.value)}\n                input={<Input name={attr} id={attr + '-helper'} />}\n            >\n                {options.map(item => (<MenuItem key={'key-' + item.value} value={item.value || '_'}>{I18n.t(item.title)}</MenuItem>))}\n            </Select>\n            <FormHelperText>{I18n.t(title)}</FormHelperText>\n        </FormControl>);\n    }\n\n    renderCheckbox(title, attr, style) {\n        return (<FormControlLabel key={attr} style={Object.assign({paddingTop: 5}, style)} className={this.props.classes.controlElement}\n            control={\n                <Checkbox\n                    checked={this.props.native[attr]}\n                    onChange={() => this.props.onChange(attr, !this.props.native[attr])}\n                    color=\"primary\"\n                />\n            }\n            label={I18n.t(title)}\n        />);\n    }\n\n    getSelectIdDialog(attr) {\n        if (this.state.showSelectId) {\n            return (<DialogSelectID\n                key=\"dialogSelectID2\"\n                prefix={'../..'}\n                connection={this.props.socket}\n                selected={this.props.native[attr]}\n                statesOnly={true}\n                onClose={() => this.setState({showSelectId: false})}\n                onOk={selected => {\n                    this.setState({showSelectId: false});\n                    this.props.onChange(attr, selected);\n                }}\n            />);\n        } else {\n            return null;\n        }\n    }\n\n    render() {\n        return (\n            <form className={this.props.classes.tab}>\n                {this.renderInput('Cloud URL', 'cloudUrl')}<br/>\n                {this.renderSelect('Language', 'language', [\n                    {title: 'default', value: ''},\n                    {title: 'english', value: 'en'},\n                    {title: 'Deutsch', value: 'de'},\n                    {title: 'русский', value: 'ru'}\n                ], {marginTop: 10})}<br/>\n                {this.renderCheckbox('Place function in names first', 'functionFirst', {marginTop: 10})}<br/>\n                {this.renderInput('Concatenate words with', 'concatWord')}<br/>\n                {this.renderInput('Replace in names', 'replaces')}<br/>\n                <div className={this.props.classes.controlElement} style={{marginTop: 15}}>\n                    {this.renderInput('OFF level for switches in %', 'deviceOffLevel')}\n                    <FormHelperText>{I18n.t('(Set to 0 if behavior not desired)')}</FormHelperText>\n                </div>\n                <div className={this.props.classes.controlElement}>\n                    {this.renderInput('Write response to', 'responseOID')}\n                    <Fab size=\"small\" color=\"secondary\" onClick={() => this.setState({showSelectId: true})} aria-label=\"Add\" style={{marginLeft: 5, marginTop: 10}}><IconAdd /></Fab><br/>\n                </div>\n                <div className={this.props.classes.controlElement}>\n                    {this.renderCheckbox('Personal settings (only pro)', 'noCommon')}\n                    <FormHelperText>{Utils.renderTextWithA(I18n.t('help_tip'))}</FormHelperText><br/>\n                </div>\n                {this.renderCheckbox('Debug outputs', 'debug')}\n                {this.getSelectIdDialog('responseOID')}\n            </form>\n        );\n    }\n}\n\nExtendedOptions.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(ExtendedOptions);\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Input from '@material-ui/core/Input';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Fab from '@material-ui/core/Fab';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Chip from '@material-ui/core/Chip';\nimport {MdRefresh as IconRefresh} from 'react-icons/md';\nimport {MdClose as IconClose} from 'react-icons/md';\nimport {MdAdd as IconAdd} from 'react-icons/md';\n\nimport CopyContentImg from '../assets/copy-content.svg';\nimport I18n from '../i18n';\nimport Utils from '../Components/Utils'\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        minHeight: '100%'\n    },\n    input: {\n        marginTop: 0,\n        minWidth: 400\n    },\n    fullSize: {\n        width: 'calc(100% - 64px)'\n    },\n    button: {\n        marginRight: 20,\n    },\n    card: {\n        maxWidth: 345,\n        textAlign: 'center'\n    },\n    media: {\n        height: 180,\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20\n    },\n    columnLogo: {\n        width: 350,\n        marginRight: 0\n    },\n    columnSettings: {\n        width: 'calc(100% - 370px)',\n    },\n    controlElement: {\n        //background: '#d2d2d2',\n        marginBottom: 5\n    },\n    chips: {\n        border: '1px solid #DDD',\n        borderRadius: 1,\n        width: 'calc(100% - 250px)',\n        display: 'inline-block',\n        padding: 5,\n        minHeight: 32,\n        marginLeft: 10,\n        marginTop: 20\n    },\n    chip: {\n        marginRight: 5\n    }\n});\n\nclass Services extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            running: false,\n            toast: '',\n            text2commandList: [],\n            addValue: '',\n            isInstanceAlive: false\n        };\n        this.onKeyChangedBound = this.onKeyChanged.bind(this);\n\n        this.props.socket.getAdapterInstances('text2command')\n            .then(list => this.setState({text2commandList: list.map(obj => obj._id.replace('system.adapter.text2command.', ''))}));\n    }\n\n    componentWillMount() {\n        this.props.socket.subscribeState('iot.' + this.props.instance + '.certs.urlKey', this.onKeyChangedBound);\n\n        this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`).then(obj =>\n            this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state =>\n                this.setState({isInstanceAlive: obj && obj.common && obj.common.enabled && state && state.val})));\n    }\n\n    componentWillUnmount() {\n        this.props.socket.unsubscribeState('iot.' + this.props.instance + '.certs.urlKey', this.onKeyChangedBound);\n    }\n\n    onKeyChanged(id, state) {\n        this.setState({key: state.val});\n    }\n\n    renderInput(title, attr, type) {\n        return (<TextField\n            label={I18n.t(title)}\n            className={this.props.classes.input + ' ' + this.props.classes.controlElement}\n            value={this.props.native[attr]}\n            type={type || 'text'}\n            onChange={e => this.props.onChange(attr, e.target.value)}\n            margin=\"normal\"\n        />);\n    }\n\n    reissueUrlKey() {\n        this.setState({running: true});\n        return this.props.socket.setState('iot.' + this.props.instance + '.certs.urlKey', {val: '', ack: true})\n            .then(() => this.props.socket.getObject('system.adapter.iot.' + this.props.instance))\n            .then(obj => {\n                if (!obj || !obj.common || !obj.common.enabled) {\n                    this.setState({running: false, toast: I18n.t('Key will be updated after start')});\n                } else {\n                    return this.props.socket.setObject('system.adapter.iot.' + this.props.instance, obj);\n                }\n            })\n            .then(() => this.setState({running: false, toast: I18n.t('Certificates will be updated after initiated restart')}))\n            .catch(err => {\n                this.setState({running: false});\n                this.props.showError(err);\n            });\n    }\n\n    renderToast() {\n        if (!this.state.toast) return null;\n        return (\n            <Snackbar\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'left',\n                }}\n                open={true}\n                autoHideDuration={6000}\n                onClose={() => this.setState({toast: ''})}\n                ContentProps={{\n                    'aria-describedby': 'message-id',\n                }}\n                message={<span id=\"message-id\">{this.state.toast}</span>}\n                action={[\n                    <IconButton\n                        key=\"close\"\n                        aria-label=\"Close\"\n                        color=\"inherit\"\n                        className={this.props.classes.close}\n                        onClick={() => this.setState({toast: ''})}\n                    >\n                        <IconClose />\n                    </IconButton>,\n                ]}\n            />);\n    }\n\n    onChipsDelete(attr, value) {\n        const chips = (this.props.native[attr] || '').split(/[,;\\s]/).filter(a => !!a);\n        const pos = chips.indexOf(value);\n        if (pos !== -1) {\n            chips.splice(pos, 1);\n            this.props.onChange(attr, chips.join(' '));\n        }\n    }\n\n    onChipsAdd(attr) {\n        const chips = (this.props.native[attr] || '').split(/[,;\\s]/).filter(a => !!a);\n        const pos = chips.indexOf(this.state.addValue);\n        if (pos === -1) {\n            chips.push(this.state.addValue);\n            this.setState({addValue: ''}, () => this.props.onChange(attr, chips.join(' ')));\n        }\n    }\n\n    renderChips(label, attr) {\n        return (<div className={this.props.classes.chipsDiv}>\n            <FormHelperText>{Utils.renderTextWithA(I18n.t(label))}</FormHelperText>\n            <TextField\n                label={I18n.t('Add service')}\n                style={{width: 150}}\n                type={'text'}\n                value={this.state.addValue}\n                onKeyUp={e => e.keyCode === 13 && this.onChipsAdd(attr)}\n                onChange={e => this.setState({addValue: e.target.value.trim()})}\n                margin=\"normal\"\n            />\n\n            <Fab size=\"small\" color=\"secondary\" disabled={!this.state.addValue} onClick={() => this.onChipsAdd(attr)} style={{marginLeft: 5, marginTop: -15}}><IconAdd /></Fab>\n\n            <div className={this.props.classes.chips}>\n                {(this.props.native[attr] || '').split(/[,;\\s]/).filter(a => !!a)\n                .map(word =>\n                    (<Chip\n                        key={word}\n                        size=\"small\"\n                        label={word}\n                        onDelete={() => this.onChipsDelete(attr, word)}\n                        className={this.props.classes.chip}\n                    />))}\n            </div>\n        </div>);\n    }\n\n    render() {\n        return (\n            <form className={this.props.classes.tab}>\n                <Button\n                    variant=\"outlined\"\n                    disabled={!this.state.isInstanceAlive || this.state.running}\n                    color=\"primary\"\n                    title={!this.state.isInstanceAlive ? I18n.t('Instance must be enabled') : ''}\n                    onClick={() => this.reissueUrlKey()}>\n                    <IconRefresh />{I18n.t('Get new service URL key')}\n                </Button><br/>\n\n                {this.renderInput('IFTTT key', 'iftttKey')}<br/>\n\n                <TextField\n                    style={{marginTop: 10}}\n                    label={I18n.t('Use following link for IFTTT')}\n                    className={this.props.classes.input + ' ' + this.props.classes.controlElement + ' ' + this.props.classes.fullSize}\n                    value={`https://service.iobroker.in/v1/iotService?service=ifttt&key=${this.state.key}&user=${encodeURIComponent(this.props.native.login)}`}\n                    type=\"text\"\n                    readOnly={true}\n                    margin=\"normal\"\n                />\n                <Fab size=\"small\" style={{marginTop: 10, marginLeft: 5}} onClick={() => Utils.copyToClipboard(`https://service.iobroker.in/v1/iotService?service=ifttt&key=${this.state.key}&user=${encodeURIComponent(this.props.native.login)}`)} ><img src={CopyContentImg} alt=\"Copy\" /></Fab><br/>\n                <br/>\n\n                {this.renderChips('White list for services', 'allowedServices')}<br/>\n\n                <TextField\n                    style={{marginTop: 10}}\n                    label={I18n.t('Use following link for custom service')}\n                    className={this.props.classes.input + ' ' + this.props.classes.controlElement + ' ' + this.props.classes.fullSize}\n                    value={`https://service.iobroker.in/v1/iotService?service=custom_<SERVICE_NAME>&key=${this.state.key}&user=${encodeURIComponent(this.props.native.login)}&data=<SOME_TEXT>`}\n                    type=\"text\"\n                    readOnly={true}\n                    margin=\"normal\"\n                />\n                <Fab size=\"small\" style={{marginTop: 10, marginLeft: 5}} onClick={() => Utils.copyToClipboard(`https://service.iobroker.in/v1/iotService?service=custom_<SERVICE_NAME>&key=${this.state.key}&user=${encodeURIComponent(this.props.native.login)}&data=<SOME_TEXT>`)}><img src={CopyContentImg} alt=\"Copy\" /></Fab><br/>\n\n                <FormControl className={this.props.classes.input + ' ' + this.props.classes.controlElement} style={{paddingTop: 20}}>\n                    <Select\n                        value={this.props.native.text2command || '_'}\n                        onChange={e => this.props.onChange('text2command', e.target.value === '_' ? '' : e.target.value)}\n                        input={<Input name=\"text2command\" id=\"text2command-helper\" />}\n                    >\n                        <MenuItem key=\"key-default\" value={'_'}>{I18n.t('disabled')}</MenuItem>\n                        {this.state.text2commandList.map(item => (<MenuItem key={'key-' + item} value={item}>text2command.{item}</MenuItem>))}\n                    </Select>\n                    <FormHelperText>{I18n.t('Use text2command instance')}</FormHelperText>\n                </FormControl>\n                {this.renderToast()}\n            </form>\n        );\n    }\n}\n\nServices.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    adapterName: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n    onShowError: PropTypes.func,\n};\n\nexport default withStyles(styles)(Services);\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Utils from '../Components/Utils'\nimport Switch from '@material-ui/core/Switch';\nimport {MdEdit as IconEdit} from 'react-icons/md';\n\nimport I18n from '../i18n';\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport MessageDialog from '../Dialogs/Message';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst CHANGED_COLOR = '#e7000040';\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        height: '100%'\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20,\n        height: '100%',\n        overflow: 'hidden',\n        width: 'calc(50% - 20px)',\n        minWidth: 300,\n        maxWidth: 450\n    },\n    columnDiv: {\n        height: 'calc(100% - 60px)',\n        overflow: 'auto',\n        minWidth: 300\n    },\n    enumLineEnabled: {\n        position: 'absolute',\n        right: 0,\n        top: 0,\n    },\n    enumLineEdit: {\n        //float: 'right'\n        position: 'absolute',\n        top: 5,\n        right: 50\n    },\n    enumLineName: {\n\n    },\n    enumLineSubName:{\n        fontStyle: 'italic',\n    },\n    enumLine: {\n        height: 48,\n        width: '100%',\n        position: 'relative'\n    },\n    enumLineId: {\n        display: 'block',\n        fontStyle: 'italic',\n        fontSize: 12\n    },\n    columnHeader: {\n        background: theme.palette.primary.light,\n        padding: 10,\n        color: theme.palette.primary.contrastText\n    }\n});\n\nclass Enums extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            inAction: false,\n            editId: '',\n            editedSmartName: '',\n            funcs: [],\n            rooms: [],\n            changed: [],\n            message: '',\n            loading: true,\n        };\n\n        this.onEnumUpdateBound = this.onEnumUpdate.bind(this);\n\n        this.props.socket.getEnums()\n            .then(res => {\n                const funcs = [];\n                const rooms = [];\n                Object.keys(res).forEach(id => {\n                    if (id.match(/^enum\\.rooms\\./)) {\n                        rooms.push(res[id]);\n                    } else\n                    if (id.match(/^enum\\.functions\\./)) {\n                        funcs.push(res[id]);\n                    }\n                });\n\n                this.setState({funcs, rooms, loading: false});\n                return this.props.socket.subscribeObject('enum.*', this.onEnumUpdateBound);\n            });\n    }\n\n    componentWillUnmount() {\n        this.props.socket.unsubscribeObject('enum.*', this.onEnumUpdateBound).then(() => {});\n    }\n\n    onEnumUpdate(id, obj) {\n        this.removeChanged(id);\n        this.updateObjInState(id, obj);\n    }\n\n    informInstance(id) {\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'update', id);\n    }\n\n    addChanged(id) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        if (changed.indexOf(id) === -1) {\n            changed.push(id);\n            this.setState({changed});\n        }\n    }\n\n    removeChanged(id) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        const pos = changed.indexOf(id);\n\n        if (pos !== -1) {\n            changed.splice(pos, 1);\n            this.setState({changed});\n        }\n    }\n\n    updateObjInState(id, obj) {\n        // update obj\n        if (id.match(/^enum\\.functions\\./)) {\n            for (let i = this.state.funcs.length - 1; i >= 0 ; i--) {\n                if (this.state.funcs[i]._id === id) {\n                    const funcs = JSON.parse(JSON.stringify(this.state.funcs));\n                    if (obj) {\n                        funcs[i] = obj;\n                    } else {\n                        funcs.splice(i, 1);\n                    }\n                    this.setState({funcs});\n                    break;\n                }\n            }\n        } else\n        if (id.match(/^enum\\.rooms\\./)) {\n            for (let i = this.state.rooms.length - 1; i >= 0; i--) {\n                if (this.state.rooms[i]._id === id) {\n                    const rooms = JSON.parse(JSON.stringify(this.state.rooms));\n                    if (obj) {\n                        rooms[i] = obj;\n                    } else {\n                        rooms.splice(i, 1);\n                    }\n                    this.setState({rooms});\n                    break;\n                }\n            }\n        }\n    }\n\n    onToggleEnum(id) {\n        let obj = this.state.funcs.find(e => e._id === id) || this.state.rooms.find(e => e._id === id);\n\n        let smartName = Utils.getSmartNameFromObj(obj);\n        obj = JSON.parse(JSON.stringify(obj));\n        if (smartName !== false) {\n            Utils.disableSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n        } else {\n            Utils.removeSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n        }\n\n        this.addChanged(id);\n\n        this.props.socket.setObject(id, obj)\n            .then(() => {\n                // update obj\n                this.updateObjInState(id, obj);\n                this.informInstance(id);\n\n                setTimeout(() => this.removeChanged(id), 500);\n            });\n    }\n\n    onEdit(id) {\n        const obj = this.state.funcs.find(e => e._id === id) || this.state.rooms.find(e => e._id === id);\n        let smartName = Utils.getSmartNameFromObj(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n        if (typeof smartName === 'object' && smartName) {\n            smartName = smartName[I18n.getLanguage()] || smartName.en;\n        }\n        smartName = smartName || Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\n        this.setState({editId: id, editedSmartName: smartName});\n    }\n\n    renderEnum(obj) {\n        let smartName = Utils.getSmartNameFromObj(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n        // convert old format\n        if (smartName && typeof smartName === 'object') {\n            smartName = smartName[I18n.getLanguage()] || smartName.en || '';\n        }\n        let name = Utils.getObjectNameFromObj(obj);\n\n        return (<div key={obj._id} className={this.props.classes.enumLine} style={{background: this.state.changed.indexOf(obj._id) !== -1 ? CHANGED_COLOR : 'inherit'}}>\n            <span className={this.props.classes.enumLineName} style={{opacity: smartName === false ? 0.5: 1}}>{smartName || null}{smartName ? (<span className={this.props.classes.enumLineSubName}> ({name})</span>) : name}</span>\n            <span className={this.props.classes.enumLineId} style={{opacity: smartName === false ? 0.5: 1}}>{obj._id}</span>\n            <Switch\n                className={this.props.classes.enumLineEnabled}\n                checked={smartName !== false}\n                onChange={() => this.onToggleEnum(obj._id)}\n            />\n            <IconButton aria-label=\"Edit\" className={this.props.classes.enumLineEdit} onClick={() => this.onEdit(obj._id)}>\n                <IconEdit fontSize=\"small\" />\n            </IconButton>\n\n        </div>);\n    }\n\n    renderEnums(name) {\n        return this.state[name].map(e => this.renderEnum(e));\n    }\n\n    renderMessage() {\n        if (this.state.message) {\n            return (<MessageDialog text={this.state.message} onClose={() => this.setState({message: ''})}/>);\n        } else {\n            return null;\n        }\n    }\n\n    changeSmartName() {\n        // Check if the name is duplicate\n        let enums = this.state.editId.startsWith('enum.functions.') ? this.state.funcs : this.state.rooms;\n        if (enums.find(obj =>\n            this.state.editId !== obj._id && (\n            this.state.editedSmartName === Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()}) ||\n            this.state.editedSmartName === Utils.getSmartNameFromObj(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon)))) {\n            this.setState({message: I18n.t('Duplicate name')});\n        } else {\n            this.addChanged(this.state.editId);\n            setTimeout(() => this.removeChanged(this.state.editId), 500);\n            const id = this.state.editId;\n            this.setState({editId: ''});\n            let newObj;\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, this.state.editedSmartName, undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    newObj = obj;\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.updateObjInState(id, newObj);\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        }\n    }\n\n    renderEditDialog() {\n        if (this.state.editId) {\n            const obj = this.state.funcs.find(e => e._id === this.state.editId) || this.state.rooms.find(e => e._id === this.state.editId);\n\n            return (<Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"message-dialog-title\"\n                aria-describedby=\"message-dialog-description\"\n            >\n                <DialogTitle id=\"message-dialog-title\">{this.props.title || I18n.t('Smart name for %s', Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()}))}</DialogTitle>\n                <DialogContent>\n                    <TextField\n                        style={{width: '100%'}}\n                        label={I18n.t('Smart name')}\n                        onChange={e => this.setState({editedSmartName: e.target.value})}\n                        value={this.state.editedSmartName}\n                        helperText={I18n.t('You can enter several names divided by comma')}\n                        margin=\"normal\"\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.changeSmartName()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\n                    <Button onClick={() => this.setState({editId: ''})}>{I18n.t('Cancel')}</Button>\n                </DialogActions>\n            </Dialog>)\n        } else {\n            return null;\n        }\n    }\n\n    render() {\n        if (this.state.loading) {\n            return (<CircularProgress />);\n        }\n        return (\n            <form className={this.props.classes.tab}>\n                <div className={this.props.classes.column}>\n                    <h5 className={this.props.classes.columnHeader}>{I18n.t('Rooms')}</h5>\n                    <div className={this.props.classes.columnDiv}>{this.renderEnums('rooms')}</div>\n                </div>\n                <div className={this.props.classes.column}>\n                    <h5 className={this.props.classes.columnHeader}>{I18n.t('Functions')}</h5>\n                    <div className={this.props.classes.columnDiv}>{this.renderEnums('funcs')}</div>\n                </div>\n                {this.renderMessage()}\n                {this.renderEditDialog()}\n            </form>\n        );\n    }\n}\n\nEnums.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    adapterName: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Enums);\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Utils from '../Components/Utils'\nimport Fab from '@material-ui/core/Fab';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Input from '@material-ui/core/Input';\nimport Badge from '@material-ui/core/Badge';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\n\nimport {MdEdit as IconEdit} from 'react-icons/md';\nimport {MdAdd as IconAdd} from 'react-icons/md';\nimport {MdRefresh as IconRefresh} from 'react-icons/md';\nimport {MdClear as IconClear} from 'react-icons/md';\nimport {MdDelete as IconDelete} from 'react-icons/md';\nimport {MdFormatAlignJustify as IconExpand} from 'react-icons/md';\nimport {MdDragHandle as IconCollapse} from 'react-icons/md';\n\nimport {FaPowerOff as IconOn} from 'react-icons/fa';\nimport {FaThermometerHalf as IconTemperature} from 'react-icons/fa';\nimport {FaLongArrowAltUp as IconUp} from 'react-icons/fa';\nimport {FaLongArrowAltDown as IconDown} from 'react-icons/fa';\nimport {FaPercentage as IconPercentage} from 'react-icons/fa';\nimport {FaPalette as IconColor} from 'react-icons/fa';\nimport {FaLightbulb as IconBulb} from 'react-icons/fa';\nimport {FaLockOpen as IconLock} from 'react-icons/fa';\nimport {FaThermometer as IconThermometer} from 'react-icons/fa';\n\nimport I18n from '../i18n';\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport MessageDialog from '../Dialogs/Message';\nimport DialogSelectID from '../Dialogs/SelectID';\n\nconst colorOn = '#aba613';\nconst colorOff = '#444';\nconst colorSet = '#00c6ff';\nconst colorRead = '#00bc00';\nconst CHANGED_COLOR = '#e7000040';\nconst DEFAULT_CHANNEL_COLOR = '#e9e9e9';\nconst LAST_CHANGED_COLOR = '#b4ffbe';\n\nconst actionsMapping = {\n    turnOn: {color: colorOn, icon: IconOn, desc: 'Turn on'},\n    turnOff: {color: colorOff, icon: IconOn, desc: 'Turn off'},\n\n    setTargetTemperature: {color: colorSet, icon: IconTemperature, desc: 'Set target temperature'},\n    incrementTargetTemperature: {color: colorOn, icon: IconUp, desc: 'Increment target temperature'},\n    decrementTargetTemperature: {color: colorOff, icon: IconDown, desc: 'Decrement target temperature'},\n\n    setPercentage: {color: colorSet, icon: IconPercentage, desc: 'Set percentage'},\n    incrementPercentage: {color: colorOn, icon: IconUp, desc: 'Increment percentage'},\n    decrementPercentage: {color: colorOff, icon: IconDown, desc: 'Decrement percentage'},\n\n    setColor: {color: colorSet, icon: IconColor, desc: 'Set color'},\n\n    setColorTemperature: {color: colorSet, icon: IconBulb, desc: 'Set color temperature'},\n    incrementColorTemperature: {color: colorOn, icon: IconUp, desc: 'Increment color temperature'},\n    decrementColorTemperature: {color: colorOff, icon: IconDown, desc: 'Decrement color temperature'},\n\n    getTargetTemperature: {color: colorRead, icon: IconThermometer, desc: 'Get target temperature'},\n    getTemperatureReading: {color: colorRead, icon: IconThermometer, desc: 'Get actual temperature'},\n\n    setLockState: {color: colorSet, icon: IconLock, desc: 'Set lock state'},\n    getLockState: {color: colorRead, icon: IconLock, desc: 'Read lock state'},\n};\n\nconst SMARTTYPES = ['LIGHT', 'SWITCH', 'THERMOSTAT', 'ACTIVITY_TRIGGER', 'SCENE_TRIGGER', 'SMARTPLUG', 'SMARTLOCK', 'CAMERA'];\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        height: '100%'\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20,\n        height: '100%',\n        overflow: 'hidden'\n    },\n    columnDiv: {\n        height: 'calc(100% - 40px)',\n        overflow: 'auto',\n        minWidth: 300\n    },\n    filter: {\n        margin: 0\n    },\n    button: {\n        marginRight: 20\n    },\n    devLineExpand: {\n        marginRight: 10,\n    },\n    devLineEnabled: {\n        position: 'absolute',\n        right: 0,\n        top: 0,\n    },\n    devLineEdit: {\n        position: 'absolute',\n        top: 5,\n        right: 50\n    },\n    devLineDelete: {\n        position: 'absolute',\n        top: 5,\n        right: 0\n    },\n    devLineName: {\n\n    },\n    devLineNumber:{\n        display: 'inline-block',\n        verticalAlign: 'middle',\n        width: 15,\n    },\n    editedId: {\n        fontStyle: 'italic'\n    },\n    enumLineSubName:{\n        fontStyle: 'italic',\n    },\n    devLine: {\n        height: 48,\n        width: '100%',\n        position: 'relative'\n    },\n    devLineDescription: {\n        display: 'block',\n        fontStyle: 'italic',\n        fontSize: 12\n    },\n    devLineActions: {\n        fontStyle: 'italic',\n        fontSize: 12,\n        paddingLeft: 50,\n        display: 'inline-block',\n    },\n    devLineProgress: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n    },\n    channelLineActions: {\n        width: 80\n    },\n    devLineNameBlock: {\n        display: 'inline-block',\n        width: 'calc(100% - 350px)'\n    },\n    columnHeader: {\n        background: theme.palette.primary.light,\n        padding: 10,\n        color: theme.palette.primary.contrastText\n    },\n    devModified: {\n        fontStyle: 'italic'\n    },\n    actionIcon: {\n        width: 16\n    },\n\n    devSubLine: {\n        position: 'relative',\n        height: 48\n    },\n    devSubLineName: {\n        marginLeft: 5,\n        marginTop: 14,\n        display: 'inline-block',\n        fontSize: 13,\n        width: 'calc(100% - 400px)'\n    },\n    devSubSubLineName:  {\n        fontSize: 8,\n        fontStyle: 'italic',\n        display: 'block'\n    },\n    devSubLineByOn: {\n        marginLeft: 5\n    },\n    devSubLineDelete: {\n        position: 'absolute',\n        top: 12,\n        right: 12,\n        padding: 0\n    },\n    devSubLineEdit: {\n        position: 'absolute',\n        top: 12,\n        right: 62,\n        padding: 0\n    },\n    devSubLineTypeTitle: {\n        marginTop: 0\n    }\n});\n\nclass AlexaSmartNames extends Component {\n    constructor(props) {\n        super(props);\n\n        if (!actionsMapping.translated) {\n            Object.keys(actionsMapping).forEach(a => actionsMapping[a].desc = I18n.t(actionsMapping[a].desc));\n            actionsMapping.translated = true;\n        }\n\n        this.state = {\n            editedSmartName: '',\n            editId: '',\n            editObjectName: '',\n            deleteId: '',\n\n            showSelectId: false,\n            showConfirmation: '',\n            changed: [],\n            devices: [],\n            message: '',\n            filter: '',\n            loading: true,\n            browse: false,\n            expanded: [],\n            lastChanged: ''\n        };\n\n        this.timerChanged = null;\n        this.browseTimer = null;\n        this.browseTimerCount = 0;\n        this.editedSmartName = '';\n\n        this.waitForUpdateID = null;\n        this.onReadyUpdateBound = this.onReadyUpdate.bind(this);\n        this.onResultUpdateBound = this.onResultUpdate.bind(this);\n\n        this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`).then(obj => {\n            this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state => {\n                if (!obj || !obj.common || (!obj.common.enabled && (!state || !state.val))) {\n                    this.setState({message: I18n.t('Instance must be enabled'), loading: false, devices: []});\n                } else {\n                    this.browse();\n                }\n            });\n        });\n    }\n\n    browse(isIndicate) {\n        if (Date.now() - this.lastBrowse < 500) return;\n        this.lastBrowse = Date.now();\n        if (isIndicate) {\n            this.setState({loading: true, browse: true});\n        } else {\n            this.setState({browse: true});\n        }\n        console.log('Send BROWSE!');\n        this.browseTimer = setTimeout(() => {\n            console.log('Browse timeout!');\n            this.browseTimer = null;\n            this.browseTimerCount++;\n            if (this.browseTimerCount < 5) {\n                this.browse(isIndicate);\n            } else {\n                this.setState({message: I18n.t('Cannot read devices!')});\n            }\n        }, 10000);\n\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'browse', null, list => {\n            this.browseTimer && clearTimeout(this.browseTimer);\n            this.browseTimerCount = 0;\n            this.browseTimer = null;\n            if (this.waitForUpdateID) {\n                if (!this.onEdit(this.waitForUpdateID, list)) {\n                    this.setState({message: I18n.t('Device %s was not added', this.waitForUpdateID)});\n                }\n                this.waitForUpdateID = null;\n            }\n            console.log('BROWSE received.');\n\n            this.setState({devices: list, loading: false, changed: [], browse: false});\n        });\n    }\n\n    onReadyUpdate(id, state) {\n        console.log('Update ' + id + ' ' + state.val + '/' + state.ack);\n        if (state && state.ack === true && state.val === true) {\n            if (this.devTimer) clearTimeout(this.devTimer);\n            this.devTimer = setTimeout(() => {\n                this.devTimer = null;\n                this.browse();\n            }, 300);\n        }\n    }\n\n    onResultUpdate(id, state) {\n        state && state.ack === true && state.val && this.setState({message: state.val});\n    }\n\n    componentWillMount() {\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updates`, this.onReadyUpdateBound);\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\n    }\n\n    componentWillUnmount() {\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updates`, this.onReadyUpdateBound);\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\n        if (this.timerChanged) {\n            clearTimeout(this.timerChanged);\n            this.timerChanged = null;\n        }\n    }\n\n    informInstance(id) {\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'update', id);\n    }\n\n    addChanged(id, cb) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        if (changed.indexOf(id) === -1) {\n            changed.push(id);\n            this.setState({changed}, () => cb && cb());\n        } else {\n            cb && cb();\n        }\n    }\n\n    removeChanged(id) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        const pos = changed.indexOf(id);\n\n        if (pos !== -1) {\n            changed.splice(pos, 1);\n            this.setState({changed});\n        }\n    }\n\n    onEdit(id, devices) {\n        devices = devices || this.state.devices;\n        const device = devices.find(dev => dev.additionalApplianceDetails.id === id);\n        if (device) {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    let smartName = device.additionalApplianceDetails.friendlyNames ? device.additionalApplianceDetails.friendlyNames : device.friendlyName;\n                    if (typeof smartName === 'object' && smartName) {\n                        smartName = smartName[I18n.getLanguage()] || smartName.en;\n                    }\n                    this.editedSmartName = smartName;\n                    this.setState({editId: id, editedSmartName: smartName, editObjectName: Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()})});\n                });\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    onAskDelete(deleteId) {\n        this.setState({deleteId, showConfirmation: true});\n    }\n\n    onDelete() {\n        let id = this.state.deleteId;\n        // const device = this.state.devices.find(dev => dev.additionalApplianceDetails.id === id);\n        this.addChanged(id, () => {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.disableSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    this.setState({deleteId: '', showConfirmation: false, lastChanged: id});\n\n                    this.timerChanged && clearTimeout(this.timerChanged);\n                    this.timerChanged = setTimeout(() => {\n                        this.setState({lastChanged: ''});\n                        this.timerChanged = null;\n                    }, 30000);\n\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderActions(dev) {\n        // Type\n        const actions = [];\n        if (!dev.actions) {\n            console.log('Something went wrong');\n            return null;\n        }\n        dev.actions.sort((a, b) => {\n            if (a === b) return 0;\n            if (a === 'turnOn') return -1;\n            if (b === 'turnOn') return 1;\n\n            if (a === 'turnOff') return -1;\n            if (b === 'turnOff') return 1;\n            return 0;\n        });\n\n        Object.keys(actionsMapping).forEach(action => {\n            if (dev.actions.indexOf(action) !== -1) {\n                const Icon = actionsMapping[action].icon;\n                actions.push((<span key={action} title={actionsMapping[action].desc}><Icon className={this.props.classes.actionIcon} style={{color: actionsMapping[action].color}}/></span>));\n            }\n        });\n        // add unknown actions\n        for (let a = 0; a < dev.actions.length; a++) {\n            if (!actionsMapping[dev.actions[a]]) {\n                actions.push((<span key={dev.actions[a]}>{dev.actions[a]}</span>));\n            }\n        }\n        return actions;\n    }\n\n    onExpand(lineNum) {\n        const expanded = JSON.parse(JSON.stringify(this.state.expanded));\n        const pos = expanded.indexOf(this.state.devices[lineNum].friendlyName);\n        if (pos === -1) {\n            expanded.push(this.state.devices[lineNum].friendlyName);\n        } else {\n            expanded.splice(pos, 1);\n        }\n        this.setState({expanded});\n    }\n\n    renderSelectByOn(dev, lineNum, id, type) {\n        // type = '-', 'stored', false or number [5-100]\n        if (type !== false) {\n            const items = [\n                (<MenuItem key=\"_\" value=\"\"><em>{I18n.t('Default')}</em></MenuItem>),\n                (<MenuItem key=\"last\" value=\"stored\">{I18n.t('last value')}</MenuItem>)\n            ];\n            for (let i = 5; i <= 100; i += 5) {\n                items.push((<MenuItem  key={i.toString()} value={i.toString()}>{i}%</MenuItem>));\n            }\n            return (<FormControl className={this.props.classes.devSubLineByOn}>\n                <Select className={this.props.classes.devSubLineByOnSelect} value={(type || '').toString()} onChange={e => this.onParamsChange(id, e.target.value)}>{items}</Select>\n                <FormHelperText className={this.props.classes.devSubLineTypeTitle}>{I18n.t('by ON')}</FormHelperText>\n            </FormControl>);\n        } else {\n            return null;\n        }\n    }\n\n    onParamsChange(id, byON, type) {\n        this.addChanged(id, () => {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, undefined, byON, type, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n\n                    if (this.state.lastChanged !== id) {\n                        this.setState({lastChanged: id});\n                        this.timerChanged && clearTimeout(this.timerChanged);\n                        this.timerChanged = setTimeout(() => {\n                            this.setState({lastChanged: ''});\n                            this.timerChanged = null;\n                        }, 30000);\n                    }\n\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderSelectType(dev, lineNum, id, type) {\n        if (type !== false) {\n            const items = [\n                (<MenuItem key=\"_\" value=\"_\"><em>{I18n.t('no type')}</em></MenuItem>)\n            ];\n            for (let i = 0; i < SMARTTYPES.length; i++) {\n                items.push((<MenuItem  key={SMARTTYPES[i]} value={SMARTTYPES[i]}><em>{I18n.t(SMARTTYPES[i])}</em></MenuItem>));\n            }\n            return (\n                <FormControl>\n                    <Select value={type || '_'} onChange={e => this.onParamsChange(id, undefined, e.target.value)}>{items}</Select>\n                    <FormHelperText className={this.props.classes.devSubLineTypeTitle}>{I18n.t('Types')}</FormHelperText>\n                </FormControl>);\n        } else {\n            return '';\n        }\n    }\n\n    renderChannels(dev, lineNum) {\n        const result = [];\n        const classes = this.props.classes;\n\n        if (dev.additionalApplianceDetails.group) {\n            const channels   = dev.additionalApplianceDetails.channels;\n            const names      = dev.additionalApplianceDetails.names;\n            const types      = dev.additionalApplianceDetails.byONs;\n            const smarttypes = dev.additionalApplianceDetails.smartTypes;\n\n            let c = 0;\n            for (const chan in channels) {\n                if (channels.hasOwnProperty(chan)) {\n                    for (let i = 0; i < channels[chan].length; i++) {\n                        const id = channels[chan][i].id;\n                        let background = this.state.changed.indexOf(id) !== -1 ? CHANGED_COLOR : DEFAULT_CHANNEL_COLOR;\n                        if (this.state.lastChanged === id && background === DEFAULT_CHANNEL_COLOR) {\n                            background = LAST_CHANGED_COLOR;\n                        }\n                        result.push((<div key={'sub' + id} className={classes.devSubLine} style={(c % 2) ? {} : {background}}>\n                            <div className={this.props.classes.devLineActions + ' ' + this.props.classes.channelLineActions}>{this.renderActions(channels[chan][i])}</div>\n                            <div className={classes.devSubLineName} title={id}>{(names[id] || id)}\n                                {id !== names[id] ? (<span className={classes.devSubSubLineName}>{id}</span>) : null}\n                            </div>\n                            {this.renderSelectType(dev, lineNum, id, smarttypes[id])}\n                            {this.renderSelectByOn(dev, lineNum, id, types[id])}\n                            <IconButton aria-label=\"Delete\" className={this.props.classes.devSubLineDelete} onClick={() => this.onAskDelete(id, lineNum)}><IconDelete fontSize=\"middle\" /></IconButton>\n                        </div>));\n                        c++;\n                    }\n                }\n            }\n        } else {\n            const id = dev.additionalApplianceDetails.id;\n            const name = dev.additionalApplianceDetails.name || id;\n            let background = this.state.changed.indexOf(id) !== -1 ? CHANGED_COLOR : DEFAULT_CHANNEL_COLOR;\n            if (this.state.lastChanged === id && background === DEFAULT_CHANNEL_COLOR) {\n                background = LAST_CHANGED_COLOR;\n            }\n            result.push((<div key={'sub' + id} className={classes.devSubLine} style={{background}}>\n                <div className={this.props.classes.devLineActions + ' ' + this.props.classes.channelLineActions} style={{width: 80}}>{this.renderActions(dev)}</div>\n                <div className={classes.devSubLineName} title={(id || '')}>{name}</div>\n                {this.renderSelectType(dev, lineNum, id, dev.additionalApplianceDetails.smartType)}\n                {this.renderSelectByOn(dev, lineNum, id, dev.additionalApplianceDetails.byON)}\n            </div>));\n        }\n        return result;\n    }\n\n    renderDevice(dev, lineNum) {\n        let friendlyName = dev.friendlyName;\n        let title;\n        if (!dev.additionalApplianceDetails.group && dev.additionalApplianceDetails.nameModified) {\n            title = friendlyName;\n        } else {\n            title = (<span className={this.props.classes.devModified} title={I18n.t('modified')}>{friendlyName}</span>);\n        }\n\n        let devCount = 0;\n        for (const ch in dev.additionalApplianceDetails.channels) {\n            if (dev.additionalApplianceDetails.channels.hasOwnProperty(ch)) {\n                devCount += dev.additionalApplianceDetails.channels[ch].length;\n            }\n        }\n        devCount = devCount || 1;\n        const expanded = this.state.expanded.indexOf(friendlyName) !== -1;\n        const id = dev.additionalApplianceDetails.id;\n\n        let background = (lineNum % 2) ? '#f1f1f1' : 'inherit';\n        const changed = this.state.changed.indexOf(id) !== -1;\n        if (changed) {\n            background = CHANGED_COLOR;\n        } else if (id === this.state.lastChanged) {\n            background = LAST_CHANGED_COLOR;\n        }\n\n        // If some of sub channels in change list or in last changed\n        if (dev.additionalApplianceDetails.group && !changed && id !== this.state.lastChanged) {\n            const channels = dev.additionalApplianceDetails.channels;\n            for (const chan in channels) {\n                if (channels.hasOwnProperty(chan)) {\n                    for (let i = 0; i < channels[chan].length; i++) {\n                        const id = channels[chan][i].id;\n                        if (this.state.changed.indexOf(id) !== -1) {\n                            background = CHANGED_COLOR;\n                        } else if (this.state.lastChanged === id) {\n                            background = LAST_CHANGED_COLOR;\n                        }\n                    }\n                }\n            }\n        }\n\n        return [\n            (<div key={'line' + lineNum} className={this.props.classes.devLine} style={{background}}>\n                <div className={this.props.classes.devLineNumber}>{lineNum + 1}.</div>\n                <IconButton className={this.props.classes.devLineExpand} onClick={() => this.onExpand(lineNum)}>\n                    {devCount > 1 ?\n                        (<Badge badgeContent={devCount} color=\"primary\">\n                            {expanded ? (<IconCollapse/>) : (<IconExpand />)}\n                        </Badge>) :\n                        (expanded ? (<IconCollapse/>) : (<IconExpand />))}\n                </IconButton>\n                <div className={this.props.classes.devLineNameBlock} style={{display: 'inline-block', position: 'relative'}}>\n                    <span className={this.props.classes.devLineName}>{title}</span>\n                    <span className={this.props.classes.devLineDescription}>{dev.friendlyDescription}</span>\n                    {changed ? (<CircularProgress className={this.props.classes.devLineProgress} size={20}/>) : null}\n                </div>\n                <span className={this.props.classes.devLineActions}>{this.renderActions(dev)}</span>\n                {!dev.additionalApplianceDetails.group ?\n                    (<IconButton aria-label=\"Edit\" className={this.props.classes.devLineEdit} onClick={() => this.onEdit(id)}><IconEdit fontSize=\"middle\" /></IconButton>) : null}\n                {!dev.additionalApplianceDetails.group ?\n                    (<IconButton aria-label=\"Delete\" className={this.props.classes.devLineDelete} onClick={() => this.onAskDelete(id)}><IconDelete fontSize=\"middle\" /></IconButton>) : null}\n            </div>),\n            expanded ? this.renderChannels(dev, lineNum) : null\n        ];\n    }\n\n    renderMessage() {\n        if (this.state.message) {\n            return (<MessageDialog text={this.state.message} onClose={() => this.setState({message: ''})}/>);\n        } else {\n            return null;\n        }\n    }\n\n    changeSmartName(e) {\n        e && e.preventDefault();\n        // Check if the name is duplicate\n        this.addChanged(this.state.editId, () => {\n            const id = this.state.editId;\n            this.setState({editId: '', editObjectName: '', lastChanged: id});\n\n            this.timerChanged && clearTimeout(this.timerChanged);\n            this.timerChanged = setTimeout(() => {\n                this.setState({lastChanged: ''});\n                this.timerChanged = null;\n            }, 30000);\n\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, this.editedSmartName, undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderEditDialog() {\n        if (this.state.editId) {\n            return (<Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"message-dialog-title\"\n                aria-describedby=\"message-dialog-description\"\n            >\n                <DialogTitle id=\"message-dialog-title\">{this.props.title || I18n.t('Smart name for %s', this.state.editObjectName)}</DialogTitle>\n                <DialogContent>\n                    <p><span>ID:</span> <span className={this.props.classes.editedId}>{this.state.editId}</span></p>\n                    <TextField\n                        style={{width: '100%'}}\n                        label={I18n.t('Smart name')}\n                        onKeyDown={e =>\n                            e.keyCode === 13 && this.changeSmartName(e)}\n                        onChange={e => this.editedSmartName = e.target.value}\n                        defaultValue={this.state.editedSmartName}\n                        helperText={I18n.t('You can enter several names divided by comma')}\n                        margin=\"normal\"\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.changeSmartName()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\n                    <Button onClick={() => {\n                        this.editedSmartName = null;\n                        this.setState({editId: '', editedSmartName: ''});\n                    }}>{I18n.t('Cancel')}</Button>\n                </DialogActions>\n            </Dialog>)\n        } else {\n            return null;\n        }\n    }\n\n    renderConfirmDialog() {\n        if (this.state.showConfirmation) {\n            return (<Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"confirmation-dialog-title\"\n                aria-describedby=\"confirmation-dialog-description\"\n            >\n                <DialogTitle id=\"confirmation-dialog-title\">{this.props.title || I18n.t('Device will be disabled.')}</DialogTitle>\n                <DialogContent>\n                    <p>{I18n.t('Are you sure?')}</p>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.onDelete()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\n                    <Button onClick={() => this.setState({showConfirmation: ''})}>{I18n.t('Cancel')}</Button>\n                </DialogActions>\n            </Dialog>)\n        } else {\n            return null;\n        }\n    }\n\n    getSelectIdDialog() {\n        if (this.state.showSelectId) {\n            return (<DialogSelectID\n                key=\"dialogSelectID1\"\n                prefix={'../..'}\n                connection={this.props.socket}\n                selected={''}\n                statesOnly={true}\n                onClose={() => this.setState({showSelectId: false})}\n                onOk={(selected, name) => {\n                    this.setState({showSelectId: false});\n\n                    this.props.socket.getObject(selected)\n                        .then(obj => {\n                            if (obj) {\n                                const name = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\n                                Utils.updateSmartName(obj, (name || I18n.t('Device name')).replace(/[-_.]+/g, ' '), undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                                this.addChanged(obj._id);\n                                this.waitForUpdateID = obj._id;\n\n                                if (this.state.lastChanged !== obj._id) {\n                                    this.setState({lastChanged: obj._id});\n                                    this.timerChanged && clearTimeout(this.timerChanged);\n                                    this.timerChanged = setTimeout(() => {\n                                        this.setState({lastChanged: ''});\n                                        this.timerChanged = null;\n                                    }, 30000);\n                                }\n\n                                this.props.socket.setObject(obj._id, obj)\n                                    .then(() => this.informInstance(obj._id))\n                                    .catch(err => this.setState({message: err}));\n                            } else {\n                                this.setState({message: I18n.t('Invalid ID')});\n                            }\n                        });\n                }}\n            />);\n        } else {\n            return null;\n        }\n    }\n\n    renderDevices() {\n        const filter = this.state.filter.toLowerCase();\n        const result = [];\n        for (let i = 0; i < this.state.devices.length; i++) {\n            if (this.state.filter && this.state.devices[i].friendlyName.toLowerCase().indexOf(filter) === -1 ) continue;\n            result.push(this.renderDevice(this.state.devices[i], i));\n        }\n        return (<div key=\"listDevices\" className={this.props.classes.columnDiv}>{result}</div>);\n    }\n\n    render() {\n        if (this.state.loading) {\n            return (<CircularProgress  key=\"alexaProgress\" />);\n        }\n\n        return (\n            <form key=\"alexa\" className={this.props.classes.tab}>\n                <Fab size=\"small\" color=\"secondary\" aria-label=\"Add\" className={this.props.classes.button} onClick={() => this.setState({showSelectId: true})}><IconAdd /></Fab>\n                <Fab size=\"small\" color=\"primary\" aria-label=\"Refresh\" className={this.props.classes.button}\n                      onClick={() => this.browse(true)} disabled={this.state.browse}>{this.state.browse ? (<CircularProgress size={20} />) : (<IconRefresh/>)}</Fab>\n\n                <Input\n                    placeholder={I18n.t('Filter')}\n                    className={this.state.filter}\n                    value={this.state.filter}\n                    onChange={e => this.setState({filter: e.target.value})}\n                />\n                <IconButton aria-label=\"Clear\" className={this.props.classes.button} onClick={() => this.setState({filter: ''})}><IconClear fontSize=\"large\" /></IconButton>\n                {this.renderDevices()}\n                {this.renderMessage()}\n                {this.renderEditDialog()}\n                {this.getSelectIdDialog()}\n                {this.renderConfirmDialog()}\n            </form>\n        );\n    }\n}\n\nAlexaSmartNames.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    adapterName: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(AlexaSmartNames);\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Utils from '../Components/Utils'\nimport Fab from '@material-ui/core/Fab';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Input from '@material-ui/core/Input';\nimport Badge from '@material-ui/core/Badge';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\n\nimport {MdEdit as IconEdit} from 'react-icons/md';\nimport {MdAdd as IconAdd} from 'react-icons/md';\nimport {MdRefresh as IconRefresh} from 'react-icons/md';\nimport {MdClear as IconClear} from 'react-icons/md';\nimport {MdDelete as IconDelete} from 'react-icons/md';\nimport {MdFormatAlignJustify as IconExpand} from 'react-icons/md';\nimport {MdDragHandle as IconCollapse} from 'react-icons/md';\n\nimport {FaPowerOff as IconOn} from 'react-icons/fa';\nimport {FaThermometerHalf as IconTemperature} from 'react-icons/fa';\nimport {FaLongArrowAltUp as IconUp} from 'react-icons/fa';\nimport {FaLongArrowAltDown as IconDown} from 'react-icons/fa';\nimport {FaPercentage as IconPercentage} from 'react-icons/fa';\nimport {FaPalette as IconColor} from 'react-icons/fa';\nimport {FaLightbulb as IconBulb} from 'react-icons/fa';\nimport {FaLockOpen as IconLock} from 'react-icons/fa';\nimport {FaThermometer as IconThermometer} from 'react-icons/fa';\n\nimport I18n from '../i18n';\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport MessageDialog from '../Dialogs/Message';\nimport DialogSelectID from '../Dialogs/SelectID';\n\nconst colorOn = '#aba613';\nconst colorOff = '#444';\nconst colorSet = '#00c6ff';\nconst colorRGB = '#ff7ee3';\nconst colorRead = '#00bc00';\nconst CHANGED_COLOR = '#e7000040';\nconst DEFAULT_CHANNEL_COLOR = '#e9e9e9';\nconst LAST_CHANGED_COLOR = '#b4ffbe';\n\nconst actionsMapping = {\n    OnOff: {color: colorOn, icon: IconOn, desc: 'On/Off'},\n    Brightness: {color: colorSet, icon: IconBulb, desc: 'Dimmer'},\n    RGB: {color: colorRGB, icon: IconBulb, desc: 'Set color'},\n\n    setTargetTemperature: {color: colorSet, icon: IconTemperature, desc: 'Set target temperature'},\n    incrementTargetTemperature: {color: colorOn, icon: IconUp, desc: 'Increment target temperature'},\n    decrementTargetTemperature: {color: colorOff, icon: IconDown, desc: 'Decrement target temperature'},\n\n    incrementPercentage: {color: colorOn, icon: IconUp, desc: 'Increment percentage'},\n    decrementPercentage: {color: colorOff, icon: IconDown, desc: 'Decrement percentage'},\n\n    setColor: {color: colorSet, icon: IconColor, desc: 'Set color'},\n\n    incrementColorTemperature: {color: colorOn, icon: IconUp, desc: 'Increment color temperature'},\n    decrementColorTemperature: {color: colorOff, icon: IconDown, desc: 'Decrement color temperature'},\n\n    getTargetTemperature: {color: colorRead, icon: IconThermometer, desc: 'Get target temperature'},\n    getTemperatureReading: {color: colorRead, icon: IconThermometer, desc: 'Get actual temperature'},\n\n    setLockState: {color: colorSet, icon: IconLock, desc: 'Set lock state'},\n    getLockState: {color: colorRead, icon: IconLock, desc: 'Read lock state'},\n};\n\nconst SMARTTYPES = ['LIGHT', 'SWITCH', 'THERMOSTAT', 'ACTIVITY_TRIGGER', 'SCENE_TRIGGER', 'SMARTPLUG', 'SMARTLOCK', 'CAMERA'];\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        height: '100%'\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20,\n        height: '100%',\n        overflow: 'hidden'\n    },\n    columnDiv: {\n        height: 'calc(100% - 40px)',\n        overflow: 'auto',\n        minWidth: 300\n    },\n    filter: {\n        margin: 0\n    },\n    button: {\n        marginRight: 20\n    },\n    devLineExpand: {\n        marginRight: 10,\n    },\n    devLineEnabled: {\n        position: 'absolute',\n        right: 0,\n        top: 0,\n    },\n    devLineEdit: {\n        position: 'absolute',\n        top: 5,\n        right: 50\n    },\n    devLineDelete: {\n        position: 'absolute',\n        top: 5,\n        right: 0\n    },\n    devLineName: {\n\n    },\n    devLineNumber:{\n        display: 'inline-block',\n        verticalAlign: 'middle',\n        width: 15,\n    },\n    editedId: {\n        fontStyle: 'italic'\n    },\n    enumLineSubName:{\n        fontStyle: 'italic',\n    },\n    devLine: {\n        height: 48,\n        width: '100%',\n        position: 'relative'\n    },\n    devLineDescription: {\n        display: 'block',\n        fontStyle: 'italic',\n        fontSize: 12\n    },\n    devLineActions: {\n        fontStyle: 'italic',\n        fontSize: 12,\n        paddingLeft: 50,\n        display: 'inline-block',\n    },\n    devLineProgress: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n    },\n    channelLineActions: {\n        width: 80\n    },\n    devLineNameBlock: {\n        display: 'inline-block',\n        width: 'calc(100% - 350px)'\n    },\n    columnHeader: {\n        background: theme.palette.primary.light,\n        padding: 10,\n        color: theme.palette.primary.contrastText\n    },\n    devModified: {\n        fontStyle: 'italic'\n    },\n    actionIcon: {\n        width: 16\n    },\n\n    devSubLine: {\n        position: 'relative',\n        height: 48\n    },\n    devSubLineName: {\n        marginLeft: 5,\n        marginTop: 14,\n        minWidth: 100,\n        display: 'inline-block',\n        fontSize: 13,\n        paddingLeft: 70,\n        //width: 'calc(100% - 400px)'\n    },\n    devSubSubLine:  {\n        fontSize: 10,\n        fontStyle: 'italic',\n        display: 'inline-block',\n        marginLeft: 15\n    },\n    devSubLineSetId:  {\n        fontStyle: 'italic',\n        display: 'block',\n        color: '#999'\n    },\n    devSubLineByOn: {\n        marginLeft: 5\n    },\n    devSubLineDelete: {\n        position: 'absolute',\n        top: 12,\n        right: 12,\n        padding: 0\n    },\n    devSubLineEdit: {\n        position: 'absolute',\n        top: 12,\n        right: 62,\n        padding: 0\n    },\n    devSubLineTypeTitle: {\n        marginTop: 0\n    }\n});\n\nclass AlisaDevices extends Component {\n    constructor(props) {\n        super(props);\n\n        if (!actionsMapping.translated) {\n            Object.keys(actionsMapping).forEach(a => actionsMapping[a].desc = I18n.t(actionsMapping[a].desc));\n            actionsMapping.translated = true;\n        }\n\n        this.state = {\n            editedSmartName: '',\n            editId: '',\n            editObjectName: '',\n            deleteId: '',\n\n            showSelectId: false,\n            showConfirmation: '',\n            changed: [],\n            devices: [],\n            message: '',\n            filter: '',\n            loading: true,\n            browse: false,\n            expanded: [],\n            lastChanged: ''\n        };\n\n        this.timerChanged = null;\n        this.browseTimer = null;\n        this.browseTimerCount = 0;\n        this.editedSmartName = '';\n\n        this.waitForUpdateID = null;\n        this.onReadyUpdateBound = this.onReadyUpdate.bind(this);\n        this.onResultUpdateBound = this.onResultUpdate.bind(this);\n\n        this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`).then(obj => {\n            this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state => {\n                if (!obj || !obj.common || (!obj.common.enabled && (!state || !state.val))) {\n                    this.setState({message: I18n.t('Instance must be enabled'), loading: false, devices: []});\n                } else {\n                    this.browse();\n                }\n            });\n        });\n    }\n\n    browse(isIndicate) {\n        if (Date.now() - this.lastBrowse < 500) return;\n\n        this.lastBrowse = Date.now();\n        if (isIndicate) {\n            this.setState({loading: true, browse: true});\n        } else {\n            this.setState({browse: true});\n        }\n\n        console.log('Send BROWSE!');\n\n        this.browseTimer = setTimeout(() => {\n            console.log('Browse timeout!');\n            this.browseTimer = null;\n            this.browseTimerCount++;\n            if (this.browseTimerCount < 5) {\n                this.browse(isIndicate);\n            } else {\n                this.setState({message: I18n.t('Cannot read devices!')});\n            }\n        }, 10000);\n\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'browseAlisa', null, list => {\n            this.browseTimer && clearTimeout(this.browseTimer);\n            this.browseTimerCount = 0;\n            this.browseTimer = null;\n\n            if (this.waitForUpdateID) {\n                if (!this.onEdit(this.waitForUpdateID, list)) {\n                    this.setState({message: I18n.t('Device %s was not added', this.waitForUpdateID)});\n                }\n                this.waitForUpdateID = null;\n            }\n\n            console.log('BROWSE received.');\n\n            this.setState({devices: list, loading: false, changed: [], browse: false});\n        });\n    }\n\n    onReadyUpdate(id, state) {\n        console.log('Update ' + id + ' ' + state.val + '/' + state.ack);\n        if (state && state.ack === true && state.val === true) {\n            if (this.devTimer) clearTimeout(this.devTimer);\n            this.devTimer = setTimeout(() => {\n                this.devTimer = null;\n                this.browse();\n            }, 300);\n        }\n    }\n\n    onResultUpdate(id, state) {\n        state && state.ack === true && state.val && this.setState({message: state.val});\n    }\n\n    componentWillMount() {\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updates`, this.onReadyUpdateBound);\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\n    }\n\n    componentWillUnmount() {\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updates`, this.onReadyUpdateBound);\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\n        if (this.timerChanged) {\n            clearTimeout(this.timerChanged);\n            this.timerChanged = null;\n        }\n    }\n\n    informInstance(id) {\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'update', id);\n    }\n\n    addChanged(id, cb) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        if (changed.indexOf(id) === -1) {\n            changed.push(id);\n            this.setState({changed}, () => cb && cb());\n        } else {\n            cb && cb();\n        }\n    }\n\n    removeChanged(id) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        const pos = changed.indexOf(id);\n\n        if (pos !== -1) {\n            changed.splice(pos, 1);\n            this.setState({changed});\n        }\n    }\n\n    onEdit(id, devices) {\n        devices = devices || this.state.devices;\n        const device = devices.find(dev => dev.iobID === id);\n        if (device) {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    let smartName = device.name;\n                    if (typeof smartName === 'object' && smartName) {\n                        smartName = smartName[I18n.getLanguage()] || smartName.en;\n                    }\n                    this.editedSmartName = smartName;\n                    this.setState({editId: id, editedSmartName: smartName, editObjectName:smartName/* Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()})*/});\n                });\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    onAskDelete(deleteId) {\n        this.setState({deleteId, showConfirmation: true});\n    }\n\n    onDelete() {\n        let id = this.state.deleteId;\n        // const device = this.state.devices.find(dev => dev.additionalApplianceDetails.id === id);\n        this.addChanged(id, () => {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.disableSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    this.setState({deleteId: '', showConfirmation: false, lastChanged: id});\n\n                    this.timerChanged && clearTimeout(this.timerChanged);\n                    this.timerChanged = setTimeout(() => {\n                        this.setState({lastChanged: ''});\n                        this.timerChanged = null;\n                    }, 30000);\n\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderActions(dev) {\n        // Type\n        const actions = [];\n        if (!dev.actions) {\n            console.log('Something went wrong');\n            return null;\n        }\n\n        dev.actions.sort((a, b) => {\n            if (a === b) return 0;\n            if (a === 'OnOff') return -1;\n            if (b === 'OnOff') return 1;\n            return 0;\n        });\n\n        Object.keys(actionsMapping).forEach(action => {\n            if (dev.actions.indexOf(action) !== -1) {\n                const Icon = actionsMapping[action].icon;\n                actions.push((<span key={action} title={actionsMapping[action].desc}><Icon className={this.props.classes.actionIcon} style={{color: actionsMapping[action].color}}/></span>));\n            }\n        });\n        // add unknown actions\n        for (let a = 0; a < dev.actions.length; a++) {\n            if (!actionsMapping[dev.actions[a]]) {\n                actions.push((<span key={dev.actions[a]}>{dev.actions[a]}</span>));\n            }\n        }\n        return actions;\n    }\n\n    onExpand(lineNum) {\n        const expanded = JSON.parse(JSON.stringify(this.state.expanded));\n        const pos = expanded.indexOf(this.state.devices[lineNum].name);\n        if (pos === -1) {\n            expanded.push(this.state.devices[lineNum].name);\n        } else {\n            expanded.splice(pos, 1);\n        }\n        this.setState({expanded});\n    }\n\n    onParamsChange(id, byON, type) {\n        this.addChanged(id, () => {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, undefined, byON, type, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n\n                    if (this.state.lastChanged !== id) {\n                        this.setState({lastChanged: id});\n                        this.timerChanged && clearTimeout(this.timerChanged);\n                        this.timerChanged = setTimeout(() => {\n                            this.setState({lastChanged: ''});\n                            this.timerChanged = null;\n                        }, 30000);\n                    }\n\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderSelectType(dev, lineNum, id, type) {\n        if (type !== false) {\n            const items = [\n                (<MenuItem key=\"_\" value=\"_\"><em>{I18n.t('no type')}</em></MenuItem>)\n            ];\n            for (let i = 0; i < SMARTTYPES.length; i++) {\n                items.push((<MenuItem  key={SMARTTYPES[i]} value={SMARTTYPES[i]}><em>{I18n.t(SMARTTYPES[i])}</em></MenuItem>));\n            }\n            return (\n                <FormControl>\n                    <Select value={type || '_'} onChange={e => this.onParamsChange(id, undefined, e.target.value)}>{items}</Select>\n                    <FormHelperText className={this.props.classes.devSubLineTypeTitle}>{I18n.t('Types')}</FormHelperText>\n                </FormControl>);\n        } else {\n            return '';\n        }\n    }\n\n    renderChannels(dev, lineNum) {\n        const result = [];\n        const classes = this.props.classes;\n\n        const id = dev.main.getId;\n        const name = dev.func;\n        let background = DEFAULT_CHANNEL_COLOR;/*this.state.changed.indexOf(id) !== -1 ? CHANGED_COLOR : DEFAULT_CHANNEL_COLOR;\n        if (this.state.lastChanged === id && background === DEFAULT_CHANNEL_COLOR) {\n            background = LAST_CHANGED_COLOR;\n        }*/\n        result.push((<div key={'sub' + id} className={classes.devSubLine} style={{background}}>\n            <div className={classes.devSubLineName}>{name.toUpperCase()}</div>\n            <div className={classes.devSubSubLine}>\n                <div>{dev.main.getId}</div>\n                {dev.main.setId && dev.main.setId !== dev.main.getId ? (<div className={classes.devSubLineSetId}>{dev.main.setId}</div>) : null}\n            </div>\n\n        </div>));\n\n        dev.attributes.forEach(attr => {\n            result.push((<div key={'sub' + attr.getId} className={classes.devSubLine} style={{background}}>\n                <div className={classes.devSubLineName}>{attr.name.toUpperCase()}</div>\n                <div className={classes.devSubSubLine}>\n                    <div>{attr.getId}</div>\n                    {attr.setId && attr.setId !== attr.getId ? (<div className={classes.devSubLineSetId}>{attr.setId}</div>) : null}\n                </div>\n            </div>));\n        });\n\n        /*if (dev.additionalApplianceDetails.group) {\n            const channels   = dev.additionalApplianceDetails.channels;\n            const names      = dev.additionalApplianceDetails.names;\n            const types      = dev.additionalApplianceDetails.byONs;\n            const smarttypes = dev.additionalApplianceDetails.smartTypes;\n\n            let c = 0;\n            for (const chan in channels) {\n                if (channels.hasOwnProperty(chan)) {\n                    for (let i = 0; i < channels[chan].length; i++) {\n                        const id = channels[chan][i].id;\n                        let background = this.state.changed.indexOf(id) !== -1 ? CHANGED_COLOR : DEFAULT_CHANNEL_COLOR;\n                        if (this.state.lastChanged === id && background === DEFAULT_CHANNEL_COLOR) {\n                            background = LAST_CHANGED_COLOR;\n                        }\n                        result.push((<div key={'sub' + id} className={classes.devSubLine} style={(c % 2) ? {} : {background}}>\n                            <div className={this.props.classes.devLineActions + ' ' + this.props.classes.channelLineActions}>{this.renderActions(channels[chan][i])}</div>\n                            <div className={classes.devSubLineName} title={id}>{(names[id] || id)}\n                                {id !== names[id] ? (<span className={classes.devSubSubLineName}>{id}</span>) : null}\n                            </div>\n                            {this.renderSelectType(dev, lineNum, id, smarttypes[id])}\n                            {this.renderSelectByOn(dev, lineNum, id, types[id])}\n                            <IconButton aria-label=\"Delete\" className={this.props.classes.devSubLineDelete} onClick={() => this.onAskDelete(id, lineNum)}><IconDelete fontSize=\"middle\" /></IconButton>\n                        </div>));\n                        c++;\n                    }\n                }\n            }\n        } else {\n        }*/\n        return result;\n    }\n\n    renderDevice(dev, lineNum) {\n        //return (<div key={lineNum}>{JSON.stringify(dev)}</div>);\n        const expanded = this.state.expanded.indexOf(dev.name) !== -1;\n        let background = (lineNum % 2) ? '#f1f1f1' : 'inherit';\n        const changed = this.state.changed.indexOf(dev.iobID) !== -1;\n        if (changed) {\n            background = CHANGED_COLOR;\n        } else if (dev.iobID === this.state.lastChanged) {\n            background = LAST_CHANGED_COLOR;\n        }\n\n        //const isComplex = dev.\n\n        return [\n            (<div key={'line' + lineNum} className={this.props.classes.devLine} style={{background}}>\n                <div className={this.props.classes.devLineNumber}>{lineNum + 1}.</div>\n                <IconButton className={this.props.classes.devLineExpand} onClick={() => this.onExpand(lineNum)}>\n                    {dev.attributes.length ?\n                        (<Badge badgeContent={dev.attributes.length} color=\"primary\">{expanded ? (<IconCollapse/>) : (<IconExpand />)}</Badge>) :\n                        (expanded ? (<IconCollapse/>) : (<IconExpand />))}\n                </IconButton>\n                <div className={this.props.classes.devLineNameBlock} style={{display: 'inline-block', position: 'relative'}}>\n                    <span className={this.props.classes.devLineName}>{dev.name}</span>\n                    <span className={this.props.classes.devLineDescription}>{dev.description}</span>\n                    {changed ? (<CircularProgress className={this.props.classes.devLineProgress} size={20}/>) : null}\n                </div>\n                <span className={this.props.classes.devLineActions}>{this.renderActions(dev)}</span>\n                <IconButton aria-label=\"Edit\" className={this.props.classes.devLineEdit} onClick={() => this.onEdit(dev.iobID)}><IconEdit fontSize=\"middle\" /></IconButton>\n                <IconButton aria-label=\"Delete\" className={this.props.classes.devLineDelete} onClick={() => this.onAskDelete(dev.iobID)}><IconDelete fontSize=\"middle\" /></IconButton>\n\n            </div>),\n            expanded ? this.renderChannels(dev, lineNum) : null\n        ];\n    }\n\n    renderMessage() {\n        if (this.state.message) {\n            return (<MessageDialog text={this.state.message} onClose={() => this.setState({message: ''})}/>);\n        } else {\n            return null;\n        }\n    }\n\n    changeSmartName(e) {\n        e && e.preventDefault();\n        // Check if the name is duplicate\n        this.addChanged(this.state.editId, () => {\n            const id = this.state.editId;\n            this.setState({editId: '', editObjectName: '', lastChanged: id});\n\n            this.timerChanged && clearTimeout(this.timerChanged);\n            this.timerChanged = setTimeout(() => {\n                this.setState({lastChanged: ''});\n                this.timerChanged = null;\n            }, 30000);\n\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, this.editedSmartName, undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderEditDialog() {\n        if (this.state.editId) {\n            return (<Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"message-dialog-title\"\n                aria-describedby=\"message-dialog-description\"\n            >\n                <DialogTitle id=\"message-dialog-title\">{this.props.title || I18n.t('Smart name for %s', this.state.editObjectName)}</DialogTitle>\n                <DialogContent>\n                    <p><span>ID:</span> <span className={this.props.classes.editedId}>{this.state.editId}</span></p>\n                    <TextField\n                        style={{width: '100%'}}\n                        label={I18n.t('Smart name')}\n                        onKeyDown={e =>\n                            e.keyCode === 13 && this.changeSmartName(e)}\n                        onChange={e => this.editedSmartName = e.target.value}\n                        defaultValue={this.state.editedSmartName}\n                        helperText={I18n.t('You can enter several names divided by comma')}\n                        margin=\"normal\"\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.changeSmartName()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\n                    <Button onClick={() => {\n                        this.editedSmartName = null;\n                        this.setState({editId: '', editedSmartName: ''});\n                    }}>{I18n.t('Cancel')}</Button>\n                </DialogActions>\n            </Dialog>)\n        } else {\n            return null;\n        }\n    }\n\n    renderConfirmDialog() {\n        if (this.state.showConfirmation) {\n            return (<Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"confirmation-dialog-title\"\n                aria-describedby=\"confirmation-dialog-description\"\n            >\n                <DialogTitle id=\"confirmation-dialog-title\">{this.props.title || I18n.t('Device will be disabled.')}</DialogTitle>\n                <DialogContent>\n                    <p>{I18n.t('Are you sure?')}</p>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.onDelete()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\n                    <Button onClick={() => this.setState({showConfirmation: ''})}>{I18n.t('Cancel')}</Button>\n                </DialogActions>\n            </Dialog>)\n        } else {\n            return null;\n        }\n    }\n\n    getSelectIdDialog() {\n        if (this.state.showSelectId) {\n            return (<DialogSelectID\n                key=\"dialogSelectID1\"\n                prefix={'../..'}\n                connection={this.props.socket}\n                selected={''}\n                statesOnly={true}\n                onClose={() => this.setState({showSelectId: false})}\n                onOk={(selected, name) => {\n                    this.setState({showSelectId: false});\n\n                    this.props.socket.getObject(selected)\n                        .then(obj => {\n                            if (obj) {\n                                const name = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\n                                Utils.updateSmartName(obj, (name || I18n.t('Device name')).replace(/[-_.]+/g, ' '), undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                                this.addChanged(obj._id);\n                                this.waitForUpdateID = obj._id;\n\n                                if (this.state.lastChanged !== obj._id) {\n                                    this.setState({lastChanged: obj._id});\n                                    this.timerChanged && clearTimeout(this.timerChanged);\n                                    this.timerChanged = setTimeout(() => {\n                                        this.setState({lastChanged: ''});\n                                        this.timerChanged = null;\n                                    }, 30000);\n                                }\n\n                                this.props.socket.setObject(obj._id, obj)\n                                    .then(() => this.informInstance(obj._id))\n                                    .catch(err => this.setState({message: err}));\n                            } else {\n                                this.setState({message: I18n.t('Invalid ID')});\n                            }\n                        });\n                }}\n            />);\n        } else {\n            return null;\n        }\n    }\n\n    renderDevices() {\n        const filter = this.state.filter.toLowerCase();\n        const result = [];\n        for (let i = 0; i < this.state.devices.length; i++) {\n            if (this.state.filter && this.state.devices[i].name.toLowerCase().indexOf(filter) === -1 ) continue;\n            result.push(this.renderDevice(this.state.devices[i], i));\n        }\n        return (<div key=\"listDevices\" className={this.props.classes.columnDiv}>{result}</div>);\n    }\n\n    render() {\n        if (this.state.loading) {\n            return (<CircularProgress  key=\"alexaProgress\" />);\n        }\n\n        return (\n            <form key=\"alexa\" className={this.props.classes.tab}>\n                <Fab size=\"small\" color=\"secondary\" aria-label=\"Add\" className={this.props.classes.button} onClick={() => this.setState({showSelectId: true})}><IconAdd /></Fab>\n                <Fab size=\"small\" color=\"primary\" aria-label=\"Refresh\" className={this.props.classes.button}\n                      onClick={() => this.browse(true)} disabled={this.state.browse}>{this.state.browse ? (<CircularProgress size={20} />) : (<IconRefresh/>)}</Fab>\n\n                <Input\n                    placeholder={I18n.t('Filter')}\n                    className={this.state.filter}\n                    value={this.state.filter}\n                    onChange={e => this.setState({filter: e.target.value})}\n                />\n                <IconButton aria-label=\"Clear\" className={this.props.classes.button} onClick={() => this.setState({filter: ''})}><IconClear fontSize=\"large\" /></IconButton>\n                {this.renderDevices()}\n                {this.renderMessage()}\n                {this.renderEditDialog()}\n                {this.getSelectIdDialog()}\n                {this.renderConfirmDialog()}\n            </form>\n        );\n    }\n}\n\nAlisaDevices.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    adapterName: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(AlisaDevices);\n","import React from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Loader from './Components/Loader'\nimport I18n from './i18n';\n\nimport GenericApp from './GenericApp';\nimport TabOptions from './Tabs/Options';\nimport TabExtended from './Tabs/Extended';\nimport TabServices from './Tabs/Services';\nimport TabEnums from './Tabs/Enums';\nimport TabAlexaSmartNames from './Tabs/AlexaSmartNames';\nimport TabAlisaSmartNames from './Tabs/AlisaSmartNames';\n\nconst styles = theme => ({\n    root: {},\n    tabContent: {\n        padding: 10,\n        height: 'calc(100% - 64px - 48px - 20px)',\n        overflow: 'auto'\n    },\n    tabContentIFrame: {\n        padding: 10,\n        height: 'calc(100% - 64px - 48px - 20px - 38px)',\n        overflow: 'auto'\n    }\n});\n\nclass App extends GenericApp {\n    getSelectedTab() {\n        const tab = this.state.selectedTab;\n        if (!tab || tab === 'options') {\n            return 0;\n        } else\n        if (tab === 'enums') {\n            return 1;\n        } else\n        if (tab === 'alexa') {\n            return 2;\n        } else\n        if (tab === 'alisa') {\n            const offset = (this.state.native.amazonAlexa ? 1 : 0);\n            return 2 + offset;\n        } else\n        if (tab === 'extended') {\n            const offset = (this.state.native.amazonAlexa ? 1 : 0) + (this.state.native.yandexAlisa ? 1 : 0);\n            return 2 + offset;\n        } else\n        if (tab === 'services') {\n            const offset = (this.state.native.amazonAlexa ? 1 : 0) + (this.state.native.yandexAlisa ? 1 : 0);\n            return 3 + offset;\n        }\n    }\n    render() {\n        if (!this.state.loaded) {\n            return (<Loader theme={this.state.themeType}/>);\n        }\n\n        return (\n            <div className=\"App\">\n                <AppBar position=\"static\">\n                    <Tabs value={this.getSelectedTab()} onChange={(e, index) => this.selectTab(e.target.parentNode.dataset.name, index)}>\n                        <Tab label={I18n.t('Options')} data-name=\"options\" />\n                        <Tab label={I18n.t('Smart enums')} data-name=\"enums\" />\n                        {this.state.native.amazonAlexa && <Tab selected={this.state.selectedTab === 'alexa'} label={I18n.t('Alexa devices')} data-name=\"alexa\" />}\n                        {this.state.native.yandexAlisa && <Tab selected={this.state.selectedTab === 'alisa'} label={I18n.t('Alisa devices')} data-name=\"alisa\" />}\n                        <Tab label={I18n.t('Extended options')} data-name=\"extended\" />\n                        <Tab label={I18n.t('Services and IFTTT')} data-name=\"services\" />\n                    </Tabs>\n                </AppBar>\n                <div className={this.isIFrame ? this.props.classes.tabContentIFrame : this.props.classes.tabContent}>\n                    {(this.state.selectedTab === 'options' || !this.state.selectedTab) && (<TabOptions\n                        key=\"options\"\n                        common={this.common}\n                        socket={this.socket}\n                        native={this.state.native}\n                        onError={text => this.setState({errorText: text})}\n                        onLoad={native => this.onLoadConfig(native)}\n                        instance={this.instance}\n                        adapterName={this.adapterName}\n                        onChange={(attr, value) => this.updateNativeValue(attr, value)}\n                    />)}\n                    {this.state.selectedTab === 'enums' && (<TabEnums\n                        key=\"enums\"\n                        common={this.common}\n                        socket={this.socket}\n                        native={this.state.native}\n                        onError={text => this.setState({errorText: text})}\n                        instance={this.instance}\n                        adapterName={this.adapterName}\n                    />)}\n                    {this.state.selectedTab === 'alexa' && (<TabAlexaSmartNames\n                        key=\"alexa\"\n                        common={this.common}\n                        socket={this.socket}\n                        native={this.state.native}\n                        onError={text => this.setState({errorText: text})}\n                        adapterName={this.adapterName}\n                        instance={this.instance}\n                    />)}\n                    {this.state.selectedTab === 'alisa' && (<TabAlisaSmartNames\n                        key=\"alisa\"\n                        common={this.common}\n                        socket={this.socket}\n                        native={this.state.native}\n                        onError={text => this.setState({errorText: text})}\n                        adapterName={this.adapterName}\n                        instance={this.instance}\n                    />)}\n                    {this.state.selectedTab === 'extended' && (<TabExtended\n                        key=\"extended\"\n                        common={this.common}\n                        socket={this.socket}\n                        native={this.state.native}\n                        onError={text => this.setState({errorText: text})}\n                        instance={this.instance}\n                        adapterName={this.adapterName}\n                        onChange={(attr, value) => this.updateNativeValue(attr, value)}\n                    />)}\n                    {this.state.selectedTab === 'services' && (<TabServices\n                        key=\"services\"\n                        common={this.common}\n                        socket={this.socket}\n                        native={this.state.native}\n                        onError={text => this.setState({errorText: text})}\n                        instance={this.instance}\n                        adapterName={this.adapterName}\n                        onShowError={error => this.showError(error)}\n                        onChange={(attr, value) => this.updateNativeValue(attr, value)}\n                    />)}\n                </div>\n                {this.renderError()}\n                {this.renderSaveCloseButtons()}\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {createMuiTheme} from '@material-ui/core/styles';\nimport Theme from './Theme';\n\nexport default type => {\n    if (type === 'dark') {\n        return createMuiTheme({\n            palette: {\n                type: type,\n                primary: {\n                    light: '#5F6975',\n                    main: '#2978d0',\n                    dark: '#053C72',\n                    contrastText: '#CСС',\n                },\n                secondary: {\n                    light: '#7EB2CC',\n                    main: '#3399CC',\n                    dark: '#068ACC',\n                    contrastText: '#ee0000',\n                },\n            }\n        });\n    } else {\n        return createMuiTheme({\n            palette: {\n                type: type,\n                primary: {\n                    light: '#5F6975',\n                    main: '#164477',\n                    dark: '#053C72',\n                    contrastText: '#FFF',\n                },\n                secondary: {\n                    light: '#7EB2CC',\n                    main: '#3399CC',\n                    dark: '#068ACC',\n                    contrastText: '#ee0000',\n                },\n            }\n        });\n\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { MuiThemeProvider} from '@material-ui/core/styles';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport createTheme from './createTheme';\n\nlet theme = 'light';\n\nfunction build() {\n    return ReactDOM.render(<MuiThemeProvider theme={createTheme(theme)}>\n        <App onThemeChange={_theme => {\n            theme = _theme;\n            build();\n        }}/>\n    </MuiThemeProvider>, document.getElementById('root'));\n}\n\n\nbuild();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/copy-content.6fe0b363.svg\";"],"sourceRoot":""}