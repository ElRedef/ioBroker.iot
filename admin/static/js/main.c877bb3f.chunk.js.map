{"version":3,"sources":["Tabs/Logo.js","Tabs/Options.js","Tabs/Extended.js","Tabs/Services.js","Tabs/Enums.js","Tabs/AlexaSmartNames.js","Tabs/AlisaSmartNames.js","Tabs/GoogleSmartNames.js","App.js","serviceWorker.js","index.js"],"names":["Logo","evt","_this","this","f","target","files","r","window","FileReader","onload","e","contents","result","json","JSON","parse","native","common","name","props","onError","I18n","t","onLoad","toString","readAsText","alert","_id","instance","stringify","news","titleLang","desc","generateFile","_this2","input","document","createElement","setAttribute","addEventListener","handleFileSelect","click","_this3","react_default","a","icon","src","className","classes","logo","alt","readme","Fab","size","color","aria-label","buttons","onClick","open","focus","index_esm","title","upload","fa_index_esm","download","filename","obj","el","encodeURIComponent","style","display","body","appendChild","removeChild","Component","withStyles","theme","marginRight","marginTop","float","padding","width","Options","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","inAction","forceUserCreate","showHint","toast","isInstanceAlive","socket","getObject","concat","adapterName","then","getState","setState","enabled","val","attr","type","TextField","label","value","onChange","margin","Card","card","CardActionArea","CardMedia","media","image","CardContent","Utils","renderTextWithA","CardActions","textAlign","Button","ack","Promise","resolve","setObject","catch","err","_this4","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","onClose","ContentProps","aria-describedby","message","id","action","IconButton","key","close","_this5","Message_default","text","_this6","FormControlLabel","assign","paddingTop","controlElement","control","Checkbox","checked","_this7","tab","Tabs_Logo","errorText","column","columnSettings","renderInput","renderCheckbox","googleHome","newVal","variant","button","disabled","resetCerts","onForceUserCreate","fontWeight","columnLogo","renderCard","renderHint","renderToast","minHeight","minWidth","maxWidth","height","verticalAlign","ExtendedOptions","showSelectId","options","FormControl","Select","Input","map","item","MenuItem","FormHelperText","SelectID_default","prefix","connection","selected","statesOnly","onOk","renderSelect","marginLeft","getSelectIdDialog","marginBottom","Services","running","text2commandList","nightscoutList","addValue","onKeyChangedBound","onKeyChanged","bind","assertThisInitialized","getAdapterInstances","list","nsList","replace","subscribeState","unsubscribeState","showError","chips","split","filter","pos","indexOf","splice","join","push","chipsDiv","onKeyUp","keyCode","onChipsAdd","trim","word","Chip","onDelete","onChipsDelete","chip","_this8","reissueUrlKey","fullSize","login","readOnly","copyToClipboard","CopyContentImg","renderChips","text2command","nightscout","border","borderRadius","Enums","editId","editedSmartName","funcs","rooms","changed","loading","onEnumUpdateBound","onEnumUpdate","getEnums","res","keys","forEach","match","subscribeObject","unsubscribeObject","removeChanged","updateObjInState","sendTo","i","length","find","smartName","getSmartNameFromObj","disableSmartName","noCommon","removeSmartName","addChanged","informInstance","setTimeout","getLanguage","en","getObjectNameFromObj","language","enumLine","background","enumLineName","opacity","enumLineSubName","enumLineId","Switch","enumLineEnabled","onToggleEnum","enumLineEdit","onEdit","fontSize","renderEnum","startsWith","newObj","updateSmartName","undefined","Dialog","fullWidth","handleOk","aria-labelledby","DialogTitle","DialogContent","helperText","DialogActions","changeSmartName","autoFocus","CircularProgress","columnHeader","columnDiv","renderEnums","renderMessage","renderEditDialog","overflow","position","right","top","fontStyle","palette","primary","light","contrastText","actionsMapping","turnOn","IconOn","turnOff","setTargetTemperature","IconTemperature","incrementTargetTemperature","IconUp","decrementTargetTemperature","IconDown","setPercentage","IconPercentage","incrementPercentage","decrementPercentage","setColor","IconColor","setColorTemperature","IconBulb","incrementColorTemperature","decrementColorTemperature","getTargetTemperature","IconThermometer","getTemperatureReading","setLockState","IconLock","getLockState","SMARTTYPES","AlexaSmartNames","translated","editObjectName","deleteId","showConfirmation","devices","browse","expanded","lastChanged","timerChanged","browseTimer","browseTimerCount","waitForUpdateID","onReadyUpdateBound","onReadyUpdate","onResultUpdateBound","onResultUpdate","isIndicate","Date","now","lastBrowse","console","log","clearTimeout","devTimer","cb","device","dev","additionalApplianceDetails","friendlyNames","friendlyName","actions","sort","b","Icon","actionIcon","lineNum","items","devSubLineByOn","devSubLineByOnSelect","onParamsChange","devSubLineTypeTitle","byON","_this9","_this10","group","channels","names","types","byONs","smarttypes","smartTypes","c","chan","hasOwnProperty","_loop","devSubLine","devLineActions","channelLineActions","renderActions","devSubLineName","devSubSubLineName","renderSelectType","renderSelectByOn","devSubLineDelete","onAskDelete","smartType","_this11","nameModified","devModified","devCount","ch","devLine","devLineNumber","devLineExpand","onExpand","Badge","badgeContent","devLineNameBlock","devLineName","devLineDescription","friendlyDescription","devLineProgress","devLineEdit","devLineDelete","renderChannels","_this12","_this13","preventDefault","_this14","editedId","onKeyDown","defaultValue","_this15","_this16","toLowerCase","renderDevice","_this17","placeholder","renderDevices","renderConfirmDialog","devLineEnabled","paddingLeft","left","devSubLineEdit","OnOff","Brightness","RGB","AlisaDevices","iobID","main","getId","func","toUpperCase","devSubSubLine","setId","devSubLineSetId","attributes","description","GoogleSmartNames","traits","App","extendedProps","objectSpread","encryptedFields","translations","require","de","ru","pt","nl","fr","it","es","pl","zh-cn","selectedTab","amazonAlexa","yandexAlisa","loaded","AppBar","Tabs","getSelectedTab","index","selectTab","parentNode","dataset","Tab","data-name","isIFrame","tabContentIFrame","tabContent","Tabs_Options","onLoadConfig","updateNativeValue","Tabs_Enums","Tabs_AlexaSmartNames","Tabs_GoogleSmartNames","AlisaSmartNames","Extended","Tabs_Services","onShowError","error","renderError","renderSaveCloseButtons","Loader_default","themeType","GenericApp","root","Boolean","location","hostname","build","ReactDOM","render","MuiThemeProvider","createTheme","src_App","onThemeChange","_theme","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c877bb3f.chunk.js","sourcesContent":["import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport Fab from '@material-ui/core/Fab';\nimport PropTypes from 'prop-types';\n\nimport I18n from '@iobroker/adapter-react/i18n';\n\nimport {MdHelpOutline as IconHelp} from 'react-icons/md';\nimport {FaFileDownload as IconDownload} from 'react-icons/fa';\nimport {FaFileUpload as IconUpload} from 'react-icons/fa';\n\nconst styles = theme => ({\n    buttons: {\n        marginRight: 5,\n        marginTop: 5,\n        float: 'right'\n    },\n    logo: {\n        padding: 8,\n        width: 64\n    }\n});\n\nclass Logo extends Component {\n\n    static generateFile(filename, obj) {\n        const el = window.document.createElement('a');\n        el.setAttribute('href', 'data:application/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(obj, null, 2)));\n        el.setAttribute('download', filename);\n\n        el.style.display = 'none';\n        window.document.body.appendChild(el);\n\n        el.click();\n\n        window.document.body.removeChild(el);\n    }\n\n    handleFileSelect(evt) {\n        const f = evt.target.files[0];\n        if (f) {\n            const r = new window.FileReader();\n            r.onload = e => {\n                const contents = e.target.result;\n                try {\n                    const json = JSON.parse(contents);\n                    if (json.native && json.common) {\n                        if (json.common.name !== this.props.common.name) {\n                            this.props.onError(I18n.t('otherConfig', json.common.name));\n                        } else {\n                            this.props.onLoad(json.native);\n                        }\n                    } else {\n                        this.props.onError(I18n.t('invalidConfig'));\n                    }\n                } catch (e) {\n                    this.props.onError(e.toString());\n                }\n            };\n            r.readAsText(f);\n        } else {\n            alert('Failed to open JSON File');\n        }\n    }\n\n    download() {\n        const result = {\n            _id: 'system.adapter.' + this.props.common.name + '.' + this.props.instance,\n            common: JSON.parse(JSON.stringify(this.props.common)),\n            native: this.props.native\n        };\n        // remove unimportant information\n        if (result.common.news) {\n            delete result.common.news;\n        }\n        if (result.common.titleLang) {\n            delete result.common.titleLang;\n        }\n        if (result.common.desc) {\n            delete result.common.desc;\n        }\n\n        //window.open('data:application/iobroker; content-disposition=attachment; filename=' + result._id + '.json,' + JSON.stringify(result, null, 2));\n        Logo.generateFile(result._id + '.json', result);\n    }\n\n    upload() {\n        const input = window.document.createElement('input');\n        input.setAttribute('type', 'file');\n        input.setAttribute('id', 'files');\n        input.setAttribute('opacity', 0);\n        input.addEventListener('change', e => this.handleFileSelect(e, () => {}), false);\n        (input.click)();\n    }\n\n    render() {\n        return (<div>\n            {this.props.common.icon && (<img src={this.props.common.icon} className={this.props.classes.logo} alt=\"logo\"/>)}\n            {this.props.common.readme &&\n                (<Fab size=\"small\" color=\"primary\" aria-label=\"Help\" className={this.props.classes.buttons} onClick={() => {\n                    const win = window.open(this.props.common.readme, '_blank');\n                    win.focus();\n                }}><IconHelp /></Fab>)}\n            <Fab size=\"small\" color=\"primary\" aria-label=\"Load config\" className={this.props.classes.buttons} title={I18n.t('Load configuration from file')} onClick={() => this.upload()}><IconUpload /></Fab>\n            <Fab size=\"small\" color=\"primary\" aria-label=\"Save config\" className={this.props.classes.buttons} title={I18n.t('Save configuration to file')} onClick={() => this.download()}><IconDownload /></Fab>\n        </div>);\n    }\n}\n\nLogo.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n};\n\nexport default withStyles(styles)(Logo);\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Utils from '@iobroker/adapter-react/Components/Utils'\n\nimport {MdRefresh as IconReload} from 'react-icons/md';\nimport {MdClose as IconClose} from 'react-icons/md';\n\nimport I18n from '@iobroker/adapter-react/i18n';\nimport Logo from './Logo';\nimport Message from '@iobroker/adapter-react/Dialogs/Message';\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        minHeight: '100%'\n    },\n    input: {\n        minWidth: 300\n    },\n    button: {\n        marginRight: 20,\n    },\n    card: {\n        maxWidth: 345,\n        textAlign: 'center'\n    },\n    media: {\n        height: 180,\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20\n    },\n    columnLogo: {\n        width: 350,\n        marginRight: 0\n    },\n    columnSettings: {\n        width: 'calc(100% - 370px)',\n    }\n});\n\nclass Options extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            inAction: false,\n            forceUserCreate: false,\n            showHint: false,\n            toast: '',\n            isInstanceAlive: false,\n        };\n\n        this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`).then(obj =>\n            this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state =>\n                this.setState({isInstanceAlive: obj && obj.common && obj.common.enabled && state && state.val})));\n\n    }\n\n    renderInput(title, attr, type) {\n        return (<TextField\n            label={I18n.t(title)}\n            className={this.props.classes.input}\n            value={this.props.native[attr]}\n            type={type || 'text'}\n            onChange={e => this.props.onChange(attr, e.target.value)}\n            margin=\"normal\"\n        />);\n    }\n\n    renderCard() {\n        return (<Card className={this.props.classes.card}>\n            <CardActionArea>\n                <CardMedia\n                    className={this.props.classes.media}\n                    image=\"alexalogo.png\"\n                    title=\"Alexa logo\"\n                />\n                <CardContent>{Utils.renderTextWithA(I18n.t('amazon link'))}</CardContent>\n            </CardActionArea>\n            <CardActions style={{textAlign: 'center'}} >\n                <Button size=\"small\" color=\"primary\" style={{textAlign: 'center'}} onClick={() => {\n                    const win = window.open('http://alexa.amazon.de/spa/index.html#skills/dp/B07L66BFF9/reviews', '_blank');\n                    win.focus();\n                }}>{I18n.t('Review')}</Button>\n            </CardActions>\n        </Card>);\n    }\n\n    resetCerts() {\n        this.setState({inAction: true});\n        this.props.socket.setState('iot.' + this.props.instance + '.certs.private', {val: '', ack: true})\n            .then(() => this.props.socket.setState('iot.' + this.props.instance + '.certs.id', {val: '', ack: true}))\n            .then(() => this.props.socket.setState('iot.' + this.props.instance + '.certs.public', {val: '', ack: true}))\n            .then(() => this.props.socket.setState('iot.' + this.props.instance + '.certs.certificate', {val: '', ack: true}))\n            .then(() => {\n                if (this.state.forceUserCreate) {\n                    return this.props.socket.setState('iot.' + this.props.instance + '.certs.forceUserCreate', {val: true, ack: true});\n                } else {\n                    return Promise.resolve();\n                }\n            })\n            // read actual instance object\n            .then(() => this.props.socket.getObject('system.adapter.iot.' + this.props.instance))\n            .then(obj => {\n                if (!obj || !obj.common || !obj.common.enabled) {\n                    // adapter is disabled, do not restart it\n                    return Promise.resolve();\n                } else {\n                    // restart adapter\n                    return this.props.socket.setObject('system.adapter.iot.' + this.props.instance, obj);\n                }\n            })\n            .then(() => this.setState({toast: I18n.t('Certificates will be updated after start')}))\n            .catch(err => this.props.onError(err))\n            .then(() => this.setState({inAction: false}));\n    }\n\n    onForceUserCreate() {\n        this.setState({forceUserCreate: !this.state.forceUserCreate, showHint: !this.state.forceUserCreate});\n    }\n\n    renderToast() {\n        if (!this.state.toast) return null;\n        return (\n            <Snackbar\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'left',\n                }}\n                open={true}\n                autoHideDuration={6000}\n                onClose={() => this.setState({toast: ''})}\n                ContentProps={{\n                    'aria-describedby': 'message-id',\n                }}\n                message={<span id=\"message-id\">{this.state.toast}</span>}\n                action={[\n                    <IconButton\n                        key=\"close\"\n                        aria-label=\"Close\"\n                        color=\"inherit\"\n                        className={this.props.classes.close}\n                        onClick={() => this.setState({toast: ''})}\n                    >\n                        <IconClose />\n                    </IconButton>,\n                ]}\n            />);\n    }\n\n    renderHint() {\n        if (this.state.showHint) {\n            return (<Message text={I18n.t('Click now Get new connection certificates to request new temporary password')} onClose={() => this.setState({showHint: false})}/>);\n        } else {\n            return null;\n        }\n    }\n\n    renderCheckbox(title, attr, style) {\n        return (<FormControlLabel key={attr} style={Object.assign({paddingTop: 5}, style)} className={this.props.classes.controlElement}\n              control={\n                  <Checkbox\n                      checked={this.props.native[attr]}\n                      onChange={() => this.props.onChange(attr, !this.props.native[attr])}\n                      color=\"primary\"\n                  />\n              }\n              label={I18n.t(title)}\n        />);\n    }\n\n    render() {\n        return (\n            <form className={this.props.classes.tab}>\n                <Logo\n                    instance={this.props.instance}\n                    common={this.props.common}\n                    native={this.props.native}\n                    onError={text => this.setState({errorText: text})}\n                    onLoad={this.props.onLoad}\n                />\n                <div className={this.props.classes.column + ' ' + this.props.classes.columnSettings}>\n                    {this.renderInput('ioBroker.pro Login', 'login')}<br/>\n                    {this.renderInput('ioBroker.pro Password', 'pass', 'password')}<br/>\n                    {this.renderCheckbox('Amazon Alexa', 'amazonAlexa', {marginTop: 10})}<br/>\n                    <FormControlLabel key=\"googleHome\" style={{paddingTop: 5}} className={this.props.classes.controlElement}\n                        control={\n                          <Checkbox\n                              checked={this.props.native.googleHome}\n                              onChange={() => {\n                                  // activate alexa if google home is on (temporary)\n                                  const newVal = !this.props.native.googleHome;\n                                  this.props.onChange('googleHome', newVal, () =>\n                                      newVal && this.props.onChange('amazonAlexa', true));\n                              }}\n                              color=\"primary\"\n                          />\n                        }\n                        label={I18n.t('Google Home')}\n                    />\n                    {/*this.renderCheckbox('Google Home', 'googleHome', {marginTop: 10})*/}<br/>\n                    {this.renderCheckbox('Yandex Алиса', 'yandexAlisa', {marginTop: 10})}<br/>\n                    <br/>\n                    <Button variant=\"outlined\"\n                            className={this.props.classes.button}\n                            disabled={this.state.inAction || !this.state.isInstanceAlive}\n                            title={!this.state.isInstanceAlive ? I18n.t('Instance must be enabled') : ''}\n                            onClick={() => this.resetCerts()}>\n                        <IconReload/>{I18n.t('Get new connection certificates')}\n                    </Button>\n                    <FormControlLabel\n                        control={\n                            <Checkbox\n                                checked={this.state.forceUserCreate}\n                                onChange={() => this.onForceUserCreate()}\n                                color=\"primary\"\n                            />\n                        }\n                        label={I18n.t('Request email with password one more time')}\n                    />\n                    <p style={{fontWeight: 'bold'}}>{Utils.renderTextWithA(I18n.t('help_tip'))}</p>\n                </div>\n                <div className={this.props.classes.column + ' ' + this.props.classes.columnLogo}>{this.renderCard()}</div>\n                {this.renderHint()}\n                {this.renderToast()}\n            </form>\n        );\n    }\n}\n\nOptions.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    adapterName: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Options);\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Input from '@material-ui/core/Input';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Fab from '@material-ui/core/Fab';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\n\nimport {MdAdd as IconAdd} from 'react-icons/md';\n\nimport I18n from '@iobroker/adapter-react/i18n';\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\nimport Utils from '@iobroker/adapter-react/Components/Utils'\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        minHeight: '100%'\n    },\n    input: {\n        marginTop: 0,\n        minWidth: 400\n    },\n    button: {\n        marginRight: 20,\n    },\n    card: {\n        maxWidth: 345,\n        textAlign: 'center'\n    },\n    media: {\n        height: 180,\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20\n    },\n    columnLogo: {\n        width: 350,\n        marginRight: 0\n    },\n    columnSettings: {\n        width: 'calc(100% - 370px)',\n    },\n    controlElement: {\n        //background: '#d2d2d2',\n        marginBottom: 5\n    }\n});\n\nclass ExtendedOptions extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            showSelectId: false,\n        };\n\n    }\n    \n    renderInput(title, attr, type) {\n        return (<TextField\n            label={I18n.t(title)}\n            className={this.props.classes.input + ' ' + this.props.classes.controlElement}\n            value={this.props.native[attr]}\n            type={type || 'text'}\n            onChange={e => this.props.onChange(attr, e.target.value)}\n            margin=\"normal\"\n        />);\n    }\n\n    renderSelect(title, attr, options, style) {\n        return (<FormControl className={this.props.classes.input + ' ' + this.props.classes.controlElement} style={Object.assign({paddingTop: 5}, style)}>\n            <Select\n                value={this.props.native[attr] || '_'}\n                onChange={e => this.props.onChange(attr, e.target.value === '_' ? '' : e.target.value)}\n                input={<Input name={attr} id={attr + '-helper'} />}\n            >\n                {options.map(item => (<MenuItem key={'key-' + item.value} value={item.value || '_'}>{I18n.t(item.title)}</MenuItem>))}\n            </Select>\n            <FormHelperText>{I18n.t(title)}</FormHelperText>\n        </FormControl>);\n    }\n\n    renderCheckbox(title, attr, style) {\n        return (<FormControlLabel key={attr} style={Object.assign({paddingTop: 5}, style)} className={this.props.classes.controlElement}\n            control={\n                <Checkbox\n                    checked={this.props.native[attr]}\n                    onChange={() => this.props.onChange(attr, !this.props.native[attr])}\n                    color=\"primary\"\n                />\n            }\n            label={I18n.t(title)}\n        />);\n    }\n\n    getSelectIdDialog(attr) {\n        if (this.state.showSelectId) {\n            return (<DialogSelectID\n                key=\"dialogSelectID2\"\n                prefix={'../..'}\n                connection={this.props.socket}\n                selected={this.props.native[attr]}\n                statesOnly={true}\n                onClose={() => this.setState({showSelectId: false})}\n                onOk={selected => {\n                    this.setState({showSelectId: false});\n                    this.props.onChange(attr, selected);\n                }}\n            />);\n        } else {\n            return null;\n        }\n    }\n\n    render() {\n        return (\n            <form className={this.props.classes.tab}>\n                {this.renderInput('Cloud URL', 'cloudUrl')}<br/>\n                {this.renderSelect('Language', 'language', [\n                    {title: 'default', value: ''},\n                    {title: 'english', value: 'en'},\n                    {title: 'Deutsch', value: 'de'},\n                    {title: 'русский', value: 'ru'}\n                ], {marginTop: 10})}<br/>\n                {this.renderCheckbox('Place function in names first', 'functionFirst', {marginTop: 10})}<br/>\n                {this.renderInput('Concatenate words with', 'concatWord')}<br/>\n                {this.renderInput('Replace in names', 'replaces')}<br/>\n                <div className={this.props.classes.controlElement} style={{marginTop: 15}}>\n                    {this.renderInput('OFF level for switches in %', 'deviceOffLevel')}\n                    <FormHelperText>{I18n.t('(Set to 0 if behavior not desired)')}</FormHelperText>\n                </div>\n                <div className={this.props.classes.controlElement}>\n                    {this.renderInput('Write response to', 'responseOID')}\n                    <Fab size=\"small\" color=\"secondary\" onClick={() => this.setState({showSelectId: true})} aria-label=\"Add\" style={{marginLeft: 5, marginTop: 10}}><IconAdd /></Fab><br/>\n                </div>\n                <div className={this.props.classes.controlElement}>\n                    {this.renderCheckbox('Personal settings (only pro)', 'noCommon')}\n                    <FormHelperText>{Utils.renderTextWithA(I18n.t('help_tip'))}</FormHelperText><br/>\n                </div>\n                {this.renderCheckbox('Debug outputs', 'debug')}\n                {this.getSelectIdDialog('responseOID')}\n            </form>\n        );\n    }\n}\n\nExtendedOptions.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(ExtendedOptions);\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Input from '@material-ui/core/Input';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Fab from '@material-ui/core/Fab';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Chip from '@material-ui/core/Chip';\nimport {MdRefresh as IconRefresh} from 'react-icons/md';\nimport {MdClose as IconClose} from 'react-icons/md';\nimport {MdAdd as IconAdd} from 'react-icons/md';\n\nimport CopyContentImg from '@iobroker/adapter-react/assets/copy-content.svg';\nimport I18n from '@iobroker/adapter-react/i18n';\nimport Utils from '@iobroker/adapter-react/Components/Utils';\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        minHeight: '100%'\n    },\n    input: {\n        marginTop: 0,\n        minWidth: 400\n    },\n    fullSize: {\n        width: 'calc(100% - 64px)'\n    },\n    button: {\n        marginRight: 20,\n    },\n    card: {\n        maxWidth: 345,\n        textAlign: 'center'\n    },\n    media: {\n        height: 180,\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20\n    },\n    columnLogo: {\n        width: 350,\n        marginRight: 0\n    },\n    columnSettings: {\n        width: 'calc(100% - 370px)',\n    },\n    controlElement: {\n        //background: '#d2d2d2',\n        marginBottom: 5\n    },\n    chips: {\n        border: '1px solid #DDD',\n        borderRadius: 1,\n        width: 'calc(100% - 250px)',\n        display: 'inline-block',\n        padding: 5,\n        minHeight: 32,\n        marginLeft: 10,\n        marginTop: 20\n    },\n    chip: {\n        marginRight: 5\n    }\n});\n\nclass Services extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            running: false,\n            toast: '',\n            text2commandList: [],\n            nightscoutList: [],\n            addValue: '',\n            isInstanceAlive: false\n        };\n        this.onKeyChangedBound = this.onKeyChanged.bind(this);\n\n        this.props.socket.getAdapterInstances('text2command')\n            .then(list =>\n                this.props.socket.getAdapterInstances('nightscout')\n                    .then(nsList => this.setState({\n                        nightscoutList: nsList.map(obj => obj._id.replace('system.adapter.nightscout.', '')),\n                        text2commandList: list.map(obj => obj._id.replace('system.adapter.text2command.', ''))\n                    })));\n    }\n\n    componentWillMount() {\n        this.props.socket.subscribeState('iot.' + this.props.instance + '.certs.urlKey', this.onKeyChangedBound);\n\n        this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`).then(obj =>\n            this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state =>\n                this.setState({isInstanceAlive: obj && obj.common && obj.common.enabled && state && state.val})));\n    }\n\n    componentWillUnmount() {\n        this.props.socket.unsubscribeState('iot.' + this.props.instance + '.certs.urlKey', this.onKeyChangedBound);\n    }\n\n    onKeyChanged(id, state) {\n        this.setState({key: state.val});\n    }\n\n    renderInput(title, attr, type) {\n        return (<TextField\n            label={I18n.t(title)}\n            className={this.props.classes.input + ' ' + this.props.classes.controlElement}\n            value={this.props.native[attr]}\n            type={type || 'text'}\n            onChange={e => this.props.onChange(attr, e.target.value)}\n            margin=\"normal\"\n        />);\n    }\n\n    reissueUrlKey() {\n        this.setState({running: true});\n        return this.props.socket.setState('iot.' + this.props.instance + '.certs.urlKey', {val: '', ack: true})\n            .then(() => this.props.socket.getObject('system.adapter.iot.' + this.props.instance))\n            .then(obj => {\n                if (!obj || !obj.common || !obj.common.enabled) {\n                    this.setState({running: false, toast: I18n.t('Key will be updated after start')});\n                } else {\n                    return this.props.socket.setObject('system.adapter.iot.' + this.props.instance, obj);\n                }\n            })\n            .then(() => this.setState({running: false, toast: I18n.t('Certificates will be updated after initiated restart')}))\n            .catch(err => {\n                this.setState({running: false});\n                this.props.showError(err);\n            });\n    }\n\n    renderToast() {\n        if (!this.state.toast) return null;\n        return (\n            <Snackbar\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'left',\n                }}\n                open={true}\n                autoHideDuration={6000}\n                onClose={() => this.setState({toast: ''})}\n                ContentProps={{\n                    'aria-describedby': 'message-id',\n                }}\n                message={<span id=\"message-id\">{this.state.toast}</span>}\n                action={[\n                    <IconButton\n                        key=\"close\"\n                        aria-label=\"Close\"\n                        color=\"inherit\"\n                        className={this.props.classes.close}\n                        onClick={() => this.setState({toast: ''})}\n                    >\n                        <IconClose />\n                    </IconButton>,\n                ]}\n            />);\n    }\n\n    onChipsDelete(attr, value) {\n        const chips = (this.props.native[attr] || '').split(/[,;\\s]/).filter(a => !!a);\n        const pos = chips.indexOf(value);\n        if (pos !== -1) {\n            chips.splice(pos, 1);\n            this.props.onChange(attr, chips.join(' '));\n        }\n    }\n\n    onChipsAdd(attr) {\n        const chips = (this.props.native[attr] || '').split(/[,;\\s]/).filter(a => !!a);\n        const pos = chips.indexOf(this.state.addValue);\n        if (pos === -1) {\n            chips.push(this.state.addValue);\n            this.setState({addValue: ''}, () => this.props.onChange(attr, chips.join(' ')));\n        }\n    }\n\n    renderChips(label, attr) {\n        return (<div className={this.props.classes.chipsDiv}>\n            <FormHelperText>{Utils.renderTextWithA(I18n.t(label))}</FormHelperText>\n            <TextField\n                label={I18n.t('Add service')}\n                style={{width: 150}}\n                type={'text'}\n                value={this.state.addValue}\n                onKeyUp={e => e.keyCode === 13 && this.onChipsAdd(attr)}\n                onChange={e => this.setState({addValue: e.target.value.trim()})}\n                margin=\"normal\"\n            />\n\n            <Fab size=\"small\" color=\"secondary\" disabled={!this.state.addValue} onClick={() => this.onChipsAdd(attr)} style={{marginLeft: 5, marginTop: -15}}><IconAdd /></Fab>\n\n            <div className={this.props.classes.chips}>\n                {(this.props.native[attr] || '').split(/[,;\\s]/).filter(a => !!a)\n                .map(word =>\n                    (<Chip\n                        key={word}\n                        size=\"small\"\n                        label={word}\n                        onDelete={() => this.onChipsDelete(attr, word)}\n                        className={this.props.classes.chip}\n                    />))}\n            </div>\n        </div>);\n    }\n\n    render() {\n        return (\n            <form className={this.props.classes.tab}>\n                <Button\n                    variant=\"outlined\"\n                    disabled={!this.state.isInstanceAlive || this.state.running}\n                    color=\"primary\"\n                    title={!this.state.isInstanceAlive ? I18n.t('Instance must be enabled') : ''}\n                    onClick={() => this.reissueUrlKey()}>\n                    <IconRefresh />{I18n.t('Get new service URL key')}\n                </Button><br/>\n\n                {this.renderInput('IFTTT key', 'iftttKey')}<br/>\n\n                <TextField\n                    style={{marginTop: 10}}\n                    label={I18n.t('Use following link for IFTTT')}\n                    className={this.props.classes.input + ' ' + this.props.classes.controlElement + ' ' + this.props.classes.fullSize}\n                    value={`https://service.iobroker.in/v1/iotService?service=ifttt&key=${this.state.key}&user=${encodeURIComponent(this.props.native.login)}`}\n                    type=\"text\"\n                    readOnly={true}\n                    margin=\"normal\"\n                />\n                <Fab size=\"small\" style={{marginTop: 10, marginLeft: 5}} onClick={() => Utils.copyToClipboard(`https://service.iobroker.in/v1/iotService?service=ifttt&key=${this.state.key}&user=${encodeURIComponent(this.props.native.login)}`)} ><img src={CopyContentImg} alt=\"Copy\" /></Fab><br/>\n                <br/>\n\n                {this.renderChips('White list for services', 'allowedServices')}<br/>\n\n                <TextField\n                    style={{marginTop: 10}}\n                    label={I18n.t('Use following link for custom service')}\n                    className={this.props.classes.input + ' ' + this.props.classes.controlElement + ' ' + this.props.classes.fullSize}\n                    value={`https://service.iobroker.in/v1/iotService?service=custom_<SERVICE_NAME>&key=${this.state.key}&user=${encodeURIComponent(this.props.native.login)}&data=<SOME_TEXT>`}\n                    type=\"text\"\n                    readOnly={true}\n                    margin=\"normal\"\n                />\n                <Fab size=\"small\" style={{marginTop: 10, marginLeft: 5}} onClick={() => Utils.copyToClipboard(`https://service.iobroker.in/v1/iotService?service=custom_<SERVICE_NAME>&key=${this.state.key}&user=${encodeURIComponent(this.props.native.login)}&data=<SOME_TEXT>`)}><img src={CopyContentImg} alt=\"Copy\" /></Fab><br/>\n\n                <FormControl className={this.props.classes.input + ' ' + this.props.classes.controlElement} style={{paddingTop: 20}}>\n                    <Select\n                        value={this.props.native.text2command || '_'}\n                        onChange={e => this.props.onChange('text2command', e.target.value === '_' ? '' : e.target.value)}\n                        input={<Input name=\"text2command\" id=\"text2command-helper\" />}\n                    >\n                        <MenuItem key=\"key-default\" value={'_'}>{I18n.t('disabled')}</MenuItem>\n                        {this.state.text2commandList.map(item => (<MenuItem key={'key-' + item} value={item}>text2command.{item}</MenuItem>))}\n                    </Select>\n                    <FormHelperText>{I18n.t('Use text2command instance')}</FormHelperText>\n                </FormControl>\n                <br/>\n                <FormControl className={this.props.classes.input + ' ' + this.props.classes.controlElement} style={{paddingTop: 20}}>\n                    <Select\n                        value={this.props.native.nightscout || '_'}\n                        onChange={e => this.props.onChange('nightscout', e.target.value === '_' ? '' : e.target.value)}\n                        input={<Input name=\"nightscout\" id=\"nightscout-helper\" />}\n                    >\n                        <MenuItem key=\"key-default\" value={'_'}>{I18n.t('disabled')}</MenuItem>\n                        {this.state.nightscoutList.map(item => (<MenuItem key={'key-' + item} value={item}>nightscout.{item}</MenuItem>))}\n                    </Select>\n                    <FormHelperText>{I18n.t('Use Nightscout instance')}</FormHelperText>\n                </FormControl>\n                {this.renderToast()}\n            </form>\n        );\n    }\n}\n\nServices.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    adapterName: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n    onShowError: PropTypes.func,\n};\n\nexport default withStyles(styles)(Services);\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Switch from '@material-ui/core/Switch';\nimport {MdEdit as IconEdit} from 'react-icons/md';\n\nimport Utils from '@iobroker/adapter-react/Components/Utils'\nimport I18n from '@iobroker/adapter-react/i18n';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Dialog from '@material-ui/core/Dialog';\nimport MessageDialog from '@iobroker/adapter-react/Dialogs/Message';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst CHANGED_COLOR = '#e7000040';\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        height: '100%'\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20,\n        height: '100%',\n        overflow: 'hidden',\n        width: 'calc(50% - 20px)',\n        minWidth: 300,\n        maxWidth: 450\n    },\n    columnDiv: {\n        height: 'calc(100% - 60px)',\n        overflow: 'auto',\n        minWidth: 300\n    },\n    enumLineEnabled: {\n        position: 'absolute',\n        right: 0,\n        top: 0,\n    },\n    enumLineEdit: {\n        //float: 'right'\n        position: 'absolute',\n        top: 5,\n        right: 50\n    },\n    enumLineName: {\n\n    },\n    enumLineSubName:{\n        fontStyle: 'italic',\n    },\n    enumLine: {\n        height: 48,\n        width: '100%',\n        position: 'relative'\n    },\n    enumLineId: {\n        display: 'block',\n        fontStyle: 'italic',\n        fontSize: 12\n    },\n    columnHeader: {\n        background: theme.palette.primary.light,\n        padding: 10,\n        color: theme.palette.primary.contrastText\n    }\n});\n\nclass Enums extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            inAction: false,\n            editId: '',\n            editedSmartName: '',\n            funcs: [],\n            rooms: [],\n            changed: [],\n            message: '',\n            loading: true,\n        };\n\n        this.onEnumUpdateBound = this.onEnumUpdate.bind(this);\n\n        this.props.socket.getEnums()\n            .then(res => {\n                const funcs = [];\n                const rooms = [];\n                Object.keys(res).forEach(id => {\n                    if (id.match(/^enum\\.rooms\\./)) {\n                        rooms.push(res[id]);\n                    } else\n                    if (id.match(/^enum\\.functions\\./)) {\n                        funcs.push(res[id]);\n                    }\n                });\n\n                this.setState({funcs, rooms, loading: false});\n                return this.props.socket.subscribeObject('enum.*', this.onEnumUpdateBound);\n            });\n    }\n\n    componentWillUnmount() {\n        this.props.socket.unsubscribeObject('enum.*', this.onEnumUpdateBound).then(() => {});\n    }\n\n    onEnumUpdate(id, obj) {\n        this.removeChanged(id);\n        this.updateObjInState(id, obj);\n    }\n\n    informInstance(id) {\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'update', id);\n    }\n\n    addChanged(id) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        if (changed.indexOf(id) === -1) {\n            changed.push(id);\n            this.setState({changed});\n        }\n    }\n\n    removeChanged(id) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        const pos = changed.indexOf(id);\n\n        if (pos !== -1) {\n            changed.splice(pos, 1);\n            this.setState({changed});\n        }\n    }\n\n    updateObjInState(id, obj) {\n        // update obj\n        if (id.match(/^enum\\.functions\\./)) {\n            for (let i = this.state.funcs.length - 1; i >= 0 ; i--) {\n                if (this.state.funcs[i]._id === id) {\n                    const funcs = JSON.parse(JSON.stringify(this.state.funcs));\n                    if (obj) {\n                        funcs[i] = obj;\n                    } else {\n                        funcs.splice(i, 1);\n                    }\n                    this.setState({funcs});\n                    break;\n                }\n            }\n        } else\n        if (id.match(/^enum\\.rooms\\./)) {\n            for (let i = this.state.rooms.length - 1; i >= 0; i--) {\n                if (this.state.rooms[i]._id === id) {\n                    const rooms = JSON.parse(JSON.stringify(this.state.rooms));\n                    if (obj) {\n                        rooms[i] = obj;\n                    } else {\n                        rooms.splice(i, 1);\n                    }\n                    this.setState({rooms});\n                    break;\n                }\n            }\n        }\n    }\n\n    onToggleEnum(id) {\n        let obj = this.state.funcs.find(e => e._id === id) || this.state.rooms.find(e => e._id === id);\n\n        let smartName = Utils.getSmartNameFromObj(obj);\n        obj = JSON.parse(JSON.stringify(obj));\n        if (smartName !== false) {\n            Utils.disableSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n        } else {\n            Utils.removeSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n        }\n\n        this.addChanged(id);\n\n        this.props.socket.setObject(id, obj)\n            .then(() => {\n                // update obj\n                this.updateObjInState(id, obj);\n                this.informInstance(id);\n\n                setTimeout(() => this.removeChanged(id), 500);\n            });\n    }\n\n    onEdit(id) {\n        const obj = this.state.funcs.find(e => e._id === id) || this.state.rooms.find(e => e._id === id);\n        let smartName = Utils.getSmartNameFromObj(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n        if (typeof smartName === 'object' && smartName) {\n            smartName = smartName[I18n.getLanguage()] || smartName.en;\n        }\n        smartName = smartName || Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\n        this.setState({editId: id, editedSmartName: smartName});\n    }\n\n    renderEnum(obj) {\n        let smartName = Utils.getSmartNameFromObj(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n        // convert old format\n        if (smartName && typeof smartName === 'object') {\n            smartName = smartName[I18n.getLanguage()] || smartName.en || '';\n        }\n        let name = Utils.getObjectNameFromObj(obj);\n\n        return (<div key={obj._id} className={this.props.classes.enumLine} style={{background: this.state.changed.indexOf(obj._id) !== -1 ? CHANGED_COLOR : 'inherit'}}>\n            <span className={this.props.classes.enumLineName} style={{opacity: smartName === false ? 0.5: 1}}>{smartName || null}{smartName ? (<span className={this.props.classes.enumLineSubName}> ({name})</span>) : name}</span>\n            <span className={this.props.classes.enumLineId} style={{opacity: smartName === false ? 0.5: 1}}>{obj._id}</span>\n            <Switch\n                className={this.props.classes.enumLineEnabled}\n                checked={smartName !== false}\n                onChange={() => this.onToggleEnum(obj._id)}\n            />\n            <IconButton aria-label=\"Edit\" className={this.props.classes.enumLineEdit} onClick={() => this.onEdit(obj._id)}>\n                <IconEdit fontSize=\"small\" />\n            </IconButton>\n\n        </div>);\n    }\n\n    renderEnums(name) {\n        return this.state[name].map(e => this.renderEnum(e));\n    }\n\n    renderMessage() {\n        if (this.state.message) {\n            return (<MessageDialog text={this.state.message} onClose={() => this.setState({message: ''})}/>);\n        } else {\n            return null;\n        }\n    }\n\n    changeSmartName() {\n        // Check if the name is duplicate\n        let enums = this.state.editId.startsWith('enum.functions.') ? this.state.funcs : this.state.rooms;\n        if (enums.find(obj =>\n            this.state.editId !== obj._id && (\n            this.state.editedSmartName === Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()}) ||\n            this.state.editedSmartName === Utils.getSmartNameFromObj(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon)))) {\n            this.setState({message: I18n.t('Duplicate name')});\n        } else {\n            this.addChanged(this.state.editId);\n            setTimeout(() => this.removeChanged(this.state.editId), 500);\n            const id = this.state.editId;\n            this.setState({editId: ''});\n            let newObj;\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, this.state.editedSmartName, undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    newObj = obj;\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.updateObjInState(id, newObj);\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        }\n    }\n\n    renderEditDialog() {\n        if (this.state.editId) {\n            const obj = this.state.funcs.find(e => e._id === this.state.editId) || this.state.rooms.find(e => e._id === this.state.editId);\n\n            return (<Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"message-dialog-title\"\n                aria-describedby=\"message-dialog-description\"\n            >\n                <DialogTitle id=\"message-dialog-title\">{this.props.title || I18n.t('Smart name for %s', Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()}))}</DialogTitle>\n                <DialogContent>\n                    <TextField\n                        style={{width: '100%'}}\n                        label={I18n.t('Smart name')}\n                        onChange={e => this.setState({editedSmartName: e.target.value})}\n                        value={this.state.editedSmartName}\n                        helperText={I18n.t('You can enter several names divided by comma')}\n                        margin=\"normal\"\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.changeSmartName()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\n                    <Button onClick={() => this.setState({editId: ''})}>{I18n.t('Cancel')}</Button>\n                </DialogActions>\n            </Dialog>)\n        } else {\n            return null;\n        }\n    }\n\n    render() {\n        if (this.state.loading) {\n            return (<CircularProgress />);\n        }\n        return (\n            <form className={this.props.classes.tab}>\n                <div className={this.props.classes.column}>\n                    <h5 className={this.props.classes.columnHeader}>{I18n.t('Rooms')}</h5>\n                    <div className={this.props.classes.columnDiv}>{this.renderEnums('rooms')}</div>\n                </div>\n                <div className={this.props.classes.column}>\n                    <h5 className={this.props.classes.columnHeader}>{I18n.t('Functions')}</h5>\n                    <div className={this.props.classes.columnDiv}>{this.renderEnums('funcs')}</div>\n                </div>\n                {this.renderMessage()}\n                {this.renderEditDialog()}\n            </form>\n        );\n    }\n}\n\nEnums.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    adapterName: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Enums);\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Fab from '@material-ui/core/Fab';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Input from '@material-ui/core/Input';\nimport Badge from '@material-ui/core/Badge';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\n\nimport {MdEdit as IconEdit} from 'react-icons/md';\nimport {MdAdd as IconAdd} from 'react-icons/md';\nimport {MdRefresh as IconRefresh} from 'react-icons/md';\nimport {MdClear as IconClear} from 'react-icons/md';\nimport {MdDelete as IconDelete} from 'react-icons/md';\nimport {MdFormatAlignJustify as IconExpand} from 'react-icons/md';\nimport {MdDragHandle as IconCollapse} from 'react-icons/md';\n\nimport {FaPowerOff as IconOn} from 'react-icons/fa';\nimport {FaThermometerHalf as IconTemperature} from 'react-icons/fa';\nimport {FaLongArrowAltUp as IconUp} from 'react-icons/fa';\nimport {FaLongArrowAltDown as IconDown} from 'react-icons/fa';\nimport {FaPercentage as IconPercentage} from 'react-icons/fa';\nimport {FaPalette as IconColor} from 'react-icons/fa';\nimport {FaLightbulb as IconBulb} from 'react-icons/fa';\nimport {FaLockOpen as IconLock} from 'react-icons/fa';\nimport {FaThermometer as IconThermometer} from 'react-icons/fa';\n\nimport Utils from '@iobroker/adapter-react/Components/Utils'\nimport I18n from '@iobroker/adapter-react/i18n';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Dialog from '@material-ui/core/Dialog';\nimport MessageDialog from '@iobroker/adapter-react/Dialogs/Message';\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\n\nconst colorOn = '#aba613';\nconst colorOff = '#444';\nconst colorSet = '#00c6ff';\nconst colorRead = '#00bc00';\nconst CHANGED_COLOR = '#e7000040';\nconst DEFAULT_CHANNEL_COLOR = '#e9e9e9';\nconst LAST_CHANGED_COLOR = '#b4ffbe';\n\nconst actionsMapping = {\n    turnOn: {color: colorOn, icon: IconOn, desc: 'Turn on'},\n    turnOff: {color: colorOff, icon: IconOn, desc: 'Turn off'},\n\n    setTargetTemperature: {color: colorSet, icon: IconTemperature, desc: 'Set target temperature'},\n    incrementTargetTemperature: {color: colorOn, icon: IconUp, desc: 'Increment target temperature'},\n    decrementTargetTemperature: {color: colorOff, icon: IconDown, desc: 'Decrement target temperature'},\n\n    setPercentage: {color: colorSet, icon: IconPercentage, desc: 'Set percentage'},\n    incrementPercentage: {color: colorOn, icon: IconUp, desc: 'Increment percentage'},\n    decrementPercentage: {color: colorOff, icon: IconDown, desc: 'Decrement percentage'},\n\n    setColor: {color: colorSet, icon: IconColor, desc: 'Set color'},\n\n    setColorTemperature: {color: colorSet, icon: IconBulb, desc: 'Set color temperature'},\n    incrementColorTemperature: {color: colorOn, icon: IconUp, desc: 'Increment color temperature'},\n    decrementColorTemperature: {color: colorOff, icon: IconDown, desc: 'Decrement color temperature'},\n\n    getTargetTemperature: {color: colorRead, icon: IconThermometer, desc: 'Get target temperature'},\n    getTemperatureReading: {color: colorRead, icon: IconThermometer, desc: 'Get actual temperature'},\n\n    setLockState: {color: colorSet, icon: IconLock, desc: 'Set lock state'},\n    getLockState: {color: colorRead, icon: IconLock, desc: 'Read lock state'},\n};\n\nconst SMARTTYPES = ['LIGHT', 'SWITCH', 'THERMOSTAT', 'ACTIVITY_TRIGGER', 'SCENE_TRIGGER', 'SMARTPLUG', 'SMARTLOCK', 'CAMERA'];\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        height: '100%'\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20,\n        height: '100%',\n        overflow: 'hidden'\n    },\n    columnDiv: {\n        height: 'calc(100% - 40px)',\n        overflow: 'auto',\n        minWidth: 300\n    },\n    filter: {\n        margin: 0\n    },\n    button: {\n        marginRight: 20\n    },\n    devLineExpand: {\n        marginRight: 10,\n    },\n    devLineEnabled: {\n        position: 'absolute',\n        right: 0,\n        top: 0,\n    },\n    devLineEdit: {\n        position: 'absolute',\n        top: 5,\n        right: 50\n    },\n    devLineDelete: {\n        position: 'absolute',\n        top: 5,\n        right: 0\n    },\n    devLineName: {\n\n    },\n    devLineNumber:{\n        display: 'inline-block',\n        verticalAlign: 'middle',\n        width: 15,\n    },\n    editedId: {\n        fontStyle: 'italic'\n    },\n    enumLineSubName:{\n        fontStyle: 'italic',\n    },\n    devLine: {\n        height: 48,\n        width: '100%',\n        position: 'relative'\n    },\n    devLineDescription: {\n        display: 'block',\n        fontStyle: 'italic',\n        fontSize: 12\n    },\n    devLineActions: {\n        fontStyle: 'italic',\n        fontSize: 12,\n        paddingLeft: 50,\n        display: 'inline-block',\n    },\n    devLineProgress: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n    },\n    channelLineActions: {\n        width: 80\n    },\n    devLineNameBlock: {\n        display: 'inline-block',\n        width: 'calc(100% - 350px)'\n    },\n    columnHeader: {\n        background: theme.palette.primary.light,\n        padding: 10,\n        color: theme.palette.primary.contrastText\n    },\n    devModified: {\n        fontStyle: 'italic'\n    },\n    actionIcon: {\n        width: 16\n    },\n\n    devSubLine: {\n        position: 'relative',\n        height: 48\n    },\n    devSubLineName: {\n        marginLeft: 5,\n        marginTop: 14,\n        display: 'inline-block',\n        fontSize: 13,\n        width: 'calc(100% - 400px)'\n    },\n    devSubSubLineName:  {\n        fontSize: 8,\n        fontStyle: 'italic',\n        display: 'block'\n    },\n    devSubLineByOn: {\n        marginLeft: 5\n    },\n    devSubLineDelete: {\n        position: 'absolute',\n        top: 12,\n        right: 12,\n        padding: 0\n    },\n    devSubLineEdit: {\n        position: 'absolute',\n        top: 12,\n        right: 62,\n        padding: 0\n    },\n    devSubLineTypeTitle: {\n        marginTop: 0\n    }\n});\n\nclass AlexaSmartNames extends Component {\n    constructor(props) {\n        super(props);\n\n        if (!actionsMapping.translated) {\n            Object.keys(actionsMapping).forEach(a => actionsMapping[a].desc = I18n.t(actionsMapping[a].desc));\n            actionsMapping.translated = true;\n        }\n\n        this.state = {\n            editedSmartName: '',\n            editId: '',\n            editObjectName: '',\n            deleteId: '',\n\n            showSelectId: false,\n            showConfirmation: '',\n            changed: [],\n            devices: [],\n            message: '',\n            filter: '',\n            loading: true,\n            browse: false,\n            expanded: [],\n            lastChanged: ''\n        };\n\n        this.timerChanged = null;\n        this.browseTimer = null;\n        this.browseTimerCount = 0;\n        this.editedSmartName = '';\n\n        this.waitForUpdateID = null;\n        this.onReadyUpdateBound = this.onReadyUpdate.bind(this);\n        this.onResultUpdateBound = this.onResultUpdate.bind(this);\n\n        this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`).then(obj => {\n            this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state => {\n                if (!obj || !obj.common || (!obj.common.enabled && (!state || !state.val))) {\n                    this.setState({message: I18n.t('Instance must be enabled'), loading: false, devices: []});\n                } else {\n                    this.browse();\n                }\n            });\n        });\n    }\n\n    browse(isIndicate) {\n        if (Date.now() - this.lastBrowse < 500) return;\n        this.lastBrowse = Date.now();\n        if (isIndicate) {\n            this.setState({loading: true, browse: true});\n        } else {\n            this.setState({browse: true});\n        }\n        console.log('Send BROWSE!');\n        this.browseTimer = setTimeout(() => {\n            console.log('Browse timeout!');\n            this.browseTimer = null;\n            this.browseTimerCount++;\n            if (this.browseTimerCount < 5) {\n                this.browse(isIndicate);\n            } else {\n                this.setState({message: I18n.t('Cannot read devices!')});\n            }\n        }, 10000);\n\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'browse', null, list => {\n            this.browseTimer && clearTimeout(this.browseTimer);\n            this.browseTimerCount = 0;\n            this.browseTimer = null;\n            if (this.waitForUpdateID) {\n                if (!this.onEdit(this.waitForUpdateID, list)) {\n                    this.setState({message: I18n.t('Device %s was not added', this.waitForUpdateID)});\n                }\n                this.waitForUpdateID = null;\n            }\n            console.log('BROWSE received.');\n\n            this.setState({devices: list, loading: false, changed: [], browse: false});\n        });\n    }\n\n    onReadyUpdate(id, state) {\n        console.log('Update ' + id + ' ' + state.val + '/' + state.ack);\n        if (state && state.ack === true && state.val === true) {\n            if (this.devTimer) clearTimeout(this.devTimer);\n            this.devTimer = setTimeout(() => {\n                this.devTimer = null;\n                this.browse();\n            }, 300);\n        }\n    }\n\n    onResultUpdate(id, state) {\n        state && state.ack === true && state.val && this.setState({message: state.val});\n    }\n\n    componentWillMount() {\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updates`, this.onReadyUpdateBound);\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\n    }\n\n    componentWillUnmount() {\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updates`, this.onReadyUpdateBound);\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\n        if (this.timerChanged) {\n            clearTimeout(this.timerChanged);\n            this.timerChanged = null;\n        }\n    }\n\n    informInstance(id) {\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'update', id);\n    }\n\n    addChanged(id, cb) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        if (changed.indexOf(id) === -1) {\n            changed.push(id);\n            this.setState({changed}, () => cb && cb());\n        } else {\n            cb && cb();\n        }\n    }\n\n    removeChanged(id) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        const pos = changed.indexOf(id);\n\n        if (pos !== -1) {\n            changed.splice(pos, 1);\n            this.setState({changed});\n        }\n    }\n\n    onEdit(id, devices) {\n        devices = devices || this.state.devices;\n        const device = devices.find(dev => dev.additionalApplianceDetails.id === id);\n        if (device) {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    let smartName = device.additionalApplianceDetails.friendlyNames ? device.additionalApplianceDetails.friendlyNames : device.friendlyName;\n                    if (typeof smartName === 'object' && smartName) {\n                        smartName = smartName[I18n.getLanguage()] || smartName.en;\n                    }\n                    this.editedSmartName = smartName;\n                    this.setState({editId: id, editedSmartName: smartName, editObjectName: Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()})});\n                });\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    onAskDelete(deleteId) {\n        this.setState({deleteId, showConfirmation: true});\n    }\n\n    onDelete() {\n        let id = this.state.deleteId;\n        // const device = this.state.devices.find(dev => dev.additionalApplianceDetails.id === id);\n        this.addChanged(id, () => {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.disableSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    this.setState({deleteId: '', showConfirmation: false, lastChanged: id});\n\n                    this.timerChanged && clearTimeout(this.timerChanged);\n                    this.timerChanged = setTimeout(() => {\n                        this.setState({lastChanged: ''});\n                        this.timerChanged = null;\n                    }, 30000);\n\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderActions(dev) {\n        // Type\n        const actions = [];\n        if (!dev.actions) {\n            console.log('Something went wrong');\n            return null;\n        }\n        dev.actions.sort((a, b) => {\n            if (a === b) return 0;\n            if (a === 'turnOn') return -1;\n            if (b === 'turnOn') return 1;\n\n            if (a === 'turnOff') return -1;\n            if (b === 'turnOff') return 1;\n            return 0;\n        });\n\n        Object.keys(actionsMapping).forEach(action => {\n            if (dev.actions.indexOf(action) !== -1) {\n                const Icon = actionsMapping[action].icon;\n                actions.push((<span key={action} title={actionsMapping[action].desc}><Icon className={this.props.classes.actionIcon} style={{color: actionsMapping[action].color}}/></span>));\n            }\n        });\n        // add unknown actions\n        for (let a = 0; a < dev.actions.length; a++) {\n            if (!actionsMapping[dev.actions[a]]) {\n                actions.push((<span key={dev.actions[a]}>{dev.actions[a]}</span>));\n            }\n        }\n        return actions;\n    }\n\n    onExpand(lineNum) {\n        const expanded = JSON.parse(JSON.stringify(this.state.expanded));\n        const pos = expanded.indexOf(this.state.devices[lineNum].friendlyName);\n        if (pos === -1) {\n            expanded.push(this.state.devices[lineNum].friendlyName);\n        } else {\n            expanded.splice(pos, 1);\n        }\n        this.setState({expanded});\n    }\n\n    renderSelectByOn(dev, lineNum, id, type) {\n        // type = '-', 'stored', false or number [5-100]\n        if (type !== false) {\n            const items = [\n                (<MenuItem key=\"_\" value=\"\"><em>{I18n.t('Default')}</em></MenuItem>),\n                (<MenuItem key=\"last\" value=\"stored\">{I18n.t('last value')}</MenuItem>)\n            ];\n            for (let i = 5; i <= 100; i += 5) {\n                items.push((<MenuItem  key={i.toString()} value={i.toString()}>{i}%</MenuItem>));\n            }\n            return (<FormControl className={this.props.classes.devSubLineByOn}>\n                <Select className={this.props.classes.devSubLineByOnSelect} value={(type || '').toString()} onChange={e => this.onParamsChange(id, e.target.value)}>{items}</Select>\n                <FormHelperText className={this.props.classes.devSubLineTypeTitle}>{I18n.t('by ON')}</FormHelperText>\n            </FormControl>);\n        } else {\n            return null;\n        }\n    }\n\n    onParamsChange(id, byON, type) {\n        this.addChanged(id, () => {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, undefined, byON, type, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n\n                    if (this.state.lastChanged !== id) {\n                        this.setState({lastChanged: id});\n                        this.timerChanged && clearTimeout(this.timerChanged);\n                        this.timerChanged = setTimeout(() => {\n                            this.setState({lastChanged: ''});\n                            this.timerChanged = null;\n                        }, 30000);\n                    }\n\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderSelectType(dev, lineNum, id, type) {\n        if (type !== false) {\n            const items = [\n                (<MenuItem key=\"_\" value=\"_\"><em>{I18n.t('no type')}</em></MenuItem>)\n            ];\n            for (let i = 0; i < SMARTTYPES.length; i++) {\n                items.push((<MenuItem  key={SMARTTYPES[i]} value={SMARTTYPES[i]}><em>{I18n.t(SMARTTYPES[i])}</em></MenuItem>));\n            }\n            return (\n                <FormControl>\n                    <Select value={type || '_'} onChange={e => this.onParamsChange(id, undefined, e.target.value)}>{items}</Select>\n                    <FormHelperText className={this.props.classes.devSubLineTypeTitle}>{I18n.t('Types')}</FormHelperText>\n                </FormControl>);\n        } else {\n            return '';\n        }\n    }\n\n    renderChannels(dev, lineNum) {\n        const result = [];\n        const classes = this.props.classes;\n\n        if (dev.additionalApplianceDetails.group) {\n            const channels   = dev.additionalApplianceDetails.channels;\n            const names      = dev.additionalApplianceDetails.names;\n            const types      = dev.additionalApplianceDetails.byONs;\n            const smarttypes = dev.additionalApplianceDetails.smartTypes;\n\n            let c = 0;\n            for (const chan in channels) {\n                if (channels.hasOwnProperty(chan)) {\n                    for (let i = 0; i < channels[chan].length; i++) {\n                        const id = channels[chan][i].id;\n                        let background = this.state.changed.indexOf(id) !== -1 ? CHANGED_COLOR : DEFAULT_CHANNEL_COLOR;\n                        if (this.state.lastChanged === id && background === DEFAULT_CHANNEL_COLOR) {\n                            background = LAST_CHANGED_COLOR;\n                        }\n                        result.push((<div key={'sub' + id} className={classes.devSubLine} style={(c % 2) ? {} : {background}}>\n                            <div className={this.props.classes.devLineActions + ' ' + this.props.classes.channelLineActions}>{this.renderActions(channels[chan][i])}</div>\n                            <div className={classes.devSubLineName} title={id}>{(names[id] || id)}\n                                {id !== names[id] ? (<span className={classes.devSubSubLineName}>{id}</span>) : null}\n                            </div>\n                            {this.renderSelectType(dev, lineNum, id, smarttypes[id])}\n                            {this.renderSelectByOn(dev, lineNum, id, types[id])}\n                            <IconButton aria-label=\"Delete\" className={this.props.classes.devSubLineDelete} onClick={() => this.onAskDelete(id, lineNum)}><IconDelete fontSize=\"middle\" /></IconButton>\n                        </div>));\n                        c++;\n                    }\n                }\n            }\n        } else {\n            const id = dev.additionalApplianceDetails.id;\n            const name = dev.additionalApplianceDetails.name || id;\n            let background = this.state.changed.indexOf(id) !== -1 ? CHANGED_COLOR : DEFAULT_CHANNEL_COLOR;\n            if (this.state.lastChanged === id && background === DEFAULT_CHANNEL_COLOR) {\n                background = LAST_CHANGED_COLOR;\n            }\n            result.push((<div key={'sub' + id} className={classes.devSubLine} style={{background}}>\n                <div className={this.props.classes.devLineActions + ' ' + this.props.classes.channelLineActions} style={{width: 80}}>{this.renderActions(dev)}</div>\n                <div className={classes.devSubLineName} title={(id || '')}>{name}</div>\n                {this.renderSelectType(dev, lineNum, id, dev.additionalApplianceDetails.smartType)}\n                {this.renderSelectByOn(dev, lineNum, id, dev.additionalApplianceDetails.byON)}\n            </div>));\n        }\n        return result;\n    }\n\n    renderDevice(dev, lineNum) {\n        let friendlyName = dev.friendlyName;\n        let title;\n        if (!dev.additionalApplianceDetails.group && dev.additionalApplianceDetails.nameModified) {\n            title = friendlyName;\n        } else {\n            title = (<span className={this.props.classes.devModified} title={I18n.t('modified')}>{friendlyName}</span>);\n        }\n\n        let devCount = 0;\n        for (const ch in dev.additionalApplianceDetails.channels) {\n            if (dev.additionalApplianceDetails.channels.hasOwnProperty(ch)) {\n                devCount += dev.additionalApplianceDetails.channels[ch].length;\n            }\n        }\n        devCount = devCount || 1;\n        const expanded = this.state.expanded.indexOf(friendlyName) !== -1;\n        const id = dev.additionalApplianceDetails.id;\n\n        let background = (lineNum % 2) ? '#f1f1f1' : 'inherit';\n        const changed = this.state.changed.indexOf(id) !== -1;\n        if (changed) {\n            background = CHANGED_COLOR;\n        } else if (id === this.state.lastChanged) {\n            background = LAST_CHANGED_COLOR;\n        }\n\n        // If some of sub channels in change list or in last changed\n        if (dev.additionalApplianceDetails.group && !changed && id !== this.state.lastChanged) {\n            const channels = dev.additionalApplianceDetails.channels;\n            for (const chan in channels) {\n                if (channels.hasOwnProperty(chan)) {\n                    for (let i = 0; i < channels[chan].length; i++) {\n                        const id = channels[chan][i].id;\n                        if (this.state.changed.indexOf(id) !== -1) {\n                            background = CHANGED_COLOR;\n                        } else if (this.state.lastChanged === id) {\n                            background = LAST_CHANGED_COLOR;\n                        }\n                    }\n                }\n            }\n        }\n\n        return [\n            (<div key={'line' + lineNum} className={this.props.classes.devLine} style={{background}}>\n                <div className={this.props.classes.devLineNumber}>{lineNum + 1}.</div>\n                <IconButton className={this.props.classes.devLineExpand} onClick={() => this.onExpand(lineNum)}>\n                    {devCount > 1 ?\n                        (<Badge badgeContent={devCount} color=\"primary\">\n                            {expanded ? (<IconCollapse/>) : (<IconExpand />)}\n                        </Badge>) :\n                        (expanded ? (<IconCollapse/>) : (<IconExpand />))}\n                </IconButton>\n                <div className={this.props.classes.devLineNameBlock} style={{display: 'inline-block', position: 'relative'}}>\n                    <span className={this.props.classes.devLineName}>{title}</span>\n                    <span className={this.props.classes.devLineDescription}>{dev.friendlyDescription}</span>\n                    {changed ? (<CircularProgress className={this.props.classes.devLineProgress} size={20}/>) : null}\n                </div>\n                <span className={this.props.classes.devLineActions}>{this.renderActions(dev)}</span>\n                {!dev.additionalApplianceDetails.group ?\n                    (<IconButton aria-label=\"Edit\" className={this.props.classes.devLineEdit} onClick={() => this.onEdit(id)}><IconEdit fontSize=\"middle\" /></IconButton>) : null}\n                {!dev.additionalApplianceDetails.group ?\n                    (<IconButton aria-label=\"Delete\" className={this.props.classes.devLineDelete} onClick={() => this.onAskDelete(id)}><IconDelete fontSize=\"middle\" /></IconButton>) : null}\n            </div>),\n            expanded ? this.renderChannels(dev, lineNum) : null\n        ];\n    }\n\n    renderMessage() {\n        if (this.state.message) {\n            return (<MessageDialog text={this.state.message} onClose={() => this.setState({message: ''})}/>);\n        } else {\n            return null;\n        }\n    }\n\n    changeSmartName(e) {\n        e && e.preventDefault();\n        // Check if the name is duplicate\n        this.addChanged(this.state.editId, () => {\n            const id = this.state.editId;\n            this.setState({editId: '', editObjectName: '', lastChanged: id});\n\n            this.timerChanged && clearTimeout(this.timerChanged);\n            this.timerChanged = setTimeout(() => {\n                this.setState({lastChanged: ''});\n                this.timerChanged = null;\n            }, 30000);\n\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, this.editedSmartName, undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderEditDialog() {\n        if (this.state.editId) {\n            return (<Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"message-dialog-title\"\n                aria-describedby=\"message-dialog-description\"\n            >\n                <DialogTitle id=\"message-dialog-title\">{this.props.title || I18n.t('Smart name for %s', this.state.editObjectName)}</DialogTitle>\n                <DialogContent>\n                    <p><span>ID:</span> <span className={this.props.classes.editedId}>{this.state.editId}</span></p>\n                    <TextField\n                        style={{width: '100%'}}\n                        label={I18n.t('Smart name')}\n                        onKeyDown={e =>\n                            e.keyCode === 13 && this.changeSmartName(e)}\n                        onChange={e => this.editedSmartName = e.target.value}\n                        defaultValue={this.state.editedSmartName}\n                        helperText={I18n.t('You can enter several names divided by comma')}\n                        margin=\"normal\"\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.changeSmartName()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\n                    <Button onClick={() => {\n                        this.editedSmartName = null;\n                        this.setState({editId: '', editedSmartName: ''});\n                    }}>{I18n.t('Cancel')}</Button>\n                </DialogActions>\n            </Dialog>)\n        } else {\n            return null;\n        }\n    }\n\n    renderConfirmDialog() {\n        if (this.state.showConfirmation) {\n            return (<Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"confirmation-dialog-title\"\n                aria-describedby=\"confirmation-dialog-description\"\n            >\n                <DialogTitle id=\"confirmation-dialog-title\">{this.props.title || I18n.t('Device will be disabled.')}</DialogTitle>\n                <DialogContent>\n                    <p>{I18n.t('Are you sure?')}</p>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.onDelete()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\n                    <Button onClick={() => this.setState({showConfirmation: ''})}>{I18n.t('Cancel')}</Button>\n                </DialogActions>\n            </Dialog>)\n        } else {\n            return null;\n        }\n    }\n\n    getSelectIdDialog() {\n        if (this.state.showSelectId) {\n            return (<DialogSelectID\n                key=\"dialogSelectID1\"\n                prefix={'../..'}\n                connection={this.props.socket}\n                selected={''}\n                statesOnly={true}\n                onClose={() => this.setState({showSelectId: false})}\n                onOk={(selected, name) => {\n                    this.setState({showSelectId: false});\n\n                    this.props.socket.getObject(selected)\n                        .then(obj => {\n                            if (obj) {\n                                const name = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\n                                Utils.updateSmartName(obj, (name || I18n.t('Device name')).replace(/[-_.]+/g, ' '), undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                                this.addChanged(obj._id);\n                                this.waitForUpdateID = obj._id;\n\n                                if (this.state.lastChanged !== obj._id) {\n                                    this.setState({lastChanged: obj._id});\n                                    this.timerChanged && clearTimeout(this.timerChanged);\n                                    this.timerChanged = setTimeout(() => {\n                                        this.setState({lastChanged: ''});\n                                        this.timerChanged = null;\n                                    }, 30000);\n                                }\n\n                                this.props.socket.setObject(obj._id, obj)\n                                    .then(() => this.informInstance(obj._id))\n                                    .catch(err => this.setState({message: err}));\n                            } else {\n                                this.setState({message: I18n.t('Invalid ID')});\n                            }\n                        });\n                }}\n            />);\n        } else {\n            return null;\n        }\n    }\n\n    renderDevices() {\n        const filter = this.state.filter.toLowerCase();\n        const result = [];\n        for (let i = 0; i < this.state.devices.length; i++) {\n            if (this.state.filter && this.state.devices[i].friendlyName.toLowerCase().indexOf(filter) === -1 ) continue;\n            result.push(this.renderDevice(this.state.devices[i], i));\n        }\n        return (<div key=\"listDevices\" className={this.props.classes.columnDiv}>{result}</div>);\n    }\n\n    render() {\n        if (this.state.loading) {\n            return (<CircularProgress  key=\"alexaProgress\" />);\n        }\n\n        return (\n            <form key=\"alexa\" className={this.props.classes.tab}>\n                <Fab size=\"small\" color=\"secondary\" aria-label=\"Add\" className={this.props.classes.button} onClick={() => this.setState({showSelectId: true})}><IconAdd /></Fab>\n                <Fab size=\"small\" color=\"primary\" aria-label=\"Refresh\" className={this.props.classes.button}\n                      onClick={() => this.browse(true)} disabled={this.state.browse}>{this.state.browse ? (<CircularProgress size={20} />) : (<IconRefresh/>)}</Fab>\n\n                <Input\n                    placeholder={I18n.t('Filter')}\n                    className={this.state.filter}\n                    value={this.state.filter}\n                    onChange={e => this.setState({filter: e.target.value})}\n                />\n                <IconButton aria-label=\"Clear\" className={this.props.classes.button} onClick={() => this.setState({filter: ''})}><IconClear fontSize=\"large\" /></IconButton>\n                {this.renderDevices()}\n                {this.renderMessage()}\n                {this.renderEditDialog()}\n                {this.getSelectIdDialog()}\n                {this.renderConfirmDialog()}\n            </form>\n        );\n    }\n}\n\nAlexaSmartNames.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    adapterName: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(AlexaSmartNames);\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Fab from '@material-ui/core/Fab';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Input from '@material-ui/core/Input';\nimport Badge from '@material-ui/core/Badge';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\n\nimport {MdEdit as IconEdit} from 'react-icons/md';\nimport {MdAdd as IconAdd} from 'react-icons/md';\nimport {MdRefresh as IconRefresh} from 'react-icons/md';\nimport {MdClear as IconClear} from 'react-icons/md';\nimport {MdDelete as IconDelete} from 'react-icons/md';\nimport {MdFormatAlignJustify as IconExpand} from 'react-icons/md';\nimport {MdDragHandle as IconCollapse} from 'react-icons/md';\n\nimport {FaPowerOff as IconOn} from 'react-icons/fa';\nimport {FaThermometerHalf as IconTemperature} from 'react-icons/fa';\nimport {FaLongArrowAltUp as IconUp} from 'react-icons/fa';\nimport {FaLongArrowAltDown as IconDown} from 'react-icons/fa';\nimport {FaPercentage as IconPercentage} from 'react-icons/fa';\nimport {FaPalette as IconColor} from 'react-icons/fa';\nimport {FaLightbulb as IconBulb} from 'react-icons/fa';\nimport {FaLockOpen as IconLock} from 'react-icons/fa';\nimport {FaThermometer as IconThermometer} from 'react-icons/fa';\n\nimport Utils from '@iobroker/adapter-react/Components/Utils'\nimport I18n from '@iobroker/adapter-react/i18n';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Dialog from '@material-ui/core/Dialog';\nimport MessageDialog from '@iobroker/adapter-react/Dialogs/Message';\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\n\nconst colorOn = '#aba613';\nconst colorOff = '#444';\nconst colorSet = '#00c6ff';\nconst colorRGB = '#ff7ee3';\nconst colorRead = '#00bc00';\nconst CHANGED_COLOR = '#e7000040';\nconst DEFAULT_CHANNEL_COLOR = '#e9e9e9';\nconst LAST_CHANGED_COLOR = '#b4ffbe';\n\nconst actionsMapping = {\n    OnOff: {color: colorOn, icon: IconOn, desc: 'On/Off'},\n    Brightness: {color: colorSet, icon: IconBulb, desc: 'Dimmer'},\n    RGB: {color: colorRGB, icon: IconBulb, desc: 'Set color'},\n\n    setTargetTemperature: {color: colorSet, icon: IconTemperature, desc: 'Set target temperature'},\n    incrementTargetTemperature: {color: colorOn, icon: IconUp, desc: 'Increment target temperature'},\n    decrementTargetTemperature: {color: colorOff, icon: IconDown, desc: 'Decrement target temperature'},\n\n    incrementPercentage: {color: colorOn, icon: IconUp, desc: 'Increment percentage'},\n    decrementPercentage: {color: colorOff, icon: IconDown, desc: 'Decrement percentage'},\n\n    setColor: {color: colorSet, icon: IconColor, desc: 'Set color'},\n\n    incrementColorTemperature: {color: colorOn, icon: IconUp, desc: 'Increment color temperature'},\n    decrementColorTemperature: {color: colorOff, icon: IconDown, desc: 'Decrement color temperature'},\n\n    getTargetTemperature: {color: colorRead, icon: IconThermometer, desc: 'Get target temperature'},\n    getTemperatureReading: {color: colorRead, icon: IconThermometer, desc: 'Get actual temperature'},\n\n    setLockState: {color: colorSet, icon: IconLock, desc: 'Set lock state'},\n    getLockState: {color: colorRead, icon: IconLock, desc: 'Read lock state'},\n};\n\nconst SMARTTYPES = ['LIGHT', 'SWITCH', 'THERMOSTAT', 'ACTIVITY_TRIGGER', 'SCENE_TRIGGER', 'SMARTPLUG', 'SMARTLOCK', 'CAMERA'];\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        height: '100%'\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20,\n        height: '100%',\n        overflow: 'hidden'\n    },\n    columnDiv: {\n        height: 'calc(100% - 40px)',\n        overflow: 'auto',\n        minWidth: 300\n    },\n    filter: {\n        margin: 0\n    },\n    button: {\n        marginRight: 20\n    },\n    devLineExpand: {\n        marginRight: 10,\n    },\n    devLineEnabled: {\n        position: 'absolute',\n        right: 0,\n        top: 0,\n    },\n    devLineEdit: {\n        position: 'absolute',\n        top: 5,\n        right: 50\n    },\n    devLineDelete: {\n        position: 'absolute',\n        top: 5,\n        right: 0\n    },\n    devLineName: {\n\n    },\n    devLineNumber:{\n        display: 'inline-block',\n        verticalAlign: 'middle',\n        width: 15,\n    },\n    editedId: {\n        fontStyle: 'italic'\n    },\n    enumLineSubName:{\n        fontStyle: 'italic',\n    },\n    devLine: {\n        height: 48,\n        width: '100%',\n        position: 'relative'\n    },\n    devLineDescription: {\n        display: 'block',\n        fontStyle: 'italic',\n        fontSize: 12\n    },\n    devLineActions: {\n        fontStyle: 'italic',\n        fontSize: 12,\n        paddingLeft: 50,\n        display: 'inline-block',\n    },\n    devLineProgress: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n    },\n    channelLineActions: {\n        width: 80\n    },\n    devLineNameBlock: {\n        display: 'inline-block',\n        width: 'calc(100% - 350px)'\n    },\n    columnHeader: {\n        background: theme.palette.primary.light,\n        padding: 10,\n        color: theme.palette.primary.contrastText\n    },\n    devModified: {\n        fontStyle: 'italic'\n    },\n    actionIcon: {\n        width: 16\n    },\n\n    devSubLine: {\n        position: 'relative',\n        height: 48\n    },\n    devSubLineName: {\n        marginLeft: 5,\n        marginTop: 14,\n        minWidth: 100,\n        display: 'inline-block',\n        fontSize: 13,\n        paddingLeft: 70,\n        //width: 'calc(100% - 400px)'\n    },\n    devSubSubLine:  {\n        fontSize: 10,\n        fontStyle: 'italic',\n        display: 'inline-block',\n        marginLeft: 15\n    },\n    devSubLineSetId:  {\n        fontStyle: 'italic',\n        display: 'block',\n        color: '#999'\n    },\n    devSubLineByOn: {\n        marginLeft: 5\n    },\n    devSubLineDelete: {\n        position: 'absolute',\n        top: 12,\n        right: 12,\n        padding: 0\n    },\n    devSubLineEdit: {\n        position: 'absolute',\n        top: 12,\n        right: 62,\n        padding: 0\n    },\n    devSubLineTypeTitle: {\n        marginTop: 0\n    }\n});\n\nclass AlisaDevices extends Component {\n    constructor(props) {\n        super(props);\n\n        if (!actionsMapping.translated) {\n            Object.keys(actionsMapping).forEach(a => actionsMapping[a].desc = I18n.t(actionsMapping[a].desc));\n            actionsMapping.translated = true;\n        }\n\n        this.state = {\n            editedSmartName: '',\n            editId: '',\n            editObjectName: '',\n            deleteId: '',\n\n            showSelectId: false,\n            showConfirmation: '',\n            changed: [],\n            devices: [],\n            message: '',\n            filter: '',\n            loading: true,\n            browse: false,\n            expanded: [],\n            lastChanged: ''\n        };\n\n        this.timerChanged = null;\n        this.browseTimer = null;\n        this.browseTimerCount = 0;\n        this.editedSmartName = '';\n\n        this.waitForUpdateID = null;\n        this.onReadyUpdateBound = this.onReadyUpdate.bind(this);\n        this.onResultUpdateBound = this.onResultUpdate.bind(this);\n\n        this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`).then(obj => {\n            this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state => {\n                if (!obj || !obj.common || (!obj.common.enabled && (!state || !state.val))) {\n                    this.setState({message: I18n.t('Instance must be enabled'), loading: false, devices: []});\n                } else {\n                    this.browse();\n                }\n            });\n        });\n    }\n\n    browse(isIndicate) {\n        if (Date.now() - this.lastBrowse < 500) return;\n\n        this.lastBrowse = Date.now();\n        if (isIndicate) {\n            this.setState({loading: true, browse: true});\n        } else {\n            this.setState({browse: true});\n        }\n\n        console.log('Send BROWSE!');\n\n        this.browseTimer = setTimeout(() => {\n            console.log('Browse timeout!');\n            this.browseTimer = null;\n            this.browseTimerCount++;\n            if (this.browseTimerCount < 5) {\n                this.browse(isIndicate);\n            } else {\n                this.setState({message: I18n.t('Cannot read devices!')});\n            }\n        }, 10000);\n\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'browseAlisa', null, list => {\n            this.browseTimer && clearTimeout(this.browseTimer);\n            this.browseTimerCount = 0;\n            this.browseTimer = null;\n\n            if (this.waitForUpdateID) {\n                if (!this.onEdit(this.waitForUpdateID, list)) {\n                    this.setState({message: I18n.t('Device %s was not added', this.waitForUpdateID)});\n                }\n                this.waitForUpdateID = null;\n            }\n\n            console.log('BROWSE received.');\n\n            this.setState({devices: list, loading: false, changed: [], browse: false});\n        });\n    }\n\n    onReadyUpdate(id, state) {\n        console.log('Update ' + id + ' ' + state.val + '/' + state.ack);\n        if (state && state.ack === true && state.val === true) {\n            if (this.devTimer) clearTimeout(this.devTimer);\n            this.devTimer = setTimeout(() => {\n                this.devTimer = null;\n                this.browse();\n            }, 300);\n        }\n    }\n\n    onResultUpdate(id, state) {\n        state && state.ack === true && state.val && this.setState({message: state.val});\n    }\n\n    componentWillMount() {\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updates`, this.onReadyUpdateBound);\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\n    }\n\n    componentWillUnmount() {\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updates`, this.onReadyUpdateBound);\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\n        if (this.timerChanged) {\n            clearTimeout(this.timerChanged);\n            this.timerChanged = null;\n        }\n    }\n\n    informInstance(id) {\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'update', id);\n    }\n\n    addChanged(id, cb) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        if (changed.indexOf(id) === -1) {\n            changed.push(id);\n            this.setState({changed}, () => cb && cb());\n        } else {\n            cb && cb();\n        }\n    }\n\n    removeChanged(id) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        const pos = changed.indexOf(id);\n\n        if (pos !== -1) {\n            changed.splice(pos, 1);\n            this.setState({changed});\n        }\n    }\n\n    onEdit(id, devices) {\n        devices = devices || this.state.devices;\n        const device = devices.find(dev => dev.iobID === id);\n        if (device) {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    let smartName = device.name;\n                    if (typeof smartName === 'object' && smartName) {\n                        smartName = smartName[I18n.getLanguage()] || smartName.en;\n                    }\n                    this.editedSmartName = smartName;\n                    this.setState({editId: id, editedSmartName: smartName, editObjectName:smartName/* Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()})*/});\n                });\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    onAskDelete(deleteId) {\n        this.setState({deleteId, showConfirmation: true});\n    }\n\n    onDelete() {\n        let id = this.state.deleteId;\n        // const device = this.state.devices.find(dev => dev.additionalApplianceDetails.id === id);\n        this.addChanged(id, () => {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.disableSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    this.setState({deleteId: '', showConfirmation: false, lastChanged: id});\n\n                    this.timerChanged && clearTimeout(this.timerChanged);\n                    this.timerChanged = setTimeout(() => {\n                        this.setState({lastChanged: ''});\n                        this.timerChanged = null;\n                    }, 30000);\n\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderActions(dev) {\n        // Type\n        const actions = [];\n        if (!dev.actions) {\n            console.log('Something went wrong');\n            return null;\n        }\n\n        dev.actions.sort((a, b) => {\n            if (a === b) return 0;\n            if (a === 'OnOff') return -1;\n            if (b === 'OnOff') return 1;\n            return 0;\n        });\n\n        Object.keys(actionsMapping).forEach(action => {\n            if (dev.actions.indexOf(action) !== -1) {\n                const Icon = actionsMapping[action].icon;\n                actions.push((<span key={action} title={actionsMapping[action].desc}><Icon className={this.props.classes.actionIcon} style={{color: actionsMapping[action].color}}/></span>));\n            }\n        });\n        // add unknown actions\n        for (let a = 0; a < dev.actions.length; a++) {\n            if (!actionsMapping[dev.actions[a]]) {\n                actions.push((<span key={dev.actions[a]}>{dev.actions[a]}</span>));\n            }\n        }\n        return actions;\n    }\n\n    onExpand(lineNum) {\n        const expanded = JSON.parse(JSON.stringify(this.state.expanded));\n        const pos = expanded.indexOf(this.state.devices[lineNum].name);\n        if (pos === -1) {\n            expanded.push(this.state.devices[lineNum].name);\n        } else {\n            expanded.splice(pos, 1);\n        }\n        this.setState({expanded});\n    }\n\n    onParamsChange(id, byON, type) {\n        this.addChanged(id, () => {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, undefined, byON, type, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n\n                    if (this.state.lastChanged !== id) {\n                        this.setState({lastChanged: id});\n                        this.timerChanged && clearTimeout(this.timerChanged);\n                        this.timerChanged = setTimeout(() => {\n                            this.setState({lastChanged: ''});\n                            this.timerChanged = null;\n                        }, 30000);\n                    }\n\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderSelectType(dev, lineNum, id, type) {\n        if (type !== false) {\n            const items = [\n                (<MenuItem key=\"_\" value=\"_\"><em>{I18n.t('no type')}</em></MenuItem>)\n            ];\n            for (let i = 0; i < SMARTTYPES.length; i++) {\n                items.push((<MenuItem  key={SMARTTYPES[i]} value={SMARTTYPES[i]}><em>{I18n.t(SMARTTYPES[i])}</em></MenuItem>));\n            }\n            return (\n                <FormControl>\n                    <Select value={type || '_'} onChange={e => this.onParamsChange(id, undefined, e.target.value)}>{items}</Select>\n                    <FormHelperText className={this.props.classes.devSubLineTypeTitle}>{I18n.t('Types')}</FormHelperText>\n                </FormControl>);\n        } else {\n            return '';\n        }\n    }\n\n    renderChannels(dev, lineNum) {\n        const result = [];\n        const classes = this.props.classes;\n\n        const id = dev.main.getId;\n        const name = dev.func;\n        let background = DEFAULT_CHANNEL_COLOR;/*this.state.changed.indexOf(id) !== -1 ? CHANGED_COLOR : DEFAULT_CHANNEL_COLOR;\n        if (this.state.lastChanged === id && background === DEFAULT_CHANNEL_COLOR) {\n            background = LAST_CHANGED_COLOR;\n        }*/\n        result.push((<div key={'sub' + id} className={classes.devSubLine} style={{background}}>\n            <div className={classes.devSubLineName}>{name.toUpperCase()}</div>\n            <div className={classes.devSubSubLine}>\n                <div>{dev.main.getId}</div>\n                {dev.main.setId && dev.main.setId !== dev.main.getId ? (<div className={classes.devSubLineSetId}>{dev.main.setId}</div>) : null}\n            </div>\n\n        </div>));\n\n        dev.attributes.forEach(attr => {\n            result.push((<div key={'sub' + attr.getId} className={classes.devSubLine} style={{background}}>\n                <div className={classes.devSubLineName}>{attr.name.toUpperCase()}</div>\n                <div className={classes.devSubSubLine}>\n                    <div>{attr.getId}</div>\n                    {attr.setId && attr.setId !== attr.getId ? (<div className={classes.devSubLineSetId}>{attr.setId}</div>) : null}\n                </div>\n            </div>));\n        });\n\n        /*if (dev.additionalApplianceDetails.group) {\n            const channels   = dev.additionalApplianceDetails.channels;\n            const names      = dev.additionalApplianceDetails.names;\n            const types      = dev.additionalApplianceDetails.byONs;\n            const smarttypes = dev.additionalApplianceDetails.smartTypes;\n\n            let c = 0;\n            for (const chan in channels) {\n                if (channels.hasOwnProperty(chan)) {\n                    for (let i = 0; i < channels[chan].length; i++) {\n                        const id = channels[chan][i].id;\n                        let background = this.state.changed.indexOf(id) !== -1 ? CHANGED_COLOR : DEFAULT_CHANNEL_COLOR;\n                        if (this.state.lastChanged === id && background === DEFAULT_CHANNEL_COLOR) {\n                            background = LAST_CHANGED_COLOR;\n                        }\n                        result.push((<div key={'sub' + id} className={classes.devSubLine} style={(c % 2) ? {} : {background}}>\n                            <div className={this.props.classes.devLineActions + ' ' + this.props.classes.channelLineActions}>{this.renderActions(channels[chan][i])}</div>\n                            <div className={classes.devSubLineName} title={id}>{(names[id] || id)}\n                                {id !== names[id] ? (<span className={classes.devSubSubLineName}>{id}</span>) : null}\n                            </div>\n                            {this.renderSelectType(dev, lineNum, id, smarttypes[id])}\n                            {this.renderSelectByOn(dev, lineNum, id, types[id])}\n                            <IconButton aria-label=\"Delete\" className={this.props.classes.devSubLineDelete} onClick={() => this.onAskDelete(id, lineNum)}><IconDelete fontSize=\"middle\" /></IconButton>\n                        </div>));\n                        c++;\n                    }\n                }\n            }\n        } else {\n        }*/\n        return result;\n    }\n\n    renderDevice(dev, lineNum) {\n        //return (<div key={lineNum}>{JSON.stringify(dev)}</div>);\n        const expanded = this.state.expanded.indexOf(dev.name) !== -1;\n        let background = (lineNum % 2) ? '#f1f1f1' : 'inherit';\n        const changed = this.state.changed.indexOf(dev.iobID) !== -1;\n        if (changed) {\n            background = CHANGED_COLOR;\n        } else if (dev.iobID === this.state.lastChanged) {\n            background = LAST_CHANGED_COLOR;\n        }\n\n        //const isComplex = dev.\n\n        return [\n            (<div key={'line' + lineNum} className={this.props.classes.devLine} style={{background}}>\n                <div className={this.props.classes.devLineNumber}>{lineNum + 1}.</div>\n                <IconButton className={this.props.classes.devLineExpand} onClick={() => this.onExpand(lineNum)}>\n                    {dev.attributes.length ?\n                        (<Badge badgeContent={dev.attributes.length} color=\"primary\">{expanded ? (<IconCollapse/>) : (<IconExpand />)}</Badge>) :\n                        (expanded ? (<IconCollapse/>) : (<IconExpand />))}\n                </IconButton>\n                <div className={this.props.classes.devLineNameBlock} style={{display: 'inline-block', position: 'relative'}}>\n                    <span className={this.props.classes.devLineName}>{dev.name}</span>\n                    <span className={this.props.classes.devLineDescription}>{dev.description}</span>\n                    {changed ? (<CircularProgress className={this.props.classes.devLineProgress} size={20}/>) : null}\n                </div>\n                <span className={this.props.classes.devLineActions}>{this.renderActions(dev)}</span>\n                <IconButton aria-label=\"Edit\" className={this.props.classes.devLineEdit} onClick={() => this.onEdit(dev.iobID)}><IconEdit fontSize=\"middle\" /></IconButton>\n                <IconButton aria-label=\"Delete\" className={this.props.classes.devLineDelete} onClick={() => this.onAskDelete(dev.iobID)}><IconDelete fontSize=\"middle\" /></IconButton>\n\n            </div>),\n            expanded ? this.renderChannels(dev, lineNum) : null\n        ];\n    }\n\n    renderMessage() {\n        if (this.state.message) {\n            return (<MessageDialog text={this.state.message} onClose={() => this.setState({message: ''})}/>);\n        } else {\n            return null;\n        }\n    }\n\n    changeSmartName(e) {\n        e && e.preventDefault();\n        // Check if the name is duplicate\n        this.addChanged(this.state.editId, () => {\n            const id = this.state.editId;\n            this.setState({editId: '', editObjectName: '', lastChanged: id});\n\n            this.timerChanged && clearTimeout(this.timerChanged);\n            this.timerChanged = setTimeout(() => {\n                this.setState({lastChanged: ''});\n                this.timerChanged = null;\n            }, 30000);\n\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, this.editedSmartName, undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderEditDialog() {\n        if (this.state.editId) {\n            return (<Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"message-dialog-title\"\n                aria-describedby=\"message-dialog-description\"\n            >\n                <DialogTitle id=\"message-dialog-title\">{this.props.title || I18n.t('Smart name for %s', this.state.editObjectName)}</DialogTitle>\n                <DialogContent>\n                    <p><span>ID:</span> <span className={this.props.classes.editedId}>{this.state.editId}</span></p>\n                    <TextField\n                        style={{width: '100%'}}\n                        label={I18n.t('Smart name')}\n                        onKeyDown={e =>\n                            e.keyCode === 13 && this.changeSmartName(e)}\n                        onChange={e => this.editedSmartName = e.target.value}\n                        defaultValue={this.state.editedSmartName}\n                        helperText={I18n.t('You can enter several names divided by comma')}\n                        margin=\"normal\"\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.changeSmartName()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\n                    <Button onClick={() => {\n                        this.editedSmartName = null;\n                        this.setState({editId: '', editedSmartName: ''});\n                    }}>{I18n.t('Cancel')}</Button>\n                </DialogActions>\n            </Dialog>)\n        } else {\n            return null;\n        }\n    }\n\n    renderConfirmDialog() {\n        if (this.state.showConfirmation) {\n            return (<Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"confirmation-dialog-title\"\n                aria-describedby=\"confirmation-dialog-description\"\n            >\n                <DialogTitle id=\"confirmation-dialog-title\">{this.props.title || I18n.t('Device will be disabled.')}</DialogTitle>\n                <DialogContent>\n                    <p>{I18n.t('Are you sure?')}</p>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.onDelete()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\n                    <Button onClick={() => this.setState({showConfirmation: ''})}>{I18n.t('Cancel')}</Button>\n                </DialogActions>\n            </Dialog>)\n        } else {\n            return null;\n        }\n    }\n\n    getSelectIdDialog() {\n        if (this.state.showSelectId) {\n            return (<DialogSelectID\n                key=\"dialogSelectID1\"\n                prefix={'../..'}\n                connection={this.props.socket}\n                selected={''}\n                statesOnly={true}\n                onClose={() => this.setState({showSelectId: false})}\n                onOk={(selected, name) => {\n                    this.setState({showSelectId: false});\n\n                    this.props.socket.getObject(selected)\n                        .then(obj => {\n                            if (obj) {\n                                const name = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\n                                Utils.updateSmartName(obj, (name || I18n.t('Device name')).replace(/[-_.]+/g, ' '), undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                                this.addChanged(obj._id);\n                                this.waitForUpdateID = obj._id;\n\n                                if (this.state.lastChanged !== obj._id) {\n                                    this.setState({lastChanged: obj._id});\n                                    this.timerChanged && clearTimeout(this.timerChanged);\n                                    this.timerChanged = setTimeout(() => {\n                                        this.setState({lastChanged: ''});\n                                        this.timerChanged = null;\n                                    }, 30000);\n                                }\n\n                                this.props.socket.setObject(obj._id, obj)\n                                    .then(() => this.informInstance(obj._id))\n                                    .catch(err => this.setState({message: err}));\n                            } else {\n                                this.setState({message: I18n.t('Invalid ID')});\n                            }\n                        });\n                }}\n            />);\n        } else {\n            return null;\n        }\n    }\n\n    renderDevices() {\n        const filter = this.state.filter.toLowerCase();\n        const result = [];\n        for (let i = 0; i < this.state.devices.length; i++) {\n            if (this.state.filter && this.state.devices[i].name.toLowerCase().indexOf(filter) === -1 ) continue;\n            result.push(this.renderDevice(this.state.devices[i], i));\n        }\n        return (<div key=\"listDevices\" className={this.props.classes.columnDiv}>{result}</div>);\n    }\n\n    render() {\n        if (this.state.loading) {\n            return (<CircularProgress  key=\"alexaProgress\" />);\n        }\n\n        return (\n            <form key=\"alexa\" className={this.props.classes.tab}>\n                <Fab size=\"small\" color=\"secondary\" aria-label=\"Add\" className={this.props.classes.button} onClick={() => this.setState({showSelectId: true})}><IconAdd /></Fab>\n                <Fab size=\"small\" color=\"primary\" aria-label=\"Refresh\" className={this.props.classes.button}\n                      onClick={() => this.browse(true)} disabled={this.state.browse}>{this.state.browse ? (<CircularProgress size={20} />) : (<IconRefresh/>)}</Fab>\n\n                <Input\n                    placeholder={I18n.t('Filter')}\n                    className={this.state.filter}\n                    value={this.state.filter}\n                    onChange={e => this.setState({filter: e.target.value})}\n                />\n                <IconButton aria-label=\"Clear\" className={this.props.classes.button} onClick={() => this.setState({filter: ''})}><IconClear fontSize=\"large\" /></IconButton>\n                {this.renderDevices()}\n                {this.renderMessage()}\n                {this.renderEditDialog()}\n                {this.getSelectIdDialog()}\n                {this.renderConfirmDialog()}\n            </form>\n        );\n    }\n}\n\nAlisaDevices.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    adapterName: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(AlisaDevices);\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Utils from '@iobroker/adapter-react/Components/Utils'\nimport Fab from '@material-ui/core/Fab';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Input from '@material-ui/core/Input';\nimport Badge from '@material-ui/core/Badge';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\n\nimport {MdEdit as IconEdit} from 'react-icons/md';\nimport {MdAdd as IconAdd} from 'react-icons/md';\nimport {MdRefresh as IconRefresh} from 'react-icons/md';\nimport {MdClear as IconClear} from 'react-icons/md';\nimport {MdDelete as IconDelete} from 'react-icons/md';\nimport {MdFormatAlignJustify as IconExpand} from 'react-icons/md';\nimport {MdDragHandle as IconCollapse} from 'react-icons/md';\n\nimport {FaPowerOff as IconOn} from 'react-icons/fa';\nimport {FaThermometerHalf as IconTemperature} from 'react-icons/fa';\nimport {FaLongArrowAltUp as IconUp} from 'react-icons/fa';\nimport {FaLongArrowAltDown as IconDown} from 'react-icons/fa';\nimport {FaPercentage as IconPercentage} from 'react-icons/fa';\nimport {FaPalette as IconColor} from 'react-icons/fa';\nimport {FaLightbulb as IconBulb} from 'react-icons/fa';\nimport {FaLockOpen as IconLock} from 'react-icons/fa';\nimport {FaThermometer as IconThermometer} from 'react-icons/fa';\n\nimport I18n from '@iobroker/adapter-react/i18n';\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport MessageDialog from '@iobroker/adapter-react/Dialogs/Message';\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\n\nconst colorOn = '#aba613';\nconst colorOff = '#444';\nconst colorSet = '#00c6ff';\nconst colorRead = '#00bc00';\nconst CHANGED_COLOR = '#e7000040';\nconst DEFAULT_CHANNEL_COLOR = '#e9e9e9';\nconst LAST_CHANGED_COLOR = '#b4ffbe';\n\nconst actionsMapping = {\n    turnOn: {color: colorOn, icon: IconOn, desc: 'Turn on'},\n    turnOff: {color: colorOff, icon: IconOn, desc: 'Turn off'},\n\n    setTargetTemperature: {color: colorSet, icon: IconTemperature, desc: 'Set target temperature'},\n    incrementTargetTemperature: {color: colorOn, icon: IconUp, desc: 'Increment target temperature'},\n    decrementTargetTemperature: {color: colorOff, icon: IconDown, desc: 'Decrement target temperature'},\n\n    setPercentage: {color: colorSet, icon: IconPercentage, desc: 'Set percentage'},\n    incrementPercentage: {color: colorOn, icon: IconUp, desc: 'Increment percentage'},\n    decrementPercentage: {color: colorOff, icon: IconDown, desc: 'Decrement percentage'},\n\n    setColor: {color: colorSet, icon: IconColor, desc: 'Set color'},\n\n    setColorTemperature: {color: colorSet, icon: IconBulb, desc: 'Set color temperature'},\n    incrementColorTemperature: {color: colorOn, icon: IconUp, desc: 'Increment color temperature'},\n    decrementColorTemperature: {color: colorOff, icon: IconDown, desc: 'Decrement color temperature'},\n\n    getTargetTemperature: {color: colorRead, icon: IconThermometer, desc: 'Get target temperature'},\n    getTemperatureReading: {color: colorRead, icon: IconThermometer, desc: 'Get actual temperature'},\n\n    setLockState: {color: colorSet, icon: IconLock, desc: 'Set lock state'},\n    getLockState: {color: colorRead, icon: IconLock, desc: 'Read lock state'},\n};\n\nconst SMARTTYPES = ['LIGHT', 'SWITCH', 'THERMOSTAT', 'ACTIVITY_TRIGGER', 'SCENE_TRIGGER', 'SMARTPLUG', 'SMARTLOCK', 'CAMERA'];\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        height: '100%'\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20,\n        height: '100%',\n        overflow: 'hidden'\n    },\n    columnDiv: {\n        height: 'calc(100% - 40px)',\n        overflow: 'auto',\n        minWidth: 300\n    },\n    filter: {\n        margin: 0\n    },\n    button: {\n        marginRight: 20\n    },\n    devLineExpand: {\n        marginRight: 10,\n    },\n    devLineEnabled: {\n        position: 'absolute',\n        right: 0,\n        top: 0,\n    },\n    devLineEdit: {\n        position: 'absolute',\n        top: 5,\n        right: 50\n    },\n    devLineDelete: {\n        position: 'absolute',\n        top: 5,\n        right: 0\n    },\n    devLineName: {\n\n    },\n    devLineNumber:{\n        display: 'inline-block',\n        verticalAlign: 'middle',\n        width: 15,\n    },\n    editedId: {\n        fontStyle: 'italic'\n    },\n    enumLineSubName:{\n        fontStyle: 'italic',\n    },\n    devLine: {\n        height: 48,\n        width: '100%',\n        position: 'relative'\n    },\n    devLineDescription: {\n        display: 'block',\n        fontStyle: 'italic',\n        fontSize: 12\n    },\n    devLineActions: {\n        fontStyle: 'italic',\n        fontSize: 12,\n        paddingLeft: 50,\n        display: 'inline-block',\n    },\n    devLineProgress: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n    },\n    channelLineActions: {\n        width: 80\n    },\n    devLineNameBlock: {\n        display: 'inline-block',\n        width: 'calc(100% - 350px)'\n    },\n    columnHeader: {\n        background: theme.palette.primary.light,\n        padding: 10,\n        color: theme.palette.primary.contrastText\n    },\n    devModified: {\n        fontStyle: 'italic'\n    },\n    actionIcon: {\n        width: 16\n    },\n\n    devSubLine: {\n        position: 'relative',\n        height: 48\n    },\n    devSubLineName: {\n        marginLeft: 5,\n        marginTop: 14,\n        display: 'inline-block',\n        fontSize: 13,\n        width: 'calc(100% - 400px)'\n    },\n    devSubSubLineName:  {\n        fontSize: 8,\n        fontStyle: 'italic',\n        display: 'block'\n    },\n    devSubLineByOn: {\n        marginLeft: 5\n    },\n    devSubLineDelete: {\n        position: 'absolute',\n        top: 12,\n        right: 12,\n        padding: 0\n    },\n    devSubLineEdit: {\n        position: 'absolute',\n        top: 12,\n        right: 62,\n        padding: 0\n    },\n    devSubLineTypeTitle: {\n        marginTop: 0\n    }\n});\n\nclass GoogleSmartNames extends Component {\n    constructor(props) {\n        super(props);\n\n        if (!actionsMapping.translated) {\n            Object.keys(actionsMapping).forEach(a => actionsMapping[a].desc = I18n.t(actionsMapping[a].desc));\n            actionsMapping.translated = true;\n        }\n\n        this.state = {\n            editedSmartName: '',\n            editId: '',\n            editObjectName: '',\n            deleteId: '',\n\n            showSelectId: false,\n            showConfirmation: '',\n            changed: [],\n            devices: [],\n            message: '',\n            filter: '',\n            loading: true,\n            browse: false,\n            expanded: [],\n            lastChanged: ''\n        };\n\n        this.timerChanged = null;\n        this.browseTimer = null;\n        this.browseTimerCount = 0;\n        this.editedSmartName = '';\n\n        this.waitForUpdateID = null;\n        this.onReadyUpdateBound = this.onReadyUpdate.bind(this);\n        this.onResultUpdateBound = this.onResultUpdate.bind(this);\n\n        this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`).then(obj => {\n            this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state => {\n                if (!obj || !obj.common || (!obj.common.enabled && (!state || !state.val))) {\n                    this.setState({message: I18n.t('Instance must be enabled'), loading: false, devices: []});\n                } else {\n                    this.browse();\n                }\n            });\n        });\n    }\n\n    browse(isIndicate) {\n        if (Date.now() - this.lastBrowse < 500) return;\n        this.lastBrowse = Date.now();\n        if (isIndicate) {\n            this.setState({loading: true, browse: true});\n        } else {\n            this.setState({browse: true});\n        }\n        console.log('Send BROWSE!');\n        this.browseTimer = setTimeout(() => {\n            console.log('Browse timeout!');\n            this.browseTimer = null;\n            this.browseTimerCount++;\n            if (this.browseTimerCount < 5) {\n                this.browse(isIndicate);\n            } else {\n                this.setState({message: I18n.t('Cannot read devices!')});\n            }\n        }, 10000);\n\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'browse', null, list => {\n            this.browseTimer && clearTimeout(this.browseTimer);\n            this.browseTimerCount = 0;\n            this.browseTimer = null;\n            if (this.waitForUpdateID) {\n                if (!this.onEdit(this.waitForUpdateID, list)) {\n                    this.setState({message: I18n.t('Device %s was not added', this.waitForUpdateID)});\n                }\n                this.waitForUpdateID = null;\n            }\n            console.log('BROWSE received.');\n\n            this.setState({devices: list, loading: false, changed: [], browse: false});\n        });\n    }\n\n    onReadyUpdate(id, state) {\n        console.log(`Update ${id} ${state ? state.val + '/' + state.ack : 'null'}`);\n        if (state && state.ack === true && state.val === true) {\n            if (this.devTimer) clearTimeout(this.devTimer);\n            this.devTimer = setTimeout(() => {\n                this.devTimer = null;\n                this.browse();\n            }, 300);\n        }\n    }\n\n    onResultUpdate(id, state) {\n        state && state.ack === true && state.val && this.setState({message: state.val});\n    }\n\n    componentWillMount() {\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updates`, this.onReadyUpdateBound);\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\n    }\n\n    componentWillUnmount() {\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updates`, this.onReadyUpdateBound);\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\n        if (this.timerChanged) {\n            clearTimeout(this.timerChanged);\n            this.timerChanged = null;\n        }\n    }\n\n    informInstance(id) {\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'update', id);\n    }\n\n    addChanged(id, cb) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        if (changed.indexOf(id) === -1) {\n            changed.push(id);\n            this.setState({changed}, () => cb && cb());\n        } else {\n            cb && cb();\n        }\n    }\n\n    removeChanged(id) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        const pos = changed.indexOf(id);\n\n        if (pos !== -1) {\n            changed.splice(pos, 1);\n            this.setState({changed});\n        }\n    }\n\n    onEdit(id, devices) {\n        devices = devices || this.state.devices;\n        const device = devices.find(dev => dev.additionalApplianceDetails.id === id);\n        if (device) {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    let smartName = device.additionalApplianceDetails.friendlyNames ? device.additionalApplianceDetails.friendlyNames : device.friendlyName;\n                    if (typeof smartName === 'object' && smartName) {\n                        smartName = smartName[I18n.getLanguage()] || smartName.en;\n                    }\n                    this.editedSmartName = smartName;\n                    this.setState({editId: id, editedSmartName: smartName, editObjectName: Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()})});\n                });\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    onAskDelete(deleteId) {\n        this.setState({deleteId, showConfirmation: true});\n    }\n\n    onDelete() {\n        let id = this.state.deleteId;\n        // const device = this.state.devices.find(dev => dev.additionalApplianceDetails.id === id);\n        this.addChanged(id, () => {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.disableSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    this.setState({deleteId: '', showConfirmation: false, lastChanged: id});\n\n                    this.timerChanged && clearTimeout(this.timerChanged);\n                    this.timerChanged = setTimeout(() => {\n                        this.setState({lastChanged: ''});\n                        this.timerChanged = null;\n                    }, 30000);\n\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderActions(dev) {\n        // Type\n        const actions = [];\n        if (!dev.traits) {\n            console.log('Something went wrong');\n            return null;\n        }\n        dev.traits.sort((a, b) => {\n            if (a === b) return 0;\n            if (a === 'turnOn') return -1;\n            if (b === 'turnOn') return 1;\n\n            if (a === 'turnOff') return -1;\n            if (b === 'turnOff') return 1;\n            return 0;\n        });\n\n        Object.keys(actionsMapping).forEach(action => {\n            if (dev.actions.indexOf(action) !== -1) {\n                const Icon = actionsMapping[action].icon;\n                actions.push((<span key={action} title={actionsMapping[action].desc}><Icon className={this.props.classes.actionIcon} style={{color: actionsMapping[action].color}}/></span>));\n            }\n        });\n        // add unknown actions\n        for (let a = 0; a < dev.actions.length; a++) {\n            if (!actionsMapping[dev.actions[a]]) {\n                actions.push((<span key={dev.actions[a]}>{dev.actions[a]}</span>));\n            }\n        }\n        return actions;\n    }\n\n    onExpand(lineNum) {\n        const expanded = JSON.parse(JSON.stringify(this.state.expanded));\n        const pos = expanded.indexOf(this.state.devices[lineNum].friendlyName);\n        if (pos === -1) {\n            expanded.push(this.state.devices[lineNum].friendlyName);\n        } else {\n            expanded.splice(pos, 1);\n        }\n        this.setState({expanded});\n    }\n\n    renderSelectByOn(dev, lineNum, id, type) {\n        // type = '-', 'stored', false or number [5-100]\n        if (type !== false) {\n            const items = [\n                (<MenuItem key=\"_\" value=\"\"><em>{I18n.t('Default')}</em></MenuItem>),\n                (<MenuItem key=\"last\" value=\"stored\">{I18n.t('last value')}</MenuItem>)\n            ];\n            for (let i = 5; i <= 100; i += 5) {\n                items.push((<MenuItem  key={i.toString()} value={i.toString()}>{i}%</MenuItem>));\n            }\n            return (<FormControl className={this.props.classes.devSubLineByOn}>\n                <Select className={this.props.classes.devSubLineByOnSelect} value={(type || '').toString()} onChange={e => this.onParamsChange(id, e.target.value)}>{items}</Select>\n                <FormHelperText className={this.props.classes.devSubLineTypeTitle}>{I18n.t('by ON')}</FormHelperText>\n            </FormControl>);\n        } else {\n            return null;\n        }\n    }\n\n    onParamsChange(id, byON, type) {\n        this.addChanged(id, () => {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, undefined, byON, type, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n\n                    if (this.state.lastChanged !== id) {\n                        this.setState({lastChanged: id});\n                        this.timerChanged && clearTimeout(this.timerChanged);\n                        this.timerChanged = setTimeout(() => {\n                            this.setState({lastChanged: ''});\n                            this.timerChanged = null;\n                        }, 30000);\n                    }\n\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderSelectType(dev, lineNum, id, type) {\n        if (type !== false) {\n            const items = [\n                (<MenuItem key=\"_\" value=\"_\"><em>{I18n.t('no type')}</em></MenuItem>)\n            ];\n            for (let i = 0; i < SMARTTYPES.length; i++) {\n                items.push((<MenuItem  key={SMARTTYPES[i]} value={SMARTTYPES[i]}><em>{I18n.t(SMARTTYPES[i])}</em></MenuItem>));\n            }\n            return (\n                <FormControl>\n                    <Select value={type || '_'} onChange={e => this.onParamsChange(id, undefined, e.target.value)}>{items}</Select>\n                    <FormHelperText className={this.props.classes.devSubLineTypeTitle}>{I18n.t('Types')}</FormHelperText>\n                </FormControl>);\n        } else {\n            return '';\n        }\n    }\n\n    renderChannels(dev, lineNum) {\n        const result = [];\n        const classes = this.props.classes;\n\n        if (dev.additionalApplianceDetails.group) {\n            const channels   = dev.additionalApplianceDetails.channels;\n            const names      = dev.additionalApplianceDetails.names;\n            const types      = dev.additionalApplianceDetails.byONs;\n            const smarttypes = dev.additionalApplianceDetails.smartTypes;\n\n            let c = 0;\n            for (const chan in channels) {\n                if (channels.hasOwnProperty(chan)) {\n                    for (let i = 0; i < channels[chan].length; i++) {\n                        const id = channels[chan][i].id;\n                        let background = this.state.changed.indexOf(id) !== -1 ? CHANGED_COLOR : DEFAULT_CHANNEL_COLOR;\n                        if (this.state.lastChanged === id && background === DEFAULT_CHANNEL_COLOR) {\n                            background = LAST_CHANGED_COLOR;\n                        }\n                        result.push((<div key={'sub' + id} className={classes.devSubLine} style={(c % 2) ? {} : {background}}>\n                            <div className={this.props.classes.devLineActions + ' ' + this.props.classes.channelLineActions}>{this.renderActions(channels[chan][i])}</div>\n                            <div className={classes.devSubLineName} title={id}>{(names[id] || id)}\n                                {id !== names[id] ? (<span className={classes.devSubSubLineName}>{id}</span>) : null}\n                            </div>\n                            {this.renderSelectType(dev, lineNum, id, smarttypes[id])}\n                            {this.renderSelectByOn(dev, lineNum, id, types[id])}\n                            <IconButton aria-label=\"Delete\" className={this.props.classes.devSubLineDelete} onClick={() => this.onAskDelete(id, lineNum)}><IconDelete fontSize=\"middle\" /></IconButton>\n                        </div>));\n                        c++;\n                    }\n                }\n            }\n        } else {\n            const id = dev.additionalApplianceDetails.id;\n            const name = dev.additionalApplianceDetails.name || id;\n            let background = this.state.changed.indexOf(id) !== -1 ? CHANGED_COLOR : DEFAULT_CHANNEL_COLOR;\n            if (this.state.lastChanged === id && background === DEFAULT_CHANNEL_COLOR) {\n                background = LAST_CHANGED_COLOR;\n            }\n            result.push((<div key={'sub' + id} className={classes.devSubLine} style={{background}}>\n                <div className={this.props.classes.devLineActions + ' ' + this.props.classes.channelLineActions} style={{width: 80}}>{this.renderActions(dev)}</div>\n                <div className={classes.devSubLineName} title={(id || '')}>{name}</div>\n                {this.renderSelectType(dev, lineNum, id, dev.additionalApplianceDetails.smartType)}\n                {this.renderSelectByOn(dev, lineNum, id, dev.additionalApplianceDetails.byON)}\n            </div>));\n        }\n        return result;\n    }\n\n    renderDevice(dev, lineNum) {\n        let friendlyName = dev.friendlyName;\n        let title;\n        if (!dev.additionalApplianceDetails.group && dev.additionalApplianceDetails.nameModified) {\n            title = friendlyName;\n        } else {\n            title = (<span className={this.props.classes.devModified} title={I18n.t('modified')}>{friendlyName}</span>);\n        }\n\n        let devCount = 0;\n        for (const ch in dev.additionalApplianceDetails.channels) {\n            if (dev.additionalApplianceDetails.channels.hasOwnProperty(ch)) {\n                devCount += dev.additionalApplianceDetails.channels[ch].length;\n            }\n        }\n        devCount = devCount || 1;\n        const expanded = this.state.expanded.indexOf(friendlyName) !== -1;\n        const id = dev.additionalApplianceDetails.id;\n\n        let background = (lineNum % 2) ? '#f1f1f1' : 'inherit';\n        const changed = this.state.changed.indexOf(id) !== -1;\n        if (changed) {\n            background = CHANGED_COLOR;\n        } else if (id === this.state.lastChanged) {\n            background = LAST_CHANGED_COLOR;\n        }\n\n        // If some of sub channels in change list or in last changed\n        if (dev.additionalApplianceDetails.group && !changed && id !== this.state.lastChanged) {\n            const channels = dev.additionalApplianceDetails.channels;\n            for (const chan in channels) {\n                if (channels.hasOwnProperty(chan)) {\n                    for (let i = 0; i < channels[chan].length; i++) {\n                        const id = channels[chan][i].id;\n                        if (this.state.changed.indexOf(id) !== -1) {\n                            background = CHANGED_COLOR;\n                        } else if (this.state.lastChanged === id) {\n                            background = LAST_CHANGED_COLOR;\n                        }\n                    }\n                }\n            }\n        }\n\n        return [\n            (<div key={'line' + lineNum} className={this.props.classes.devLine} style={{background}}>\n                <div className={this.props.classes.devLineNumber}>{lineNum + 1}.</div>\n                <IconButton className={this.props.classes.devLineExpand} onClick={() => this.onExpand(lineNum)}>\n                    {devCount > 1 ?\n                        (<Badge badgeContent={devCount} color=\"primary\">\n                            {expanded ? (<IconCollapse/>) : (<IconExpand />)}\n                        </Badge>) :\n                        (expanded ? (<IconCollapse/>) : (<IconExpand />))}\n                </IconButton>\n                <div className={this.props.classes.devLineNameBlock} style={{display: 'inline-block', position: 'relative'}}>\n                    <span className={this.props.classes.devLineName}>{title}</span>\n                    <span className={this.props.classes.devLineDescription}>{dev.friendlyDescription}</span>\n                    {changed ? (<CircularProgress className={this.props.classes.devLineProgress} size={20}/>) : null}\n                </div>\n                <span className={this.props.classes.devLineActions}>{this.renderActions(dev)}</span>\n                {!dev.additionalApplianceDetails.group ?\n                    (<IconButton aria-label=\"Edit\" className={this.props.classes.devLineEdit} onClick={() => this.onEdit(id)}><IconEdit fontSize=\"middle\" /></IconButton>) : null}\n                {!dev.additionalApplianceDetails.group ?\n                    (<IconButton aria-label=\"Delete\" className={this.props.classes.devLineDelete} onClick={() => this.onAskDelete(id)}><IconDelete fontSize=\"middle\" /></IconButton>) : null}\n            </div>),\n            expanded ? this.renderChannels(dev, lineNum) : null\n        ];\n    }\n\n    renderMessage() {\n        if (this.state.message) {\n            return (<MessageDialog text={this.state.message} onClose={() => this.setState({message: ''})}/>);\n        } else {\n            return null;\n        }\n    }\n\n    changeSmartName(e) {\n        e && e.preventDefault();\n        // Check if the name is duplicate\n        this.addChanged(this.state.editId, () => {\n            const id = this.state.editId;\n            this.setState({editId: '', editObjectName: '', lastChanged: id});\n\n            this.timerChanged && clearTimeout(this.timerChanged);\n            this.timerChanged = setTimeout(() => {\n                this.setState({lastChanged: ''});\n                this.timerChanged = null;\n            }, 30000);\n\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, this.editedSmartName, undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderEditDialog() {\n        if (this.state.editId) {\n            return (<Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"message-dialog-title\"\n                aria-describedby=\"message-dialog-description\"\n            >\n                <DialogTitle id=\"message-dialog-title\">{this.props.title || I18n.t('Smart name for %s', this.state.editObjectName)}</DialogTitle>\n                <DialogContent>\n                    <p><span>ID:</span> <span className={this.props.classes.editedId}>{this.state.editId}</span></p>\n                    <TextField\n                        style={{width: '100%'}}\n                        label={I18n.t('Smart name')}\n                        onKeyDown={e =>\n                            e.keyCode === 13 && this.changeSmartName(e)}\n                        onChange={e => this.editedSmartName = e.target.value}\n                        defaultValue={this.state.editedSmartName}\n                        helperText={I18n.t('You can enter several names divided by comma')}\n                        margin=\"normal\"\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.changeSmartName()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\n                    <Button onClick={() => {\n                        this.editedSmartName = null;\n                        this.setState({editId: '', editedSmartName: ''});\n                    }}>{I18n.t('Cancel')}</Button>\n                </DialogActions>\n            </Dialog>)\n        } else {\n            return null;\n        }\n    }\n\n    renderConfirmDialog() {\n        if (this.state.showConfirmation) {\n            return (<Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"confirmation-dialog-title\"\n                aria-describedby=\"confirmation-dialog-description\"\n            >\n                <DialogTitle id=\"confirmation-dialog-title\">{this.props.title || I18n.t('Device will be disabled.')}</DialogTitle>\n                <DialogContent>\n                    <p>{I18n.t('Are you sure?')}</p>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.onDelete()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\n                    <Button onClick={() => this.setState({showConfirmation: ''})}>{I18n.t('Cancel')}</Button>\n                </DialogActions>\n            </Dialog>)\n        } else {\n            return null;\n        }\n    }\n\n    getSelectIdDialog() {\n        if (this.state.showSelectId) {\n            return (<DialogSelectID\n                key=\"dialogSelectID1\"\n                prefix={'../..'}\n                connection={this.props.socket}\n                selected={''}\n                statesOnly={true}\n                onClose={() => this.setState({showSelectId: false})}\n                onOk={(selected, name) => {\n                    this.setState({showSelectId: false});\n\n                    this.props.socket.getObject(selected)\n                        .then(obj => {\n                            if (obj) {\n                                const name = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\n                                Utils.updateSmartName(obj, (name || I18n.t('Device name')).replace(/[-_.]+/g, ' '), undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                                this.addChanged(obj._id);\n                                this.waitForUpdateID = obj._id;\n\n                                if (this.state.lastChanged !== obj._id) {\n                                    this.setState({lastChanged: obj._id});\n                                    this.timerChanged && clearTimeout(this.timerChanged);\n                                    this.timerChanged = setTimeout(() => {\n                                        this.setState({lastChanged: ''});\n                                        this.timerChanged = null;\n                                    }, 30000);\n                                }\n\n                                this.props.socket.setObject(obj._id, obj)\n                                    .then(() => this.informInstance(obj._id))\n                                    .catch(err => this.setState({message: err}));\n                            } else {\n                                this.setState({message: I18n.t('Invalid ID')});\n                            }\n                        });\n                }}\n            />);\n        } else {\n            return null;\n        }\n    }\n\n    renderDevices() {\n        const filter = this.state.filter.toLowerCase();\n        const result = [];\n        for (let i = 0; i < this.state.devices.length; i++) {\n            if (this.state.filter && this.state.devices[i].friendlyName.toLowerCase().indexOf(filter) === -1 ) continue;\n            result.push(this.renderDevice(this.state.devices[i], i));\n        }\n        return (<div key=\"listDevices\" className={this.props.classes.columnDiv}>{result}</div>);\n    }\n\n    render() {\n        if (this.state.loading) {\n            return (<CircularProgress  key=\"alexaProgress\" />);\n        }\n\n        return (\n            <form key=\"alexa\" className={this.props.classes.tab}>\n                <Fab size=\"small\" color=\"secondary\" aria-label=\"Add\" className={this.props.classes.button} onClick={() => this.setState({showSelectId: true})}><IconAdd /></Fab>\n                <Fab size=\"small\" color=\"primary\" aria-label=\"Refresh\" className={this.props.classes.button}\n                      onClick={() => this.browse(true)} disabled={this.state.browse}>{this.state.browse ? (<CircularProgress size={20} />) : (<IconRefresh/>)}</Fab>\n\n                <Input\n                    placeholder={I18n.t('Filter')}\n                    className={this.state.filter}\n                    value={this.state.filter}\n                    onChange={e => this.setState({filter: e.target.value})}\n                />\n                <IconButton aria-label=\"Clear\" className={this.props.classes.button} onClick={() => this.setState({filter: ''})}><IconClear fontSize=\"large\" /></IconButton>\n                {this.renderDevices()}\n                {this.renderMessage()}\n                {this.renderEditDialog()}\n                {this.getSelectIdDialog()}\n                {this.renderConfirmDialog()}\n            </form>\n        );\n    }\n}\n\nGoogleSmartNames.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    adapterName: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(GoogleSmartNames);\n","import React from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport GenericApp from '@iobroker/adapter-react/GenericApp';\nimport Loader from '@iobroker/adapter-react/Components/Loader'\n\nimport I18n from '@iobroker/adapter-react/i18n';\nimport TabOptions from './Tabs/Options';\nimport TabExtended from './Tabs/Extended';\nimport TabServices from './Tabs/Services';\nimport TabEnums from './Tabs/Enums';\nimport TabAlexaSmartNames from './Tabs/AlexaSmartNames';\nimport TabAlisaSmartNames from './Tabs/AlisaSmartNames';\nimport TabGoogleSmartNames from './Tabs/GoogleSmartNames';\n\nconst styles = theme => ({\n    root: {},\n    tabContent: {\n        padding: 10,\n        height: 'calc(100% - 64px - 48px - 20px)',\n        overflow: 'auto'\n    },\n    tabContentIFrame: {\n        padding: 10,\n        height: 'calc(100% - 64px - 48px - 20px - 38px)',\n        overflow: 'auto'\n    }\n});\n\nclass App extends GenericApp {\n    constructor(props) {\n        const extendedProps = {...props};\n        extendedProps.encryptedFields = ['pass'];\n        extendedProps.translations = {\n            'en': require('./i18n/en'),\n            'de': require('./i18n/de'),\n            'ru': require('./i18n/ru'),\n            'pt': require('./i18n/pt'),\n            'nl': require('./i18n/nl'),\n            'fr': require('./i18n/fr'),\n            'it': require('./i18n/it'),\n            'es': require('./i18n/es'),\n            'pl': require('./i18n/pl'),\n            'zh-cn': require('./i18n/zh-cn'),\n        };\n        super(extendedProps);\n    }\n\n    getSelectedTab() {\n        const tab = this.state.selectedTab;\n        if (!tab || tab === 'options') {\n            return 0;\n        } else\n        if (tab === 'enums') {\n            return 1;\n        } else\n        if (tab === 'alexa') {\n            return 2;\n        } else\n        if (tab === 'google') {\n            const offset = (this.state.native.amazonAlexa ? 1 : 0);\n            return 2 + offset;\n        }\n        if (tab === 'alisa') {\n            const offset = (this.state.native.amazonAlexa ? 1 : 0) + (this.state.native.googleHome ? 1 : 0);\n            return 2 + offset;\n        } else\n        if (tab === 'extended') {\n            const offset = (this.state.native.amazonAlexa ? 1 : 0) + (this.state.native.googleHome ? 1 : 0) + (this.state.native.yandexAlisa ? 1 : 0);\n            return 2 + offset;\n        } else\n        if (tab === 'services') {\n            const offset = (this.state.native.amazonAlexa ? 1 : 0) + (this.state.native.googleHome ? 1 : 0) + (this.state.native.yandexAlisa ? 1 : 0);\n            return 3 + offset;\n        }\n    }\n\n    render() {\n        if (!this.state.loaded) {\n            return (<Loader theme={this.state.themeType}/>);\n        }\n\n        return (\n            <div className=\"App\">\n                <AppBar position=\"static\">\n                    <Tabs value={this.getSelectedTab()} onChange={(e, index) => this.selectTab(e.target.parentNode.dataset.name, index)}>\n                        <Tab label={I18n.t('Options')} data-name=\"options\" />\n                        <Tab label={I18n.t('Smart enums')} data-name=\"enums\" />\n                        {this.state.native.amazonAlexa && <Tab selected={this.state.selectedTab === 'alexa'} label={I18n.t('Alexa devices')} data-name=\"alexa\" />}\n                        {this.state.native.googleHome && <Tab selected={this.state.selectedTab === 'google'} label={I18n.t('Google devices')} data-name=\"google\" />}\n                        {this.state.native.yandexAlisa && <Tab selected={this.state.selectedTab === 'alisa'} label={I18n.t('Alisa devices')} data-name=\"alisa\" />}\n                        <Tab label={I18n.t('Extended options')} data-name=\"extended\" />\n                        <Tab label={I18n.t('Services and IFTTT')} data-name=\"services\" />\n                    </Tabs>\n                </AppBar>\n\n                <div className={this.isIFrame ? this.props.classes.tabContentIFrame : this.props.classes.tabContent}>\n                    {(this.state.selectedTab === 'options' || !this.state.selectedTab) && (<TabOptions\n                        key=\"options\"\n                        common={this.common}\n                        socket={this.socket}\n                        native={this.state.native}\n                        onError={text => this.setState({errorText: text})}\n                        onLoad={native => this.onLoadConfig(native)}\n                        instance={this.instance}\n                        adapterName={this.adapterName}\n                        onChange={(attr, value, cb) => this.updateNativeValue(attr, value, cb)}\n                    />)}\n                    {this.state.selectedTab === 'enums' && (<TabEnums\n                        key=\"enums\"\n                        common={this.common}\n                        socket={this.socket}\n                        native={this.state.native}\n                        onError={text => this.setState({errorText: text})}\n                        instance={this.instance}\n                        adapterName={this.adapterName}\n                    />)}\n                    {this.state.selectedTab === 'alexa' && (<TabAlexaSmartNames\n                        key=\"alexa\"\n                        common={this.common}\n                        socket={this.socket}\n                        native={this.state.native}\n                        onError={text => this.setState({errorText: text})}\n                        adapterName={this.adapterName}\n                        instance={this.instance}\n                    />)}\n                        {this.state.selectedTab === 'google' && (<TabGoogleSmartNames\n                        key=\"google\"\n                        common={this.common}\n                        socket={this.socket}\n                        native={this.state.native}\n                        onError={text => this.setState({errorText: text})}\n                        adapterName={this.adapterName}\n                        instance={this.instance}\n                    />)}\n                    {this.state.selectedTab === 'alisa' && (<TabAlisaSmartNames\n                        key=\"alisa\"\n                        common={this.common}\n                        socket={this.socket}\n                        native={this.state.native}\n                        onError={text => this.setState({errorText: text})}\n                        adapterName={this.adapterName}\n                        instance={this.instance}\n                    />)}\n                    {this.state.selectedTab === 'extended' && (<TabExtended\n                        key=\"extended\"\n                        common={this.common}\n                        socket={this.socket}\n                        native={this.state.native}\n                        onError={text => this.setState({errorText: text})}\n                        instance={this.instance}\n                        adapterName={this.adapterName}\n                        onChange={(attr, value) => this.updateNativeValue(attr, value)}\n                    />)}\n                    {this.state.selectedTab === 'services' && (<TabServices\n                        key=\"services\"\n                        common={this.common}\n                        socket={this.socket}\n                        native={this.state.native}\n                        onError={text => this.setState({errorText: text})}\n                        instance={this.instance}\n                        adapterName={this.adapterName}\n                        onShowError={error => this.showError(error)}\n                        onChange={(attr, value) => this.updateNativeValue(attr, value)}\n                    />)}\n                </div>\n                {this.renderError()}\n                {this.renderSaveCloseButtons()}\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { MuiThemeProvider} from '@material-ui/core/styles';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport createTheme from '@iobroker/adapter-react/createTheme';\n\nlet theme = 'light';\n\nfunction build() {\n    return ReactDOM.render(<MuiThemeProvider theme={createTheme(theme)}>\n        <App onThemeChange={_theme => {\n            theme = _theme;\n            build();\n        }}/>\n    </MuiThemeProvider>, document.getElementById('root'));\n}\n\n\nbuild();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}